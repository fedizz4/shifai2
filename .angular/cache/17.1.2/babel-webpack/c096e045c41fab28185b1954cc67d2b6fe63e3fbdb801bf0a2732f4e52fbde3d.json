{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _DocumentPage;\nimport { finalize } from 'rxjs/operators';\nimport { inscritUid } from '../login/login.page';\nimport { getDocumentsIS, medecinUid } from 'src/firebaseConfig';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/storage\";\nimport * as i2 from \"@angular/fire/compat/firestore\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction DocumentPage_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-input\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function DocumentPage_div_25_Template_ion_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.description = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"ion-button\", 12);\n    i0.ɵɵelement(3, \"ion-icon\", 13);\n    i0.ɵɵtext(4, \" \\u00A0\\u00A0Envoyer \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"img\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r0.selectedFile, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DocumentPage_ion_item_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\");\n    i0.ɵɵelement(1, \"img\", 15);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 16);\n    i0.ɵɵtext(5, \" Voir d\\u00E9tail..\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const document_r4 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", document_r4.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(document_r4.description);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"href\", document_r4.url, i0.ɵɵsanitizeUrl);\n  }\n}\nexport class DocumentPage {\n  constructor(storage, firestore, toastController, modalController, cdr, router) {\n    this.storage = storage;\n    this.firestore = firestore;\n    this.toastController = toastController;\n    this.modalController = modalController;\n    this.cdr = cdr;\n    this.router = router;\n    this.Vfiche = true;\n    this.Vconsultation = false;\n    this.Vdocument = false;\n    this.uid = '';\n    this.nom = '';\n    this.prenom = '';\n    this.age = 0;\n    this.adresse = '';\n    this.telephone = '';\n    this.sexe = '';\n    this.groupeSanguin = '';\n    this.situationFamiliale = '';\n    this.profession = '';\n    this.email = '';\n    this.telephone2 = '';\n    this.numeroAssurance = '';\n    this.note = '';\n    this.antecedentsMedicaux = '';\n    this.antecedentsChirurgicaux = '';\n    this.antecedentsFamiliaux = '';\n    this.autresAntecedents = '';\n    this.medicaments = '';\n    this.description = '';\n    this.selectedFile = null;\n    this.selectedFileUrl = null;\n    this.documents = [];\n    this.consultationDate = ''; // Variable pour stocker la date de consultation\n    this.consultationdate1 = '';\n    this.searchDescription = '';\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.getdoc();\n    })();\n  }\n  back() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.router.navigate(['/patient']);\n      console.log('going to patient');\n    })();\n  }\n  onFileSelected(event) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const file = event.target.files[0];\n      if (!file) {\n        console.error('Aucun fichier sélectionné.');\n        return;\n      }\n      // Validate file type (optional)\n      // if (!this.isValidFileType(file)) {\n      //   console.error('Type de fichier non supporté.');\n      //   return;\n      // }\n      _this3.selectedFile = file;\n      try {\n        // Generate a unique ID using Firestore's createId() method\n        const fileId = _this3.firestore.createId();\n        // Construct the file path in Firebase Storage\n        const filePath = `documents/${fileId}_${file.name}`;\n        // Create a reference to the file in Firebase Storage\n        const fileRef = _this3.storage.ref(filePath);\n        // Upload the file to Firebase Storage\n        const uploadTask = _this3.storage.upload(filePath, file);\n        // Handle upload progress and completion\n        uploadTask.snapshotChanges().pipe(finalize( /*#__PURE__*/_asyncToGenerator(function* () {\n          try {\n            // Get the downloadable URL of the uploaded file\n            const fileUrl = yield fileRef.getDownloadURL().toPromise();\n            // Check if description is empty\n            if (!_this3.description) {\n              console.error('La description est obligatoire pour télécharger le fichier.');\n              return;\n            }\n            console.log(_this3.description);\n            console.log(fileId);\n            // Validate and sanitize the description if necessary\n            // Create a document data object with relevant information\n            const documentData = {\n              uid: fileId,\n              // Use the generated fileId as the document ID\n              medecinUid: medecinUid.uid,\n              patientUid: inscritUid,\n              url: fileUrl,\n              description: _this3.description\n            };\n            // Add the document to Firestore using the docRef\n            const docRef = _this3.firestore.collection('documents').doc(fileId);\n            yield docRef.set(documentData);\n            // Handle successful document creation\n            console.log('Document ajouté avec succès.');\n            _this3.getdoc(); // Assuming getdocument fetches and updates documents list\n          } catch (error) {\n            // Handle errors during document creation\n            console.error('Erreur lors de l\\'ajout du document :', error);\n            // Provide more specific error messages based on error.code and error.message\n          }\n        }))).subscribe();\n      } catch (error) {\n        // Handle errors during file upload\n        console.error('Erreur lors de l\\'ajout du document :', error);\n        // Provide more specific error messages based on error.code and error.message\n      }\n    })();\n  }\n  /* async envoyer() {\n    if (!this.selectedFile) {\n      console.error('Aucun fichier sélectionné.');\n      return;\n    }\n    const file: File | null = event.target.files[0];\n       this.selectedFile = file;\n       // Check if description is empty (already in your code)\n  \n    if (file instanceof File) {\n      try {\n        // Generate a unique ID using Firestore's createId() method\n        const fileId = this.firestore.createId();\n  \n        // Construct the file path in Firebase Storage\n        const filePath = `documents/${fileId}_${file.name}`;\n  \n        // Create a reference to the file in Firebase Storage\n        const fileRef = this.storage.ref(filePath);\n  \n        // Upload the file to Firebase Storage\n        const uploadTask = this.storage.upload(filePath, file);\n  \n        // Handle upload progress and completion\n        uploadTask.snapshotChanges().pipe(\n          finalize(async () => {\n            try {\n              // Get the downloadable URL of the uploaded file\n              const fileUrl = await fileRef.getDownloadURL().toPromise();\n  \n              // Retrieve the description from the input field\n              const description = this.description;\n  \n              // Validate and sanitize the description if necessary\n  \n              // Create a document data object with relevant information\n              const documentData = {\n                uid: fileId, // Use the generated fileId as the document ID\n                medecinUid: medecinUid.uid,\n                patientUid: inscritUid,\n                url: fileUrl,\n                description: description\n              };\n  \n              // Add the document to Firestore using the docRef\n              const docRef = this.firestore.collection('documents').doc(fileId);\n              await docRef.set(documentData);\n  \n              // Handle successful document creation\n              console.log('Document ajouté avec succès.');\n              this.getdoc(); // Assuming getdocument fetches and updates documents list\n  \n            } catch (error) {\n              // Handle errors during document creation\n              console.error('Erreur lors de l\\'ajout du document :', error);\n              // Provide more specific error messages based on error.code and error.message\n            }\n          })\n        ).subscribe();\n      } catch (error) {\n        // Handle errors during file upload\n        console.error('Erreur lors de l\\'ajout du document :', error);\n        // Provide more specific error messages based on error.code and error.message\n      }\n    }\n  }\n  */\n  closeModal() {\n    this.modalController.dismiss();\n  }\n  searchDocumentsByDescription(description) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (!description) {\n          console.log('Veuillez entrer une description.');\n          return;\n        }\n        // Filtrer les documents pour la description spécifiée\n        const filteredDocuments = _this4.documents.filter(document => document.description === description);\n        if (filteredDocuments.length > 0) {\n          console.log('Documents trouvés avec la description', description, ':', filteredDocuments);\n          _this4.documents = filteredDocuments;\n        } else {\n          console.log('Aucun document trouvé avec la description', description);\n        }\n      } catch (error) {\n        console.error('Erreur lors de la recherche des documents pour la description :', error);\n      }\n    })();\n  }\n  getdoc() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      const doc = yield getDocumentsIS(_this5.firestore, inscritUid);\n      console.log(doc);\n      if (doc) {\n        _this5.documents = doc;\n      }\n      console.log(inscritUid);\n    })();\n  }\n}\n_DocumentPage = DocumentPage;\n_DocumentPage.ɵfac = function DocumentPage_Factory(t) {\n  return new (t || _DocumentPage)(i0.ɵɵdirectiveInject(i1.AngularFireStorage), i0.ɵɵdirectiveInject(i2.AngularFirestore), i0.ɵɵdirectiveInject(i3.ToastController), i0.ɵɵdirectiveInject(i3.ModalController), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.Router));\n};\n_DocumentPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _DocumentPage,\n  selectors: [[\"app-document\"]],\n  decls: 35,\n  vars: 5,\n  consts: [[3, \"translucent\"], [\"slot\", \"start\"], [\"routerLink\", \"/tabs/tab1\", \"fill\", \"clear\"], [3, \"fullscreen\"], [\"placeholder\", \"Rechercher\"], [1, \"upload-document\"], [\"type\", \"file\", \"id\", \"fileInput\", \"name\", \"fileInput\", \"accept\", \"*/*\", 3, \"change\"], [4, \"ngIf\"], [\"type\", \"text\", \"placeholder\", \"entrer une description a rechercher\", \"color\", \"primary\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"placeholder\", \"Enter document description\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"ion-text-end\"], [\"name\", \"send-outline\"], [\"alt\", \"Selected Image\", 3, \"src\"], [\"width\", \"60\", \"height\", \"60\", 3, \"src\"], [\"float\", \"right\", \"target\", \"_blank\", 3, \"href\"]],\n  template: function DocumentPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-buttons\", 1)(3, \"ion-button\", 2);\n      i0.ɵɵtext(4, \"Retour\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"ion-title\");\n      i0.ɵɵtext(6, \"Documents\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"ion-content\", 3)(8, \"ion-card\")(9, \"ion-card-content\")(10, \"ion-card-header\");\n      i0.ɵɵelement(11, \"br\")(12, \"ion-searchbar\", 4)(13, \"br\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"ion-card\", 5)(15, \"ion-card-content\");\n      i0.ɵɵelement(16, \"br\")(17, \"br\")(18, \"br\")(19, \"br\")(20, \"br\")(21, \"br\")(22, \"br\")(23, \"br\");\n      i0.ɵɵelementStart(24, \"input\", 6);\n      i0.ɵɵlistener(\"change\", function DocumentPage_Template_input_change_24_listener($event) {\n        return ctx.onFileSelected($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(25, DocumentPage_div_25_Template, 6, 2, \"div\", 7);\n      i0.ɵɵelementStart(26, \"ion-card\")(27, \"div\")(28, \"ion-list\")(29, \"ion-input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function DocumentPage_Template_ion_input_ngModelChange_29_listener($event) {\n        return ctx.searchDescription = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"ion-button\", 9);\n      i0.ɵɵlistener(\"click\", function DocumentPage_Template_ion_button_click_30_listener() {\n        return ctx.searchDocumentsByDescription(ctx.searchDescription);\n      });\n      i0.ɵɵtext(31, \"Rechercher\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(32, DocumentPage_ion_item_32_Template, 6, 3, \"ion-item\", 10);\n      i0.ɵɵelement(33, \"br\")(34, \"br\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"translucent\", true);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"fullscreen\", true);\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"ngIf\", ctx.selectedFile);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchDescription);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.documents);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.NgControlStatus, i6.RequiredValidator, i6.NgModel, i3.IonButton, i3.IonButtons, i3.IonCard, i3.IonCardContent, i3.IonCardHeader, i3.IonContent, i3.IonHeader, i3.IonIcon, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonList, i3.IonSearchbar, i3.IonTitle, i3.IonToolbar, i3.TextValueAccessor, i3.RouterLinkDelegate, i4.RouterLink],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["finalize","inscritUid","getDocumentsIS","medecinUid","i0","ɵɵelementStart","ɵɵlistener","DocumentPage_div_25_Template_ion_input_ngModelChange_1_listener","$event","ɵɵrestoreView","_r3","ctx_r2","ɵɵnextContext","ɵɵresetView","description","ɵɵelementEnd","ɵɵelement","ɵɵtext","ɵɵadvance","ɵɵproperty","ctx_r0","selectedFile","ɵɵsanitizeUrl","document_r4","url","ɵɵtextInterpolate","DocumentPage","constructor","storage","firestore","toastController","modalController","cdr","router","Vfiche","Vconsultation","Vdocument","uid","nom","prenom","age","adresse","telephone","sexe","groupeSanguin","situationFamiliale","profession","email","telephone2","numeroAssurance","note","antecedentsMedicaux","antecedentsChirurgicaux","antecedentsFamiliaux","autresAntecedents","medicaments","selectedFileUrl","documents","consultationDate","consultationdate1","searchDescription","ngOnInit","_this","_asyncToGenerator","getdoc","back","_this2","navigate","console","log","onFileSelected","event","_this3","file","target","files","error","fileId","createId","filePath","name","fileRef","ref","uploadTask","upload","snapshotChanges","pipe","fileUrl","getDownloadURL","toPromise","documentData","patientUid","docRef","collection","doc","set","subscribe","closeModal","dismiss","searchDocumentsByDescription","_this4","filteredDocuments","filter","document","length","_this5","ɵɵdirectiveInject","i1","AngularFireStorage","i2","AngularFirestore","i3","ToastController","ModalController","ChangeDetectorRef","i4","Router","selectors","decls","vars","consts","template","DocumentPage_Template","rf","ctx","DocumentPage_Template_input_change_24_listener","ɵɵtemplate","DocumentPage_div_25_Template","DocumentPage_Template_ion_input_ngModelChange_29_listener","DocumentPage_Template_ion_button_click_30_listener","DocumentPage_ion_item_32_Template"],"sources":["C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\document\\document.page.ts","C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\document\\document.page.html"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { AngularFireStorage } from '@angular/fire/compat/storage';\nimport { LoadingController, ModalController, ToastController } from '@ionic/angular';\nimport { finalize } from 'rxjs/operators';\nimport { inscritUid } from '../login/login.page';\nimport { getConsultations,getDocumentsIS, getDocuments, getDocumentsforpatient, getInscritByUid, getPatientByUid, medecinUid, savePatient } from 'src/firebaseConfig';\nimport { Router } from '@angular/router';\n\ninterface DocumentData {\n  url: string;\n  description: string;\n  useruid: string;\n}\n\ninterface PatientData {\n  uid: string;\n  nom: string;\n  prenom: string;\n  age: number;\n  sexe: string;\n  groupeSanguin: string;\n  situationFamiliale: string;\n  profession: string;\n  email: string;\n  telephone: string;\n  telephone2: string;\n  numeroAssurance: string;\n  adresse: string;\n  note: string;\n  antecedentsMedicaux: string;\n  antecedentsChirurgicaux: string;\n  antecedentsFamiliaux: string;\n  autresAntecedents: string;\n  medicaments: string;\n  useruid: string;\n}\n\ninterface consultationData {\n  date: string;\n  details?: string;\n  uid?: string;\n}\n\n@Component({\n  selector: 'app-document',\n  templateUrl: './document.page.html',\n  styleUrls: ['./document.page.scss'],\n})\nexport class DocumentPage implements OnInit {\n  Vfiche: boolean = true;\n  Vconsultation: boolean = false;\n  Vdocument: boolean = false;\n \n    uid:string='';\n    nom:string='';\n    prenom:string='';\n    age:number=0;\n    adresse:string='';\n    telephone:string='';\n    sexe:string='';\n    groupeSanguin:string='';\n    situationFamiliale:string='';\n    profession:string='';\n    email:string='';\n    telephone2:string='';\n    numeroAssurance:string='';\n    note:string='';\n    antecedentsMedicaux:string='';\n    antecedentsChirurgicaux:string='';\n    antecedentsFamiliaux:string='';\n    autresAntecedents:string='';\n    medicaments:string='';\n    description:string='';\n\n\n  patient: PatientData | null | undefined;\n  consultations!: consultationData[];\n  selectedFile: File | null = null;\n  selectedFileUrl: string | null = null;\n  documents:DocumentData[]=[];\n  consultationDate: string = ''; // Variable pour stocker la date de consultation\n  consultationdate1:string='';\n  searchDescription:string='';\n\n\n  constructor(private storage : AngularFireStorage ,private firestore: AngularFirestore,private toastController :ToastController, private modalController: ModalController, private cdr: ChangeDetectorRef, private router: Router) {\n  }\n\n  async ngOnInit() {\n    this.getdoc();\n  \n \n  }\n  async back(){\n    \n    this.router.navigate(['/patient']);\n    console.log('going to patient')\n  }\n  \n  \n\n  \n \n \n  async onFileSelected(event: any) {\n    const file: File | null = event.target.files[0];\n  \n    if (!file) {\n      console.error('Aucun fichier sélectionné.');\n      return;\n    }\n  \n    // Validate file type (optional)\n    // if (!this.isValidFileType(file)) {\n    //   console.error('Type de fichier non supporté.');\n    //   return;\n    // }\n  \n    this.selectedFile = file;\n  \n    try {\n      // Generate a unique ID using Firestore's createId() method\n      const fileId = this.firestore.createId();\n  \n      // Construct the file path in Firebase Storage\n      const filePath = `documents/${fileId}_${file.name}`;\n  \n      // Create a reference to the file in Firebase Storage\n      const fileRef = this.storage.ref(filePath);\n  \n      // Upload the file to Firebase Storage\n      const uploadTask = this.storage.upload(filePath, file);\n  \n      // Handle upload progress and completion\n      uploadTask.snapshotChanges().pipe(\n        finalize(async () => {\n          try {\n            // Get the downloadable URL of the uploaded file\n            const fileUrl = await fileRef.getDownloadURL().toPromise();\n  \n            // Check if description is empty\n            if (!this.description) {\n              console.error('La description est obligatoire pour télécharger le fichier.');\n              return;\n            }\n            console.log(this.description)\n            console.log(fileId)\n  \n            // Validate and sanitize the description if necessary\n  \n            // Create a document data object with relevant information\n            const documentData = {\n              uid: fileId, // Use the generated fileId as the document ID\n              medecinUid: medecinUid.uid,\n              patientUid: inscritUid,\n              url: fileUrl,\n              description: this.description\n            };\n  \n            // Add the document to Firestore using the docRef\n            const docRef = this.firestore.collection('documents').doc(fileId);\n            await docRef.set(documentData);\n  \n            // Handle successful document creation\n            console.log('Document ajouté avec succès.');\n            this.getdoc(); // Assuming getdocument fetches and updates documents list\n  \n          } catch (error) {\n            // Handle errors during document creation\n            console.error('Erreur lors de l\\'ajout du document :', error);\n            // Provide more specific error messages based on error.code and error.message\n          }\n        })\n      ).subscribe();\n    } catch (error) {\n      // Handle errors during file upload\n      console.error('Erreur lors de l\\'ajout du document :', error);\n      // Provide more specific error messages based on error.code and error.message\n    }\n  }\n  \n  \n  /* async envoyer() {\n    if (!this.selectedFile) {\n      console.error('Aucun fichier sélectionné.');\n      return;\n    }\n    const file: File | null = event.target.files[0];\n\n    this.selectedFile = file;\n\n    // Check if description is empty (already in your code)\n  \n    if (file instanceof File) {\n      try {\n        // Generate a unique ID using Firestore's createId() method\n        const fileId = this.firestore.createId();\n  \n        // Construct the file path in Firebase Storage\n        const filePath = `documents/${fileId}_${file.name}`;\n  \n        // Create a reference to the file in Firebase Storage\n        const fileRef = this.storage.ref(filePath);\n  \n        // Upload the file to Firebase Storage\n        const uploadTask = this.storage.upload(filePath, file);\n  \n        // Handle upload progress and completion\n        uploadTask.snapshotChanges().pipe(\n          finalize(async () => {\n            try {\n              // Get the downloadable URL of the uploaded file\n              const fileUrl = await fileRef.getDownloadURL().toPromise();\n  \n              // Retrieve the description from the input field\n              const description = this.description;\n  \n              // Validate and sanitize the description if necessary\n  \n              // Create a document data object with relevant information\n              const documentData = {\n                uid: fileId, // Use the generated fileId as the document ID\n                medecinUid: medecinUid.uid,\n                patientUid: inscritUid,\n                url: fileUrl,\n                description: description\n              };\n  \n              // Add the document to Firestore using the docRef\n              const docRef = this.firestore.collection('documents').doc(fileId);\n              await docRef.set(documentData);\n  \n              // Handle successful document creation\n              console.log('Document ajouté avec succès.');\n              this.getdoc(); // Assuming getdocument fetches and updates documents list\n  \n            } catch (error) {\n              // Handle errors during document creation\n              console.error('Erreur lors de l\\'ajout du document :', error);\n              // Provide more specific error messages based on error.code and error.message\n            }\n          })\n        ).subscribe();\n      } catch (error) {\n        // Handle errors during file upload\n        console.error('Erreur lors de l\\'ajout du document :', error);\n        // Provide more specific error messages based on error.code and error.message\n      }\n    }\n  }\n  */\n\n  \n  \n  closeModal() {\n    this.modalController.dismiss();\n  }\n  \n  async searchDocumentsByDescription(description: string) {\n    try {\n      if (!description) {\n        console.log('Veuillez entrer une description.');\n        return;\n      }\n  \n      // Filtrer les documents pour la description spécifiée\n      const filteredDocuments = this.documents.filter(document => document.description === description);\n  \n      if (filteredDocuments.length > 0) {\n        console.log('Documents trouvés avec la description', description, ':', filteredDocuments);\n        this.documents = filteredDocuments;\n      } else {\n        console.log('Aucun document trouvé avec la description', description);\n      }\n    } catch (error) {\n      console.error('Erreur lors de la recherche des documents pour la description :', error);\n    }\n  }\n  async getdoc(){\n    const doc=await getDocumentsIS(this.firestore,inscritUid)\n    console.log(doc)\n    if(doc){\n      this.documents=doc;\n    }\n    console.log(inscritUid)\n  }\n}\n","<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button routerLink=\"/tabs/tab1\" fill=\"clear\">Retour</ion-button>\n    </ion-buttons>\n    <ion-title>Documents</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\">\n  <ion-card>\n    <ion-card-content>\n      <ion-card-header>\n        <br>\n        <ion-searchbar placeholder=\"Rechercher\" ></ion-searchbar>\n        <br>\n      </ion-card-header>\n          <ion-card class=\"upload-document\">\n            <ion-card-content>\n              \n\n              <br><br> \n              <br><br> <br><br> <br><br> \n                <input type=\"file\" id=\"fileInput\" name=\"fileInput\" accept=\"*/*\" (change)=\"onFileSelected($event)\">\n\n          </ion-card-content>\n          </ion-card>\n\n          <div *ngIf=\"selectedFile\">\n            <ion-input type=\"text\" [(ngModel)]=\"description\" placeholder=\"Enter document description\" required></ion-input>\n            <ion-button class=\"ion-text-end\" >\n              <ion-icon name=\"send-outline\"></ion-icon>\n              &nbsp;&nbsp;Envoyer\n            </ion-button>\n            \n            <img [src]=\"selectedFile\" alt=\"Selected Image\">\n          </div>\n         <ion-card>\n          <div>\n            <ion-list>\n              <ion-input type=\"text\" [(ngModel)]=\"searchDescription\"placeholder=\"entrer une description a rechercher\" color=\"primary\" ></ion-input>\n<ion-button (click)=\"searchDocumentsByDescription(searchDescription)\">Rechercher</ion-button>\n              <ion-item *ngFor=\"let document of documents\">\n                <img [src]=\"document.url\" width=\"60\" height=\"60\">\n                <ion-label>{{ document.description }}</ion-label>\n                <a float=\"right\" [href]=\"document.url\"  target=\"_blank\" > Voir détail..</a>\n              </ion-item>\n              <br><br>\n            </ion-list>\n          </div>\n         </ion-card>\n        </ion-card-content>\n  </ion-card>\n\n</ion-content>\n"],"mappings":";;AAIA,SAASA,QAAQ,QAAQ,gBAAgB;AACzC,SAASC,UAAU,QAAQ,qBAAqB;AAChD,SAA0BC,cAAc,EAA0EC,UAAU,QAAqB,oBAAoB;;;;;;;;;;;ICsB3JC,EAAA,CAAAC,cAAA,UAA0B;IACDD,EAAA,CAAAE,UAAA,2BAAAC,gEAAAC,MAAA;MAAAJ,EAAA,CAAAK,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAP,EAAA,CAAAQ,aAAA;MAAA,OAAAR,EAAA,CAAAS,WAAA,CAAAF,MAAA,CAAAG,WAAA,GAAAN,MAAA;IAAA,EAAyB;IAAmDJ,EAAA,CAAAW,YAAA,EAAY;IAC/GX,EAAA,CAAAC,cAAA,qBAAkC;IAChCD,EAAA,CAAAY,SAAA,mBAAyC;IACzCZ,EAAA,CAAAa,MAAA,4BACF;IAAAb,EAAA,CAAAW,YAAA,EAAa;IAEbX,EAAA,CAAAY,SAAA,cAA+C;IACjDZ,EAAA,CAAAW,YAAA,EAAM;;;;IAPmBX,EAAA,CAAAc,SAAA,EAAyB;IAAzBd,EAAA,CAAAe,UAAA,YAAAC,MAAA,CAAAN,WAAA,CAAyB;IAM3CV,EAAA,CAAAc,SAAA,GAAoB;IAApBd,EAAA,CAAAe,UAAA,QAAAC,MAAA,CAAAC,YAAA,EAAAjB,EAAA,CAAAkB,aAAA,CAAoB;;;;;IAOvBlB,EAAA,CAAAC,cAAA,eAA6C;IAC3CD,EAAA,CAAAY,SAAA,cAAiD;IACjDZ,EAAA,CAAAC,cAAA,gBAAW;IAAAD,EAAA,CAAAa,MAAA,GAA0B;IAAAb,EAAA,CAAAW,YAAA,EAAY;IACjDX,EAAA,CAAAC,cAAA,YAAyD;IAACD,EAAA,CAAAa,MAAA,0BAAa;IAAAb,EAAA,CAAAW,YAAA,EAAI;;;;IAFtEX,EAAA,CAAAc,SAAA,EAAoB;IAApBd,EAAA,CAAAe,UAAA,QAAAI,WAAA,CAAAC,GAAA,EAAApB,EAAA,CAAAkB,aAAA,CAAoB;IACdlB,EAAA,CAAAc,SAAA,GAA0B;IAA1Bd,EAAA,CAAAqB,iBAAA,CAAAF,WAAA,CAAAT,WAAA,CAA0B;IACpBV,EAAA,CAAAc,SAAA,EAAqB;IAArBd,EAAA,CAAAe,UAAA,SAAAI,WAAA,CAAAC,GAAA,EAAApB,EAAA,CAAAkB,aAAA,CAAqB;;;ADItD,OAAM,MAAOI,YAAY;EAqCvBC,YAAoBC,OAA4B,EAAUC,SAA2B,EAASC,eAAgC,EAAUC,eAAgC,EAAUC,GAAsB,EAAUC,MAAc;IAA5M,KAAAL,OAAO,GAAPA,OAAO;IAA+B,KAAAC,SAAS,GAATA,SAAS;IAA2B,KAAAC,eAAe,GAAfA,eAAe;IAA2B,KAAAC,eAAe,GAAfA,eAAe;IAA2B,KAAAC,GAAG,GAAHA,GAAG;IAA6B,KAAAC,MAAM,GAANA,MAAM;IApCxN,KAAAC,MAAM,GAAY,IAAI;IACtB,KAAAC,aAAa,GAAY,KAAK;IAC9B,KAAAC,SAAS,GAAY,KAAK;IAExB,KAAAC,GAAG,GAAQ,EAAE;IACb,KAAAC,GAAG,GAAQ,EAAE;IACb,KAAAC,MAAM,GAAQ,EAAE;IAChB,KAAAC,GAAG,GAAQ,CAAC;IACZ,KAAAC,OAAO,GAAQ,EAAE;IACjB,KAAAC,SAAS,GAAQ,EAAE;IACnB,KAAAC,IAAI,GAAQ,EAAE;IACd,KAAAC,aAAa,GAAQ,EAAE;IACvB,KAAAC,kBAAkB,GAAQ,EAAE;IAC5B,KAAAC,UAAU,GAAQ,EAAE;IACpB,KAAAC,KAAK,GAAQ,EAAE;IACf,KAAAC,UAAU,GAAQ,EAAE;IACpB,KAAAC,eAAe,GAAQ,EAAE;IACzB,KAAAC,IAAI,GAAQ,EAAE;IACd,KAAAC,mBAAmB,GAAQ,EAAE;IAC7B,KAAAC,uBAAuB,GAAQ,EAAE;IACjC,KAAAC,oBAAoB,GAAQ,EAAE;IAC9B,KAAAC,iBAAiB,GAAQ,EAAE;IAC3B,KAAAC,WAAW,GAAQ,EAAE;IACrB,KAAAzC,WAAW,GAAQ,EAAE;IAKvB,KAAAO,YAAY,GAAgB,IAAI;IAChC,KAAAmC,eAAe,GAAkB,IAAI;IACrC,KAAAC,SAAS,GAAgB,EAAE;IAC3B,KAAAC,gBAAgB,GAAW,EAAE,CAAC,CAAC;IAC/B,KAAAC,iBAAiB,GAAQ,EAAE;IAC3B,KAAAC,iBAAiB,GAAQ,EAAE;EAI3B;EAEMC,QAAQA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACZD,KAAI,CAACE,MAAM,EAAE;IAAC;EAGhB;EACMC,IAAIA,CAAA;IAAA,IAAAC,MAAA;IAAA,OAAAH,iBAAA;MAERG,MAAI,CAACjC,MAAM,CAACkC,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;MAClCC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;IAAA;EACjC;EAOMC,cAAcA,CAACC,KAAU;IAAA,IAAAC,MAAA;IAAA,OAAAT,iBAAA;MAC7B,MAAMU,IAAI,GAAgBF,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAE/C,IAAI,CAACF,IAAI,EAAE;QACTL,OAAO,CAACQ,KAAK,CAAC,4BAA4B,CAAC;QAC3C;MACF;MAEA;MACA;MACA;MACA;MACA;MAEAJ,MAAI,CAACnD,YAAY,GAAGoD,IAAI;MAExB,IAAI;QACF;QACA,MAAMI,MAAM,GAAGL,MAAI,CAAC3C,SAAS,CAACiD,QAAQ,EAAE;QAExC;QACA,MAAMC,QAAQ,GAAG,aAAaF,MAAM,IAAIJ,IAAI,CAACO,IAAI,EAAE;QAEnD;QACA,MAAMC,OAAO,GAAGT,MAAI,CAAC5C,OAAO,CAACsD,GAAG,CAACH,QAAQ,CAAC;QAE1C;QACA,MAAMI,UAAU,GAAGX,MAAI,CAAC5C,OAAO,CAACwD,MAAM,CAACL,QAAQ,EAAEN,IAAI,CAAC;QAEtD;QACAU,UAAU,CAACE,eAAe,EAAE,CAACC,IAAI,CAC/BtF,QAAQ,eAAA+D,iBAAA,CAAC,aAAW;UAClB,IAAI;YACF;YACA,MAAMwB,OAAO,SAASN,OAAO,CAACO,cAAc,EAAE,CAACC,SAAS,EAAE;YAE1D;YACA,IAAI,CAACjB,MAAI,CAAC1D,WAAW,EAAE;cACrBsD,OAAO,CAACQ,KAAK,CAAC,6DAA6D,CAAC;cAC5E;YACF;YACAR,OAAO,CAACC,GAAG,CAACG,MAAI,CAAC1D,WAAW,CAAC;YAC7BsD,OAAO,CAACC,GAAG,CAACQ,MAAM,CAAC;YAEnB;YAEA;YACA,MAAMa,YAAY,GAAG;cACnBrD,GAAG,EAAEwC,MAAM;cAAE;cACb1E,UAAU,EAAEA,UAAU,CAACkC,GAAG;cAC1BsD,UAAU,EAAE1F,UAAU;cACtBuB,GAAG,EAAE+D,OAAO;cACZzE,WAAW,EAAE0D,MAAI,CAAC1D;aACnB;YAED;YACA,MAAM8E,MAAM,GAAGpB,MAAI,CAAC3C,SAAS,CAACgE,UAAU,CAAC,WAAW,CAAC,CAACC,GAAG,CAACjB,MAAM,CAAC;YACjE,MAAMe,MAAM,CAACG,GAAG,CAACL,YAAY,CAAC;YAE9B;YACAtB,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;YAC3CG,MAAI,CAACR,MAAM,EAAE,CAAC,CAAC;UAEjB,CAAC,CAAC,OAAOY,KAAK,EAAE;YACd;YACAR,OAAO,CAACQ,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;YAC7D;UACF;QACF,CAAC,EAAC,CACH,CAACoB,SAAS,EAAE;MACf,CAAC,CAAC,OAAOpB,KAAK,EAAE;QACd;QACAR,OAAO,CAACQ,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;QAC7D;MACF;IAAC;EACH;EAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAwEAqB,UAAUA,CAAA;IACR,IAAI,CAAClE,eAAe,CAACmE,OAAO,EAAE;EAChC;EAEMC,4BAA4BA,CAACrF,WAAmB;IAAA,IAAAsF,MAAA;IAAA,OAAArC,iBAAA;MACpD,IAAI;QACF,IAAI,CAACjD,WAAW,EAAE;UAChBsD,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;UAC/C;QACF;QAEA;QACA,MAAMgC,iBAAiB,GAAGD,MAAI,CAAC3C,SAAS,CAAC6C,MAAM,CAACC,QAAQ,IAAIA,QAAQ,CAACzF,WAAW,KAAKA,WAAW,CAAC;QAEjG,IAAIuF,iBAAiB,CAACG,MAAM,GAAG,CAAC,EAAE;UAChCpC,OAAO,CAACC,GAAG,CAAC,uCAAuC,EAAEvD,WAAW,EAAE,GAAG,EAAEuF,iBAAiB,CAAC;UACzFD,MAAI,CAAC3C,SAAS,GAAG4C,iBAAiB;QACpC,CAAC,MAAM;UACLjC,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAAEvD,WAAW,CAAC;QACvE;MACF,CAAC,CAAC,OAAO8D,KAAK,EAAE;QACdR,OAAO,CAACQ,KAAK,CAAC,iEAAiE,EAAEA,KAAK,CAAC;MACzF;IAAC;EACH;EACMZ,MAAMA,CAAA;IAAA,IAAAyC,MAAA;IAAA,OAAA1C,iBAAA;MACV,MAAM+B,GAAG,SAAO5F,cAAc,CAACuG,MAAI,CAAC5E,SAAS,EAAC5B,UAAU,CAAC;MACzDmE,OAAO,CAACC,GAAG,CAACyB,GAAG,CAAC;MAChB,IAAGA,GAAG,EAAC;QACLW,MAAI,CAAChD,SAAS,GAACqC,GAAG;MACpB;MACA1B,OAAO,CAACC,GAAG,CAACpE,UAAU,CAAC;IAAA;EACzB;;gBA7OWyB,YAAY;;mBAAZA,aAAY,EAAAtB,EAAA,CAAAsG,iBAAA,CAAAC,EAAA,CAAAC,kBAAA,GAAAxG,EAAA,CAAAsG,iBAAA,CAAAG,EAAA,CAAAC,gBAAA,GAAA1G,EAAA,CAAAsG,iBAAA,CAAAK,EAAA,CAAAC,eAAA,GAAA5G,EAAA,CAAAsG,iBAAA,CAAAK,EAAA,CAAAE,eAAA,GAAA7G,EAAA,CAAAsG,iBAAA,CAAAtG,EAAA,CAAA8G,iBAAA,GAAA9G,EAAA,CAAAsG,iBAAA,CAAAS,EAAA,CAAAC,MAAA;AAAA;;QAAZ1F,aAAY;EAAA2F,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,sBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCjDzBvH,EAAA,CAAAC,cAAA,oBAAiC;MAGsBD,EAAA,CAAAa,MAAA,aAAM;MAAAb,EAAA,CAAAW,YAAA,EAAa;MAEtEX,EAAA,CAAAC,cAAA,gBAAW;MAAAD,EAAA,CAAAa,MAAA,gBAAS;MAAAb,EAAA,CAAAW,YAAA,EAAY;MAIpCX,EAAA,CAAAC,cAAA,qBAAiC;MAIzBD,EAAA,CAAAY,SAAA,UAAI;MAGNZ,EAAA,CAAAW,YAAA,EAAkB;MACdX,EAAA,CAAAC,cAAA,mBAAkC;MAI9BD,EAAA,CAAAY,SAAA,UAAI;MAEFZ,EAAA,CAAAC,cAAA,gBAAkG;MAAlCD,EAAA,CAAAE,UAAA,oBAAAuH,+CAAArH,MAAA;QAAA,OAAUoH,GAAA,CAAAtD,cAAA,CAAA9D,MAAA,CAAsB;MAAA,EAAC;MAAjGJ,EAAA,CAAAW,YAAA,EAAkG;MAKxGX,EAAA,CAAA0H,UAAA,KAAAC,4BAAA,iBAQM;MACP3H,EAAA,CAAAC,cAAA,gBAAU;MAGkBD,EAAA,CAAAE,UAAA,2BAAA0H,0DAAAxH,MAAA;QAAA,OAAAoH,GAAA,CAAAhE,iBAAA,GAAApD,MAAA;MAAA,EAA+B;MAAmEJ,EAAA,CAAAW,YAAA,EAAY;MACnJX,EAAA,CAAAC,cAAA,qBAAsE;MAA1DD,EAAA,CAAAE,UAAA,mBAAA2H,mDAAA;QAAA,OAASL,GAAA,CAAAzB,4BAAA,CAAAyB,GAAA,CAAAhE,iBAAA,CAA+C;MAAA,EAAC;MAACxD,EAAA,CAAAa,MAAA,kBAAU;MAAAb,EAAA,CAAAW,YAAA,EAAa;MAC/EX,EAAA,CAAA0H,UAAA,KAAAI,iCAAA,uBAIW;MACX9H,EAAA,CAAAY,SAAA,UAAI;MACNZ,EAAA,CAAAW,YAAA,EAAW;;;MAhDXX,EAAA,CAAAe,UAAA,qBAAoB;MASnBf,EAAA,CAAAc,SAAA,GAAmB;MAAnBd,EAAA,CAAAe,UAAA,oBAAmB;MAmBhBf,EAAA,CAAAc,SAAA,IAAkB;MAAlBd,EAAA,CAAAe,UAAA,SAAAyG,GAAA,CAAAvG,YAAA,CAAkB;MAYGjB,EAAA,CAAAc,SAAA,GAA+B;MAA/Bd,EAAA,CAAAe,UAAA,YAAAyG,GAAA,CAAAhE,iBAAA,CAA+B;MAEvBxD,EAAA,CAAAc,SAAA,GAAY;MAAZd,EAAA,CAAAe,UAAA,YAAAyG,GAAA,CAAAnE,SAAA,CAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}