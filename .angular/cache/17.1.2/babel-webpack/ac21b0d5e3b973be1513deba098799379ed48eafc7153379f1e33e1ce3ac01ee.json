{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _ParametreSecretairePage;\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./parametre-secretaire.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./parametre-secretaire.page.scss?ngResource\";\nimport { Component, ViewChild } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { FormulaireComponent } from './formulaire/formulaire.component';\nimport { getSecretaireByUid } from 'src/firebaseConfig';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { EventService } from 'src/app/event.service';\nimport { Subscription } from 'rxjs';\nimport { medecinUid } from 'src/firebaseConfig';\nimport { SupprimerAlertComponent } from './supprimer-alert/supprimer-alert.component'; // Importez votre composant supprimer-alert\nimport { FormComponent } from './form/form.component';\nlet ParametreSecretairePage = (_ParametreSecretairePage = class ParametreSecretairePage {\n  constructor(firestore, modalController, eventService) {\n    this.firestore = firestore;\n    this.modalController = modalController;\n    this.eventService = eventService;\n    this.formulaireComponent = FormulaireComponent;\n    this.subscription = new Subscription(); // Initialisation ajoutée\n    this.uid = medecinUid.uid;\n    this.secretaires = [];\n  }\n  ngOnInit() {\n    // Appeler fetchSecretaire lors du chargement initial\n    console.log('med uid    ', this.uid);\n    uida = this.uid;\n    console.log('uida     ', uida);\n    window.addEventListener('refreshPage', () => {\n      this.fetchSecretaire();\n    });\n    this.fetchSecretaire();\n    // Souscrire à l'événement de mise à jour du secrétaire\n    this.subscription = this.eventService.secretaireUpdated$.subscribe(() => {\n      this.fetchSecretaire();\n    });\n  }\n  ngOnDestroy() {\n    // Assurez-vous de désabonner la souscription pour éviter les fuites de mémoire\n    this.subscription.unsubscribe();\n    window.removeEventListener('refreshPage', () => {});\n  }\n  fetchSecretaire() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.secretaires = yield getSecretaireByUid(_this.firestore, _this.uid);\n        if (_this.secretaires && _this.secretaires.length > 0) {\n          _this.secretaires = _this.secretaires;\n          console.log('Secrétaire de l\\'utilisateur :', _this.secretaires);\n        } else {\n          console.error('Aucune donnée de secrétaire trouvée.');\n        }\n      } catch (error) {\n        console.error('Erreur lors de la récupération du secrétaire :', error);\n      }\n    })();\n  }\n  afficherFormulaireModal() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const modal = yield _this2.modalController.create({\n        component: _this2.formulaireComponent\n      });\n      modal.onDidDismiss().then(data => {\n        // Traitez les données du formulaire ici (data.data)\n        console.log('Données du formulaire modal soumis :', data.data);\n      });\n      return yield modal.present();\n    })();\n  }\n  afficherFormModal(secretaireID) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const modal = yield _this3.modalController.create({\n        component: FormComponent,\n        componentProps: {\n          secretaireID: secretaireID\n        }\n      });\n      modal.onDidDismiss().then(data => {\n        // Traitez les données du formulaire ici (data.data)\n        console.log('Données du formulaire modal soumis :', data.data);\n      });\n      return yield modal.present();\n    })();\n  }\n  affichersuprresionModal(secretaireID) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      const modal = yield _this4.modalController.create({\n        component: SupprimerAlertComponent,\n        componentProps: {\n          secretaireID: secretaireID\n        }\n      });\n      modal.onDidDismiss().then(data => {\n        // Traitez les données du formulaire ici (data.data)\n        console.log('Données du formulaire modal soumis :', data.data);\n      });\n      return yield modal.present();\n    })();\n  }\n}, _ParametreSecretairePage.ctorParameters = () => [{\n  type: AngularFirestore\n}, {\n  type: ModalController\n}, {\n  type: EventService\n}], _ParametreSecretairePage.propDecorators = {\n  myModal: [{\n    type: ViewChild,\n    args: ['myModal']\n  }]\n}, _ParametreSecretairePage);\nParametreSecretairePage = __decorate([Component({\n  selector: 'app-parametre-secretaire',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], ParametreSecretairePage);\nexport { ParametreSecretairePage };\nexport let uida;","map":{"version":3,"names":["Component","ViewChild","ModalController","FormulaireComponent","getSecretaireByUid","AngularFirestore","EventService","Subscription","medecinUid","SupprimerAlertComponent","FormComponent","ParametreSecretairePage","_ParametreSecretairePage","constructor","firestore","modalController","eventService","formulaireComponent","subscription","uid","secretaires","ngOnInit","console","log","uida","window","addEventListener","fetchSecretaire","secretaireUpdated$","subscribe","ngOnDestroy","unsubscribe","removeEventListener","_this","_asyncToGenerator","length","error","afficherFormulaireModal","_this2","modal","create","component","onDidDismiss","then","data","present","afficherFormModal","secretaireID","_this3","componentProps","affichersuprresionModal","_this4","args","__decorate","selector","template","__NG_CLI_RESOURCE__0"],"sources":["C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\parametre-secretaire\\parametre-secretaire.page.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { FormulaireComponent } from './formulaire/formulaire.component';\nimport { getSecretaireByUid } from 'src/firebaseConfig';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { EventService } from 'src/app/event.service';\nimport { Subscription } from 'rxjs';\nimport { medecinUid } from 'src/firebaseConfig';\nimport { SupprimerAlertComponent } from './supprimer-alert/supprimer-alert.component'; // Importez votre composant supprimer-alert\nimport { FormComponent } from './form/form.component';\ninterface secretaireData {\n  uid:string\n  prenom : string ;\n  nom : string ;\n  numero : string ;\n  gmail : string ;\n  password : string ;\n}\n\n\n@Component({\n  selector: 'app-parametre-secretaire',\n  templateUrl: './parametre-secretaire.page.html',\n  styleUrls: ['./parametre-secretaire.page.scss'],\n})\nexport class ParametreSecretairePage implements OnInit, OnDestroy {\n\n  @ViewChild('myModal') myModal: any;\n  formulaireComponent = FormulaireComponent;\n  private subscription: Subscription = new Subscription(); // Initialisation ajoutée\n  uid: string = medecinUid.uid;\n  secretaires: secretaireData[] = [];\n\n  constructor(\n    private firestore: AngularFirestore,\n    private modalController: ModalController,\n    private eventService: EventService\n  ) {}\n\n  ngOnInit() {\n    // Appeler fetchSecretaire lors du chargement initial\n    console.log('med uid    ',this.uid);\n    uida=this.uid ;\n    console.log('uida     ',uida);\n\n    window.addEventListener('refreshPage', () => {\n      this.fetchSecretaire();\n    });\n    \n    this.fetchSecretaire();\n\n    // Souscrire à l'événement de mise à jour du secrétaire\n    this.subscription = this.eventService.secretaireUpdated$.subscribe(() => {\n      this.fetchSecretaire();\n    });\n  }\n\n  ngOnDestroy() {\n    // Assurez-vous de désabonner la souscription pour éviter les fuites de mémoire\n    this.subscription.unsubscribe();\n\n    window.removeEventListener('refreshPage', () => {});\n  }\n\n  async fetchSecretaire() {\n    try {\n      this.secretaires = await (getSecretaireByUid(this.firestore, this.uid));\n      if (this.secretaires && this.secretaires.length > 0) {\n        this.secretaires=this.secretaires ;\n       \n        console.log('Secrétaire de l\\'utilisateur :', this.secretaires);\n      } else {\n        console.error('Aucune donnée de secrétaire trouvée.');\n      }\n    } catch (error) {\n      console.error('Erreur lors de la récupération du secrétaire :', error);\n    }\n  }\n\n  async afficherFormulaireModal() {\n    const modal = await this.modalController.create({\n      component: this.formulaireComponent,\n    });\n\n    modal.onDidDismiss().then((data) => {\n      // Traitez les données du formulaire ici (data.data)\n      console.log('Données du formulaire modal soumis :', data.data);\n    });\n\n    return await modal.present();\n  }\n  async afficherFormModal(secretaireID: string) {\n    const modal = await this.modalController.create({\n      component: FormComponent,\n      componentProps: { secretaireID: secretaireID } ,\n    });\n\n    modal.onDidDismiss().then((data) => {\n      // Traitez les données du formulaire ici (data.data)\n      console.log('Données du formulaire modal soumis :', data.data);\n    });\n\n    return await modal.present();\n  }\n\n  async affichersuprresionModal(secretaireID: string) {\n    const modal = await this.modalController.create({\n      component: SupprimerAlertComponent,\n      componentProps: { secretaireID: secretaireID } ,\n    });\n\n    modal.onDidDismiss().then((data) => {\n      // Traitez les données du formulaire ici (data.data)\n      console.log('Données du formulaire modal soumis :', data.data);\n    });\n\n    return await modal.present();\n  }\n}\nexport let uida:string ;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}