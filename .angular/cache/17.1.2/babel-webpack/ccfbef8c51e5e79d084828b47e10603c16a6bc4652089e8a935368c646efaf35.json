{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _ParametreSecretairePage;\nimport { FormulaireComponent } from './formulaire/formulaire.component';\nimport { getSecretaireByUid } from 'src/firebaseConfig';\nimport { Subscription } from 'rxjs';\nimport { medecinUid } from 'src/firebaseConfig';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"src/app/event.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nconst _c0 = [\"myModal\"];\nfunction ParametreSecretairePage_ion_card_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-header\")(2, \"ion-card-title\");\n    i0.ɵɵtext(3, \"Informations du secr\\u00E9taire\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-card-content\")(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Nom: \", ctx_r0.secretaire.nom, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Pr\\u00E9nom: \", ctx_r0.secretaire.prenom, \"\");\n  }\n}\nexport class ParametreSecretairePage {\n  constructor(firestore, modalController, eventService) {\n    this.firestore = firestore;\n    this.modalController = modalController;\n    this.eventService = eventService;\n    this.formulaireComponent = FormulaireComponent;\n    this.subscription = new Subscription(); // Initialisation ajoutée\n    this.uid = medecinUid.uid;\n  }\n  ngOnInit() {\n    // Appeler fetchSecretaire lors du chargement initial\n    console.log('med uid    ', this.uid);\n    this.fetchSecretaire();\n    // Souscrire à l'événement de mise à jour du secrétaire\n    this.subscription = this.eventService.secretaireUpdated$.subscribe(() => {\n      this.fetchSecretaire();\n    });\n  }\n  ngOnDestroy() {\n    // Assurez-vous de désabonner la souscription pour éviter les fuites de mémoire\n    this.subscription.unsubscribe();\n  }\n  fetchSecretaire() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const secretaireData = yield getSecretaireByUid(_this.firestore, _this.uid);\n        if (secretaireData && secretaireData.length > 0) {\n          // Vérifiez si les données sont disponibles\n          _this.secretaire = secretaireData[0]; // Prenez le premier secrétaire trouvé\n          console.log('Secrétaire de l\\'utilisateur :', _this.secretaire);\n        } else {\n          console.error('Aucune donnée de secrétaire trouvée.');\n        }\n      } catch (error) {\n        console.error('Erreur lors de la récupération du secrétaire :', error);\n      }\n    })();\n  }\n  afficherFormulaireModal() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const modal = yield _this2.modalController.create({\n        component: _this2.formulaireComponent\n      });\n      modal.onDidDismiss().then(data => {\n        // Traitez les données du formulaire ici (data.data)\n        console.log('Données du formulaire modal soumis :', data.data);\n      });\n      return yield modal.present();\n    })();\n  }\n}\n_ParametreSecretairePage = ParametreSecretairePage;\n_ParametreSecretairePage.ɵfac = function ParametreSecretairePage_Factory(t) {\n  return new (t || _ParametreSecretairePage)(i0.ɵɵdirectiveInject(i1.AngularFirestore), i0.ɵɵdirectiveInject(i2.ModalController), i0.ɵɵdirectiveInject(i3.EventService));\n};\n_ParametreSecretairePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _ParametreSecretairePage,\n  selectors: [[\"app-parametre-secretaire\"]],\n  viewQuery: function ParametreSecretairePage_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.myModal = _t.first);\n    }\n  },\n  decls: 16,\n  vars: 3,\n  consts: [[3, \"translucent\"], [1, \"center\"], [\"slot\", \"start\", \"routerLink\", \"/parametre-med\"], [3, \"fullscreen\"], [\"collapse\", \"condense\"], [\"size\", \"large\"], [4, \"ngIf\"], [1, \"right\", 3, \"click\"]],\n  template: function ParametreSecretairePage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\", 1);\n      i0.ɵɵtext(3, \"parametre-secretaire\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"ion-button\", 2);\n      i0.ɵɵtext(5, \"Retour\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(6, \"ion-content\", 3)(7, \"ion-header\", 4)(8, \"ion-toolbar\")(9, \"ion-title\", 5);\n      i0.ɵɵtext(10, \"parametre-secretaire\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(11, ParametreSecretairePage_ion_card_11_Template, 9, 2, \"ion-card\", 6);\n      i0.ɵɵelement(12, \"br\")(13, \"br\");\n      i0.ɵɵelementStart(14, \"ion-button\", 7);\n      i0.ɵɵlistener(\"click\", function ParametreSecretairePage_Template_ion_button_click_14_listener() {\n        return ctx.afficherFormulaireModal();\n      });\n      i0.ɵɵtext(15, \"Ajouter secr\\u00E9taire\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"translucent\", true);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"fullscreen\", true);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.secretaire);\n    }\n  },\n  dependencies: [i4.NgIf, i2.IonButton, i2.IonCard, i2.IonCardContent, i2.IonCardHeader, i2.IonCardTitle, i2.IonContent, i2.IonHeader, i2.IonTitle, i2.IonToolbar, i2.RouterLinkDelegate, i5.RouterLink],\n  styles: [\".center[_ngcontent-%COMP%] {\\n  margin-left: 40%;\\n  margin-right: 40%;\\n  align-items: center;\\n}\\n\\n.right[_ngcontent-%COMP%] {\\n  float: right;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFyYW1ldHJlLXNlY3JldGFpcmUvcGFyYW1ldHJlLXNlY3JldGFpcmUucGFnZS5zY3NzIiwid2VicGFjazovLy4vLi4vLi4vLi4vTWFjQm9vayUyMEFpci9EZXNrdG9wL3NoaWZhaTFWVi9zcmMvYXBwL3BhcmFtZXRyZS1zZWNyZXRhaXJlL3BhcmFtZXRyZS1zZWNyZXRhaXJlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtBQ0NKOztBRENFO0VBQ0UsWUFBQTtBQ0VKIiwic291cmNlc0NvbnRlbnQiOlsiLmNlbnRlcntcclxuICAgIG1hcmdpbi1sZWZ0OiA0MCU7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDQwJTtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgfVxyXG4gIC5yaWdodCB7XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbiAgfSIsIi5jZW50ZXIge1xuICBtYXJnaW4tbGVmdDogNDAlO1xuICBtYXJnaW4tcmlnaHQ6IDQwJTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuLnJpZ2h0IHtcbiAgZmxvYXQ6IHJpZ2h0O1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["FormulaireComponent","getSecretaireByUid","Subscription","medecinUid","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","secretaire","nom","prenom","ParametreSecretairePage","constructor","firestore","modalController","eventService","formulaireComponent","subscription","uid","ngOnInit","console","log","fetchSecretaire","secretaireUpdated$","subscribe","ngOnDestroy","unsubscribe","_this","_asyncToGenerator","secretaireData","length","error","afficherFormulaireModal","_this2","modal","create","component","onDidDismiss","then","data","present","ɵɵdirectiveInject","i1","AngularFirestore","i2","ModalController","i3","EventService","selectors","viewQuery","ParametreSecretairePage_Query","rf","ctx","ɵɵtemplate","ParametreSecretairePage_ion_card_11_Template","ɵɵelement","ɵɵlistener","ParametreSecretairePage_Template_ion_button_click_14_listener","ɵɵproperty"],"sources":["C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\parametre-secretaire\\parametre-secretaire.page.ts","C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\parametre-secretaire\\parametre-secretaire.page.html"],"sourcesContent":["import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { FormulaireComponent } from './formulaire/formulaire.component';\nimport { getSecretaireByUid } from 'src/firebaseConfig';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { EventService } from 'src/app/event.service';\nimport { Subscription } from 'rxjs';\nimport { medecinUid } from 'src/firebaseConfig';\n\n\n@Component({\n  selector: 'app-parametre-secretaire',\n  templateUrl: './parametre-secretaire.page.html',\n  styleUrls: ['./parametre-secretaire.page.scss'],\n})\nexport class ParametreSecretairePage implements OnInit, OnDestroy {\n\n  @ViewChild('myModal') myModal: any;\n  formulaireComponent = FormulaireComponent;\n  secretaire: any;\n  private subscription: Subscription = new Subscription(); // Initialisation ajoutée\n  uid: string = medecinUid.uid;\n\n  constructor(\n    private firestore: AngularFirestore,\n    private modalController: ModalController,\n    private eventService: EventService\n  ) {}\n\n  ngOnInit() {\n    // Appeler fetchSecretaire lors du chargement initial\n    console.log('med uid    ',this.uid)\n    this.fetchSecretaire();\n\n    // Souscrire à l'événement de mise à jour du secrétaire\n    this.subscription = this.eventService.secretaireUpdated$.subscribe(() => {\n      this.fetchSecretaire();\n    });\n  }\n\n  ngOnDestroy() {\n    // Assurez-vous de désabonner la souscription pour éviter les fuites de mémoire\n    this.subscription.unsubscribe();\n  }\n\n  async fetchSecretaire() {\n    try {\n      const secretaireData = await (getSecretaireByUid(this.firestore, this.uid));\n\n      if (secretaireData && secretaireData.length > 0) {\n        // Vérifiez si les données sont disponibles\n        this.secretaire = secretaireData[0]; // Prenez le premier secrétaire trouvé\n        console.log('Secrétaire de l\\'utilisateur :', this.secretaire);\n      } else {\n        console.error('Aucune donnée de secrétaire trouvée.');\n      }\n    } catch (error) {\n      console.error('Erreur lors de la récupération du secrétaire :', error);\n    }\n  }\n\n  \n\n  async afficherFormulaireModal() {\n    const modal = await this.modalController.create({\n      component: this.formulaireComponent,\n    });\n\n    modal.onDidDismiss().then((data) => {\n      // Traitez les données du formulaire ici (data.data)\n      console.log('Données du formulaire modal soumis :', data.data);\n    });\n\n    return await modal.present();\n  }\n}\n","<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-title class=\"center\">parametre-secretaire</ion-title>\n    <ion-button slot=\"start\" routerLink=\"/parametre-med\">Retour</ion-button>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\">\n  <ion-header collapse=\"condense\">\n    <ion-toolbar>\n      <ion-title size=\"large\">parametre-secretaire</ion-title>\n    </ion-toolbar>\n  </ion-header>\n\n  <ion-card *ngIf=\"secretaire\">\n    <ion-card-header>\n      <ion-card-title>Informations du secrétaire</ion-card-title>\n    </ion-card-header>\n\n    <ion-card-content>\n      <p>Nom: {{ secretaire.nom }}</p>\n      <p>Prénom: {{ secretaire.prenom }}</p>\n      <!-- Ajoutez d'autres champs selon vos besoins -->\n    </ion-card-content>\n  </ion-card>\n\n  <br><br>\n  <ion-button class=\"right\" (click)=\"afficherFormulaireModal()\">Ajouter secrétaire</ion-button>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}