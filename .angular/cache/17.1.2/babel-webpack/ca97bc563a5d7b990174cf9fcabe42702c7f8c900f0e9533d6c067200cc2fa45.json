{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { getRdvByMedUid, medecinUid, medsec } from 'src/firebaseConfig';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/router\";\nfunction SallesecPage_ng_container_12_ion_row_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\", 1)(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-col\", 1)(5, \"ion-item\")(6, \"ion-label\");\n    i0.ɵɵtext(7, \"Pr\\u00E9sent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-checkbox\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function SallesecPage_ng_container_12_ion_row_1_Template_ion_checkbox_ngModelChange_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const rdv_r4 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(rdv_r4.present = $event);\n    })(\"ionChange\", function SallesecPage_ng_container_12_ion_row_1_Template_ion_checkbox_ionChange_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const rdv_r4 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.updatePresent(rdv_r4));\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const rdv_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"barre\", ctx_r3.present);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\"\", rdv_r4.nom, \" \", rdv_r4.prenom, \" \", rdv_r4.heure, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", rdv_r4.present);\n  }\n}\nfunction SallesecPage_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, SallesecPage_ng_container_12_ion_row_1_Template, 9, 6, \"ion-row\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.rdvs);\n  }\n}\nfunction SallesecPage_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\");\n    i0.ɵɵtext(2, \"Vous n'avez pas de rendez-vous aujourd'hui\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let SallesecPage = /*#__PURE__*/(() => {\n  var _SallesecPage;\n  class SallesecPage {\n    constructor(firestore, toastController) {\n      this.firestore = firestore;\n      this.toastController = toastController;\n      this.rdvs = [];\n      this.p = false;\n      this.present = false;\n      this.med = medsec;\n      this.uid = medecinUid.uid;\n    }\n    ngOnInit() {\n      console.log(this.uid);\n      console.log(this.med);\n      this.loadEvents();\n    }\n    loadEvents() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const rdvs = yield getRdvByMedUid(_this.firestore, _this.med);\n        if (rdvs && rdvs.length > 0) {\n          _this.p = true;\n          const today = new Date();\n          today.setHours(0, 0, 0, 0); // Set the time to 00:00:00 to compare only the date\n          _this.rdvs = rdvs.filter(rdv => new Date(rdv.date).setHours(0, 0, 0, 0) === today.setHours(0, 0, 0, 0)).map(rdv => {\n            rdv.present = false;\n            return rdv;\n          }).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n          console.log(_this.rdvs);\n        } else {\n          _this.p = false;\n          console.log(\"vous n'avez pas de rendezvous aujourd'hui\");\n          const toast = yield _this.toastController.create({\n            message: 'Vous n\\'avez pas de rendez-vous aujourd\\'hui. Veuillez retourner avec le bouton retour.',\n            duration: 1500,\n            position: 'top',\n            color: 'danger'\n          });\n          toast.present(); // Afficher le toast\n        }\n      })();\n    }\n    updatePresent(rdv) {\n      return _asyncToGenerator(function* () {\n        rdv.present = !rdv.present;\n      })();\n    }\n  }\n  _SallesecPage = SallesecPage;\n  _SallesecPage.ɵfac = function SallesecPage_Factory(t) {\n    return new (t || _SallesecPage)(i0.ɵɵdirectiveInject(i1.AngularFirestore), i0.ɵɵdirectiveInject(i2.ToastController));\n  };\n  _SallesecPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _SallesecPage,\n    selectors: [[\"app-sallesec\"]],\n    decls: 15,\n    vars: 2,\n    consts: [[\"routerLink\", \"/app-secretaire\", \"slot\", \"start\", \"fill\", \"clear\"], [\"size\", \"6\"], [4, \"ngIf\", \"ngIfElse\"], [\"noAppointments\", \"\"], [3, \"barre\", 4, \"ngFor\", \"ngForOf\"], [\"slot\", \"start\", 3, \"ngModel\", \"ngModelChange\", \"ionChange\"]],\n    template: function SallesecPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Salle d'attente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-button\", 0);\n        i0.ɵɵtext(5, \"retour\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"ion-content\")(7, \"ion-grid\")(8, \"ion-row\")(9, \"ion-col\", 1)(10, \"h2\");\n        i0.ɵɵtext(11, \"Rendrez-vous du jour\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(12, SallesecPage_ng_container_12_Template, 2, 1, \"ng-container\", 2)(13, SallesecPage_ng_template_13_Template, 3, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        const _r2 = i0.ɵɵreference(14);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngIf\", ctx.p)(\"ngIfElse\", _r2);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.NgControlStatus, i4.NgModel, i2.IonButton, i2.IonCheckbox, i2.IonCol, i2.IonContent, i2.IonGrid, i2.IonHeader, i2.IonItem, i2.IonLabel, i2.IonRow, i2.IonTitle, i2.IonToolbar, i2.BooleanValueAccessor, i2.RouterLinkDelegate, i5.RouterLink]\n  });\n  return SallesecPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}