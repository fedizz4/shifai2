{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _ModifComponent;\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./modif.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./modif.component.scss?ngResource\";\nimport { CommonModule } from '@angular/common';\nimport { Component, Input, NgModule } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule, ModalController, ToastController } from '@ionic/angular';\nimport { EventService } from 'src/app/event.service';\nimport { ModifierMedicament, supprimerMedicament } from 'src/firebaseConfig';\nlet ModifComponent = (_ModifComponent = class ModifComponent {\n  constructor(firestore, toastController, modalController, eventService) {\n    this.firestore = firestore;\n    this.toastController = toastController;\n    this.modalController = modalController;\n    this.eventService = eventService;\n    this.medicament = {\n      idd: '',\n      nom: '',\n      dosage: 0,\n      prises: []\n    };\n    this.nom = '';\n    this.dosage = 0;\n    this.prises = [{\n      label: 'Matin',\n      checked: false\n    }, {\n      label: 'Midi',\n      checked: false\n    }, {\n      label: 'Soir',\n      checked: false\n    }];\n  }\n  ngOnInit() {\n    if (this.med) {\n      this.medicament.idd = this.med.idd;\n      this.medicament.nom = this.med.nom;\n      this.medicament.dosage = this.med.dosage;\n      this.medicament.prises = this.med.prises.map(prise => ({\n        label: prise.label,\n        checked: prise.checked\n      }));\n    }\n  }\n  modifierMedicament() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        yield ModifierMedicament(_this.firestore, _this.medicament.idd, _this.medicament.nom, _this.medicament.dosage, _this.medicament.prises);\n        _this.eventService.triggerMedicamentUpdated();\n        yield _this.presentToast('Médicament modifié avec succès!');\n        _this.modalController.dismiss();\n      } catch (error) {\n        console.error('Erreur lors de la modification du médicament:', error);\n      }\n    })();\n  }\n  supprimerMedicament() {\n    supprimerMedicament(this.firestore, this.medicament.idd);\n  }\n  presentToast(message) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const toast = yield _this2.toastController.create({\n        message: message,\n        duration: 3000,\n        position: 'bottom'\n      });\n      toast.present();\n    })();\n  }\n  close() {\n    this.modalController.dismiss();\n  }\n}, _ModifComponent.ctorParameters = () => [{\n  type: AngularFirestore\n}, {\n  type: ToastController\n}, {\n  type: ModalController\n}, {\n  type: EventService\n}], _ModifComponent.propDecorators = {\n  med: [{\n    type: Input\n  }]\n}, _ModifComponent);\nModifComponent = __decorate([Component({\n  selector: 'app-modif',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], ModifComponent);\nexport { ModifComponent };\nlet ModifModule = class ModifModule {};\nModifModule = __decorate([NgModule({\n  declarations: [ModifComponent],\n  imports: [CommonModule, FormsModule, IonicModule],\n  exports: [ModifComponent],\n  providers: [AngularFirestore]\n})], ModifModule);\nexport { ModifModule };","map":{"version":3,"names":["CommonModule","Component","Input","NgModule","AngularFirestore","FormsModule","IonicModule","ModalController","ToastController","EventService","ModifierMedicament","supprimerMedicament","ModifComponent","_ModifComponent","constructor","firestore","toastController","modalController","eventService","medicament","idd","nom","dosage","prises","label","checked","ngOnInit","med","map","prise","modifierMedicament","_this","_asyncToGenerator","triggerMedicamentUpdated","presentToast","dismiss","error","console","message","_this2","toast","create","duration","position","present","close","__decorate","selector","template","__NG_CLI_RESOURCE__0","ModifModule","declarations","imports","exports","providers"],"sources":["C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\medicament\\modif\\modif.component.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { Component, Input, NgModule, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule, ModalController, ToastController } from '@ionic/angular';\nimport { EventService } from 'src/app/event.service';\nimport { getMedicamentsByid, ModifierMedicament, supprimerMedicament } from 'src/firebaseConfig';\n\ninterface MedicamentData {\n  idd:string;\n  nom: string;\n  dosage: number;\n  prises: {\n    label: string;\n    checked: boolean;\n  }[];\n}\n\n@Component({\n  selector: 'app-modif',\n  templateUrl: './modif.component.html',\n  styleUrls: ['./modif.component.scss'],\n})\nexport class ModifComponent implements OnInit {\n  @Input() med!: MedicamentData;\n  medicament: MedicamentData = { idd: '', nom: '', dosage: 0, prises: [] };\n  nom = '';\n  dosage = 0;\n  prises: { label: string; checked: boolean }[] = [\n    { label: 'Matin', checked: false },\n    { label: 'Midi', checked: false },\n    { label: 'Soir', checked: false },\n  ];\n\n  constructor(\n    private firestore: AngularFirestore,\n    private toastController: ToastController,\n    private modalController: ModalController,\n    private eventService: EventService\n  ) {}\n\n  ngOnInit() {\n    if (this.med) {\n      this.medicament.idd = this.med.idd;\n      this.medicament.nom = this.med.nom;\n      this.medicament.dosage = this.med.dosage;\n      this.medicament.prises = this.med.prises.map((prise) => ({ label: prise.label, checked: prise.checked }));\n    }\n  }\n\n  async modifierMedicament() {\n    try {\n      await ModifierMedicament(this.firestore, this.medicament.idd, this.medicament.nom, this.medicament.dosage, this.medicament.prises);\n      this.eventService.triggerMedicamentUpdated();\n      await this.presentToast('Médicament modifié avec succès!');\n      this.modalController.dismiss();\n    } catch (error) {\n      console.error('Erreur lors de la modification du médicament:', error);\n    }\n  }\n\n  supprimerMedicament() {\n    supprimerMedicament(this.firestore, this.medicament.idd);\n  }\n\n  async presentToast(message: string) {\n    const toast = await this.toastController.create({\n      message: message,\n      duration: 3000,\n      position: 'bottom',\n    });\n    toast.present();\n  }\n\n  close() {\n    this.modalController.dismiss();\n  }\n}\n\n@NgModule({\n  declarations: [ModifComponent],\n  imports: [CommonModule, FormsModule, IonicModule],\n  exports: [ModifComponent],\n  providers: [AngularFirestore],\n})\nexport class ModifModule {}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}