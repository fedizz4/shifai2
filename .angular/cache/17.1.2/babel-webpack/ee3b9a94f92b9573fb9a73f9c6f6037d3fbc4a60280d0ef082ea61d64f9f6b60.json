{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _HeureComponent, _HeureModule;\nimport { CommonModule } from '@angular/common';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { RendezvousmodalComponent } from '../rendezvousmodal/rendezvousmodal.component';\nimport { medecinUid } from 'src/app/recherche-medecin/recherche-medecin.page';\nimport { selectedDate } from '../work-hours-modal/work-hours-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/fire/compat/firestore\";\nimport * as i3 from \"@angular/common\";\nfunction HeureComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function HeureComponent_div_10_Template_ion_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const hour_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleSelection(hour_r1));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const hour_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r0.isHourTaken(hour_r1));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(hour_r1);\n  }\n}\nexport class HeureComponent {\n  constructor(modalController, firestore) {\n    this.modalController = modalController;\n    this.firestore = firestore;\n    this.selectedHour = '';\n    this.takenHours = []; // Ajoutez cette ligne\n    this.workHours = ['8H00 - 8H30', '8H30 - 9H00', '9H00 - 9H30', '9H30 - 10H00', '10H00 - 10H30', '10H30 - 11H00', '11H00 - 11H30', '11H30 - 12H00', '14H00 - 14H30', '14H30 - 15H00', '15H00 - 15H30', '15H30 - 16H00', '16H00 - 16H30', '16H30 - 17H00'];\n  }\n  ngOnInit() {\n    console.log('selecdate', selectedDate);\n    this.getTakenHoursByDate(medecinUid, selectedDate); // Mise à jour de l'appel de fonction\n  }\n  isHourTaken(hour) {\n    return this.takenHours.includes(hour); // Utilisez includes pour vérifier si l'heure est déjà prise\n  }\n  toggleSelection(Hour) {\n    this.selectedHour = Hour;\n    console.log('Date sélectionnée :', selectedDate);\n    console.log('med   ', medecinUid);\n  }\n  openrdvModal() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const modal = yield _this.modalController.create({\n        component: RendezvousmodalComponent,\n        cssClass: 'work-hours-modal'\n      });\n      _this.close();\n      return yield modal.present();\n    })();\n  }\n  getTakenHoursByDate(uid, date) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const query = _this2.firestore.collection('medecin').doc(uid).collection('rdv', ref => ref.where('date', '==', date));\n      const snapshot = yield query.ref.get(); // Utilisez get() au lieu de ref.get()\n      _this2.takenHours = snapshot.docs.map(doc => doc.data()['heure']); // Mise à jour de la propriété takenHours\n      console.log('takenhours', _this2.takenHours);\n    })();\n  }\n  close() {\n    this.modalController.dismiss();\n  }\n}\n_HeureComponent = HeureComponent;\n_HeureComponent.ɵfac = function HeureComponent_Factory(t) {\n  return new (t || _HeureComponent)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.AngularFirestore));\n};\n_HeureComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _HeureComponent,\n  selectors: [[\"app-heure\"]],\n  decls: 11,\n  vars: 1,\n  consts: [[\"slot\", \"end\"], [3, \"click\"], [\"slot\", \"start\"], [4, \"ngFor\", \"ngForOf\"], [3, \"disabled\", \"click\"]],\n  template: function HeureComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n      i0.ɵɵtext(3, \"Personne\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"ion-buttons\", 0)(5, \"ion-button\", 1);\n      i0.ɵɵlistener(\"click\", function HeureComponent_Template_ion_button_click_5_listener() {\n        return ctx.openrdvModal();\n      });\n      i0.ɵɵtext(6, \"Suivant\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"ion-buttons\", 2)(8, \"ion-button\", 1);\n      i0.ɵɵlistener(\"click\", function HeureComponent_Template_ion_button_click_8_listener() {\n        return ctx.close();\n      });\n      i0.ɵɵtext(9, \"Fermer\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtemplate(10, HeureComponent_div_10_Template, 3, 2, \"div\", 3);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.workHours);\n    }\n  },\n  dependencies: [i3.NgForOf, i1.IonButton, i1.IonButtons, i1.IonHeader, i1.IonTitle, i1.IonToolbar],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport class HeureModule {}\n_HeureModule = HeureModule;\n_HeureModule.ɵfac = function HeureModule_Factory(t) {\n  return new (t || _HeureModule)();\n};\n_HeureModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({\n  type: _HeureModule\n});\n_HeureModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({\n  providers: [AngularFirestore],\n  imports: [CommonModule, FormsModule, IonicModule]\n});\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(HeureModule, {\n    declarations: [HeureComponent],\n    imports: [CommonModule, FormsModule, IonicModule]\n  });\n})();\nexport let selectedHour;","map":{"version":3,"names":["CommonModule","AngularFirestore","FormsModule","IonicModule","RendezvousmodalComponent","medecinUid","selectedDate","i0","ɵɵelementStart","ɵɵlistener","HeureComponent_div_10_Template_ion_button_click_1_listener","restoredCtx","ɵɵrestoreView","_r3","hour_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","toggleSelection","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r0","isHourTaken","ɵɵtextInterpolate","HeureComponent","constructor","modalController","firestore","selectedHour","takenHours","workHours","ngOnInit","console","log","getTakenHoursByDate","hour","includes","Hour","openrdvModal","_this","_asyncToGenerator","modal","create","component","cssClass","close","present","uid","date","_this2","query","collection","doc","ref","where","snapshot","get","docs","map","data","dismiss","ɵɵdirectiveInject","i1","ModalController","i2","selectors","decls","vars","consts","template","HeureComponent_Template","rf","ctx","HeureComponent_Template_ion_button_click_5_listener","HeureComponent_Template_ion_button_click_8_listener","ɵɵtemplate","HeureComponent_div_10_Template","HeureModule","imports","declarations"],"sources":["C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\affiche-medecin\\heure\\heure.component.ts","C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\affiche-medecin\\heure\\heure.component.html"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { Component, NgModule, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule, ModalController } from '@ionic/angular';\nimport { RendezvousmodalComponent } from '../rendezvousmodal/rendezvousmodal.component';\nimport { medecinUid } from 'src/app/recherche-medecin/recherche-medecin.page';\nimport { selectedDate } from '../work-hours-modal/work-hours-modal.component';\n\n@Component({\n  selector: 'app-heure',\n  templateUrl: './heure.component.html',\n  styleUrls: ['./heure.component.scss'],\n})\nexport class HeureComponent implements OnInit {\n  selectedHour: string = '';\n  takenHours: string[] = []; // Ajoutez cette ligne\n\n  workHours: string[] = [\n    '8H00 - 8H30',\n    '8H30 - 9H00',\n    '9H00 - 9H30',\n    '9H30 - 10H00',\n    '10H00 - 10H30',\n    '10H30 - 11H00',\n    '11H00 - 11H30',\n    '11H30 - 12H00',\n    '14H00 - 14H30',\n    '14H30 - 15H00',\n    '15H00 - 15H30',\n    '15H30 - 16H00',\n    '16H00 - 16H30',\n    '16H30 - 17H00',\n  ];\n  constructor(private modalController: ModalController, private firestore: AngularFirestore) {}\n\n  ngOnInit() {\n    console.log('selecdate', selectedDate);\n    this.getTakenHoursByDate(medecinUid, selectedDate); // Mise à jour de l'appel de fonction\n  }\n\n  isHourTaken(hour: string): boolean {\n    return this.takenHours.includes(hour); // Utilisez includes pour vérifier si l'heure est déjà prise\n  }\n  \n  toggleSelection(Hour: string) {\n    this.selectedHour = Hour;\n    console.log('Date sélectionnée :', selectedDate);\n    console.log('med   ', medecinUid);\n  }\n\n  async openrdvModal() {\n    const modal = await this.modalController.create({\n      component: RendezvousmodalComponent,\n      cssClass: 'work-hours-modal',\n    });\n    this.close();\n    return await modal.present();\n  }\n\n  async getTakenHoursByDate(uid: string, date: string) {\n    const query = this.firestore.collection('medecin').doc(uid).collection('rdv', ref => ref.where('date', '==', date));\n    const snapshot = await query.ref.get(); // Utilisez get() au lieu de ref.get()\n\n    this.takenHours = snapshot.docs.map(doc => doc.data()['heure']); // Mise à jour de la propriété takenHours\n\n    console.log('takenhours', this.takenHours);\n  }\n\n  close() {\n    this.modalController.dismiss();\n  }\n}\n\n@NgModule({\n  declarations: [HeureComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule\n  ],\n  providers: [AngularFirestore],\n})\nexport class HeureModule {}\n\nexport let selectedHour:string ;","<ion-header>\n  <ion-toolbar>\n    <ion-title>Personne</ion-title>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"openrdvModal()\">Suivant</ion-button>\n    </ion-buttons>\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"close()\">Fermer</ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<div *ngFor=\"let hour of workHours\">\n  <ion-button [disabled]=\"isHourTaken(hour)\" (click)=\"toggleSelection(hour)\">{{ hour }}</ion-button>\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}