{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _DocumentPage;\nimport { finalize } from 'rxjs/operators';\nimport { getConsultations, getDocuments, getPatientByUid, medecinUid, savePatient } from 'src/firebaseConfig';\nimport { patientUidA } from '../patient/patient.page';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/storage\";\nimport * as i2 from \"@angular/fire/compat/firestore\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction DocumentPage_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-input\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function DocumentPage_div_25_Template_ion_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.description = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"ion-button\", 12);\n    i0.ɵɵlistener(\"click\", function DocumentPage_div_25_Template_ion_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.envoyer());\n    });\n    i0.ɵɵelement(3, \"ion-icon\", 13);\n    i0.ɵɵtext(4, \" \\u00A0\\u00A0Envoyer \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"img\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r0.selectedFile, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DocumentPage_ion_item_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\");\n    i0.ɵɵelement(1, \"img\", 15);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 16);\n    i0.ɵɵtext(5, \" Voir d\\u00E9tail..\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const document_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", document_r5.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(document_r5.description);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"href\", document_r5.url, i0.ɵɵsanitizeUrl);\n  }\n}\nexport class DocumentPage {\n  constructor(storage, firestore, toastController, modalController, cdr, router) {\n    this.storage = storage;\n    this.firestore = firestore;\n    this.toastController = toastController;\n    this.modalController = modalController;\n    this.cdr = cdr;\n    this.router = router;\n    this.Vfiche = true;\n    this.Vconsultation = false;\n    this.Vdocument = false;\n    this.uid = '';\n    this.nom = '';\n    this.prenom = '';\n    this.age = 0;\n    this.adresse = '';\n    this.telephone = '';\n    this.sexe = '';\n    this.groupeSanguin = '';\n    this.situationFamiliale = '';\n    this.profession = '';\n    this.email = '';\n    this.telephone2 = '';\n    this.numeroAssurance = '';\n    this.note = '';\n    this.antecedentsMedicaux = '';\n    this.antecedentsChirurgicaux = '';\n    this.antecedentsFamiliaux = '';\n    this.autresAntecedents = '';\n    this.medicaments = '';\n    this.description = '';\n    this.selectedFile = null;\n    this.selectedFileUrl = null;\n    this.documents = [];\n    this.consultationDate = ''; // Variable pour stocker la date de consultation\n    this.consultationdate1 = '';\n    this.searchDescription = '';\n    this.rendezVousData = {};\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const doc = yield getDocuments(_this.firestore, medecinUid.uid, patientUidA);\n      console.log(doc);\n      console.log(patientUidA);\n      _this.getdocument();\n      try {\n        _this.patient = yield getPatientByUid(_this.firestore, medecinUid.uid, patientUidA);\n        if (_this.patient) {\n          _this.nom = _this.patient.nom;\n          _this.prenom = _this.patient.prenom;\n          _this.sexe = _this.patient.sexe;\n          _this.groupeSanguin = _this.patient.groupeSanguin;\n          _this.age = _this.patient.age;\n          _this.adresse = _this.patient.adresse;\n          _this.telephone = _this.patient.telephone;\n          _this.situationFamiliale = _this.patient.situationFamiliale;\n          _this.profession = _this.patient.profession;\n          _this.email = _this.patient.email;\n          _this.telephone2 = _this.patient.telephone2;\n          _this.numeroAssurance = _this.patient.numeroAssurance;\n          _this.note = _this.patient.note;\n          _this.antecedentsMedicaux = _this.patient.antecedentsMedicaux;\n          _this.antecedentsChirurgicaux = _this.patient.antecedentsChirurgicaux;\n          _this.antecedentsFamiliaux = _this.patient.antecedentsFamiliaux;\n          _this.autresAntecedents = _this.patient.autresAntecedents;\n          _this.medicaments = _this.patient.medicaments;\n          console.log('patient', _this.patient);\n          const uuid = _this.patient.useruid;\n        }\n        yield _this.loadConsultations();\n        console.log('rdv', _this.rdv);\n      } catch (error) {\n        console.error('Erreur lors de l\\'initialisation de la page :', error);\n      }\n    })();\n  }\n  back() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.router.navigate(['/patient']);\n      console.log('going to patient');\n    })();\n  }\n  loadConsultations() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const consultations = yield getConsultations(_this3.firestore, medecinUid.uid, patientUidA);\n        console.log('consultations', consultations);\n        if (consultations && consultations.length > 0) {\n          _this3.consultations = consultations.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n        } else {\n          console.log('Aucune consultation trouvée pour ce patient.');\n        }\n      } catch (error) {\n        console.error('Erreur lors du chargement des consultations du patient :', error);\n      }\n    })();\n  }\n  saveFichePatient() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        console.log('Données de la fiche patient à sauvegarder :', _this4.adresse, _this4.age, _this4.antecedentsChirurgicaux, _this4.antecedentsFamiliaux, _this4.antecedentsMedicaux, _this4.autresAntecedents, _this4.email, _this4.medicaments, _this4.groupeSanguin, _this4.nom, _this4.note, _this4.numeroAssurance, _this4.prenom, _this4.profession, _this4.sexe, _this4.situationFamiliale, _this4.telephone, _this4.telephone2, _this4.uid);\n        yield savePatient(_this4.firestore, _this4.adresse, _this4.age, _this4.antecedentsChirurgicaux, _this4.antecedentsFamiliaux, _this4.antecedentsMedicaux, _this4.autresAntecedents, _this4.email, _this4.medicaments, _this4.groupeSanguin, _this4.nom, _this4.note, _this4.numeroAssurance, _this4.prenom, _this4.profession, _this4.sexe, _this4.situationFamiliale, _this4.telephone, _this4.telephone2, patientUidA, medecinUid.uid);\n      } catch (error) {\n        console.error('Erreur lors de l\\'ajout du patient chez le médecin :', error);\n      }\n    })();\n  }\n  fiche() {\n    this.Vconsultation = false;\n    this.Vdocument = false;\n    this.Vfiche = true;\n  }\n  consultation() {\n    this.Vconsultation = true;\n    this.Vdocument = false;\n    this.Vfiche = false;\n  }\n  document() {\n    this.Vconsultation = false;\n    this.Vdocument = true;\n    this.Vfiche = false;\n  }\n  onFileSelected(event) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      const file = event.target.files[0];\n      _this5.selectedFile = file;\n      if (file instanceof File) {\n        try {\n          // Générer un ID unique pour le fichier\n          const fileId = Math.random().toString(36).substring(2);\n          const filePath = `documents/${fileId}_${file.name}`;\n          // Uploader le fichier dans Firebase Storage\n          const fileRef = _this5.storage.ref(filePath);\n          const uploadTask = _this5.storage.upload(filePath, file);\n          // Récupérer l'URL permanente du fichier une fois qu'il est téléchargé\n          uploadTask.snapshotChanges().pipe(finalize( /*#__PURE__*/_asyncToGenerator(function* () {\n            const fileUrl = yield fileRef.getDownloadURL().toPromise();\n            // Maintenant, vous pouvez utiliser fileUrl comme lien permanent pour le fichier\n            console.log('Lien permanent du fichier :', fileUrl);\n            // Enregistrer la description dans une variable\n            const description = _this5.description;\n            // Vérifier si la description est fournie\n            if (description) {\n              // Ajouter le document avec le lien permanent dans Firestore\n              const docRef = _this5.firestore.collection('medecin').doc(medecinUid.uid).collection('documents').doc();\n              yield docRef.set({\n                medecinUid: medecinUid.uid,\n                patientUid: patientUidA,\n                url: fileUrl,\n                description: description\n              });\n              _this5.getdocument();\n              console.log('Document ajouté avec succès.');\n            } else {\n              console.error('La description est obligatoire pour télécharger le fichier.');\n            }\n          }))).subscribe();\n        } catch (error) {\n          console.error('Erreur lors de l\\'ajout du document :', error);\n        }\n      }\n    })();\n  }\n  envoyer() {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this6.selectedFile) {\n        console.error('Aucun fichier sélectionné.');\n        return;\n      }\n      // Vérifier si la description est vide\n      if (!_this6.description) {\n        const toast = yield _this6.toastController.create({\n          message: 'La description est obligatoire.',\n          duration: 1500,\n          // Durée du toast en millisecondes\n          position: 'top',\n          // Position du toast (peut être 'top', 'bottom', 'middle')\n          color: 'danger' // Couleur du toast\n        });\n        yield toast.present();\n        return;\n      }\n      // Générer un ID unique pour le fichier\n      const fileId = _this6.firestore.createId();\n      // Chemin de stockage dans Firebase Storage\n      const filePath = `documents/${fileId}`;\n      try {\n        var _this6$patient, _this6$patient2;\n        // Télécharger le fichier vers Firebase Storage\n        const fileRef = _this6.storage.ref(filePath);\n        const uploadTask = _this6.storage.upload(filePath, _this6.selectedFile);\n        // Attendre la fin du téléchargement\n        yield uploadTask.then();\n        // Récupérer l'URL du fichier téléchargé\n        const fileUrl = yield fileRef.getDownloadURL().toPromise();\n        // Enregistrer les métadonnées dans Firestore\n        yield _this6.firestore.collection('documents').doc(fileId).set({\n          useruid: (_this6$patient = _this6.patient) === null || _this6$patient === void 0 ? void 0 : _this6$patient.useruid,\n          url: fileUrl,\n          description: _this6.description\n          // Ajoutez d'autres champs si nécessaire\n        });\n        const documents = yield getDocuments(_this6.firestore, medecinUid.uid, patientUidA);\n        if (documents && documents.length > 0) {\n          _this6.documents = documents;\n        }\n        console.log('Fichier téléchargé et enregistré avec succès.');\n        const docu = {\n          url: fileUrl,\n          description: _this6.description,\n          med: medecinUid.uid\n        };\n        const medref = yield _this6.firestore.collection('inscrits').doc((_this6$patient2 = _this6.patient) === null || _this6$patient2 === void 0 ? void 0 : _this6$patient2.useruid).collection('document').add(docu);\n      } catch (error) {\n        console.error('Erreur lors de l\\'envoi du fichier :', error);\n      }\n    })();\n  }\n  getdocument() {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      const documents = yield getDocuments(_this7.firestore, medecinUid.uid, patientUidA);\n      if (documents && documents.length > 0) {\n        _this7.documents = documents;\n      }\n    })();\n  }\n  closeModal() {\n    this.modalController.dismiss();\n  }\n  editConsultation(consultationdate) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      consultationdate1 = consultationdate;\n      _this8.router.navigate(['/consultation-modif']);\n    })();\n  }\n  searchConsultations() {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (!_this9.consultationDate) {\n          console.log('Veuillez sélectionner une date de consultation.');\n          return;\n        }\n        // Filtrer les consultations pour la date spécifiée\n        _this9.consultations = _this9.consultations.filter(consultation => consultation.date === _this9.consultationDate);\n        if (_this9.consultations.length === 0) {\n          console.log('Aucune consultation trouvée pour la date spécifiée.');\n        } else {\n          console.log('Consultations trouvées pour la date', _this9.consultationDate, ':', _this9.consultations);\n        }\n      } catch (error) {\n        console.error('Erreur lors de la recherche des consultations pour la date :', error);\n      }\n    })();\n  }\n  searchDocumentsByDescription(description) {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (!description) {\n          console.log('Veuillez entrer une description.');\n          return;\n        }\n        // Filtrer les documents pour la description spécifiée\n        const filteredDocuments = _this10.documents.filter(document => document.description === description);\n        if (filteredDocuments.length > 0) {\n          console.log('Documents trouvés avec la description', description, ':', filteredDocuments);\n          _this10.documents = filteredDocuments;\n        } else {\n          console.log('Aucun document trouvé avec la description', description);\n        }\n      } catch (error) {\n        console.error('Erreur lors de la recherche des documents pour la description :', error);\n      }\n    })();\n  }\n}\n_DocumentPage = DocumentPage;\n_DocumentPage.ɵfac = function DocumentPage_Factory(t) {\n  return new (t || _DocumentPage)(i0.ɵɵdirectiveInject(i1.AngularFireStorage), i0.ɵɵdirectiveInject(i2.AngularFirestore), i0.ɵɵdirectiveInject(i3.ToastController), i0.ɵɵdirectiveInject(i3.ModalController), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.Router));\n};\n_DocumentPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _DocumentPage,\n  selectors: [[\"app-document\"]],\n  decls: 35,\n  vars: 5,\n  consts: [[3, \"translucent\"], [\"slot\", \"start\"], [\"routerLink\", \"/tabs/tab1\", \"fill\", \"clear\"], [3, \"fullscreen\"], [\"placeholder\", \"Rechercher\"], [1, \"upload-document\"], [\"type\", \"file\", \"id\", \"fileInput\", \"name\", \"fileInput\", \"accept\", \"*/*\", 3, \"change\"], [4, \"ngIf\"], [\"type\", \"text\", \"placeholder\", \"entrer une description a rechercher\", \"color\", \"primary\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"placeholder\", \"Enter document description\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"ion-text-end\", 3, \"click\"], [\"name\", \"send-outline\"], [\"alt\", \"Selected Image\", 3, \"src\"], [\"width\", \"60\", \"height\", \"60\", 3, \"src\"], [\"float\", \"right\", \"target\", \"_blank\", 3, \"href\"]],\n  template: function DocumentPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-buttons\", 1)(3, \"ion-button\", 2);\n      i0.ɵɵtext(4, \"Retour\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"ion-title\");\n      i0.ɵɵtext(6, \"Documents\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"ion-content\", 3)(8, \"ion-card\")(9, \"ion-card-content\")(10, \"ion-card-header\");\n      i0.ɵɵelement(11, \"br\")(12, \"ion-searchbar\", 4)(13, \"br\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"ion-card\", 5)(15, \"ion-card-content\");\n      i0.ɵɵelement(16, \"br\")(17, \"br\")(18, \"br\")(19, \"br\")(20, \"br\")(21, \"br\")(22, \"br\")(23, \"br\");\n      i0.ɵɵelementStart(24, \"input\", 6);\n      i0.ɵɵlistener(\"change\", function DocumentPage_Template_input_change_24_listener($event) {\n        return ctx.onFileSelected($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(25, DocumentPage_div_25_Template, 6, 2, \"div\", 7);\n      i0.ɵɵelementStart(26, \"ion-card\")(27, \"div\")(28, \"ion-list\")(29, \"ion-input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function DocumentPage_Template_ion_input_ngModelChange_29_listener($event) {\n        return ctx.searchDescription = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"ion-button\", 9);\n      i0.ɵɵlistener(\"click\", function DocumentPage_Template_ion_button_click_30_listener() {\n        return ctx.searchDocumentsByDescription(ctx.searchDescription);\n      });\n      i0.ɵɵtext(31, \"Rechercher\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(32, DocumentPage_ion_item_32_Template, 6, 3, \"ion-item\", 10);\n      i0.ɵɵelement(33, \"br\")(34, \"br\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"translucent\", true);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"fullscreen\", true);\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"ngIf\", ctx.selectedFile);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchDescription);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.documents);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.NgControlStatus, i6.RequiredValidator, i6.NgModel, i3.IonButton, i3.IonButtons, i3.IonCard, i3.IonCardContent, i3.IonCardHeader, i3.IonContent, i3.IonHeader, i3.IonIcon, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonList, i3.IonSearchbar, i3.IonTitle, i3.IonToolbar, i3.TextValueAccessor, i3.RouterLinkDelegate, i4.RouterLink],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport let consultationdate1;","map":{"version":3,"names":["finalize","getConsultations","getDocuments","getPatientByUid","medecinUid","savePatient","patientUidA","i0","ɵɵelementStart","ɵɵlistener","DocumentPage_div_25_Template_ion_input_ngModelChange_1_listener","$event","ɵɵrestoreView","_r3","ctx_r2","ɵɵnextContext","ɵɵresetView","description","ɵɵelementEnd","DocumentPage_div_25_Template_ion_button_click_2_listener","ctx_r4","envoyer","ɵɵelement","ɵɵtext","ɵɵadvance","ɵɵproperty","ctx_r0","selectedFile","ɵɵsanitizeUrl","document_r5","url","ɵɵtextInterpolate","DocumentPage","constructor","storage","firestore","toastController","modalController","cdr","router","Vfiche","Vconsultation","Vdocument","uid","nom","prenom","age","adresse","telephone","sexe","groupeSanguin","situationFamiliale","profession","email","telephone2","numeroAssurance","note","antecedentsMedicaux","antecedentsChirurgicaux","antecedentsFamiliaux","autresAntecedents","medicaments","selectedFileUrl","documents","consultationDate","consultationdate1","searchDescription","rendezVousData","ngOnInit","_this","_asyncToGenerator","doc","console","log","getdocument","patient","uuid","useruid","loadConsultations","rdv","error","back","_this2","navigate","_this3","consultations","length","sort","a","b","Date","date","getTime","saveFichePatient","_this4","fiche","consultation","document","onFileSelected","event","_this5","file","target","files","File","fileId","Math","random","toString","substring","filePath","name","fileRef","ref","uploadTask","upload","snapshotChanges","pipe","fileUrl","getDownloadURL","toPromise","docRef","collection","set","patientUid","subscribe","_this6","toast","create","message","duration","position","color","present","createId","_this6$patient","_this6$patient2","then","docu","med","medref","add","_this7","closeModal","dismiss","editConsultation","consultationdate","_this8","searchConsultations","_this9","filter","searchDocumentsByDescription","_this10","filteredDocuments","ɵɵdirectiveInject","i1","AngularFireStorage","i2","AngularFirestore","i3","ToastController","ModalController","ChangeDetectorRef","i4","Router","selectors","decls","vars","consts","template","DocumentPage_Template","rf","ctx","DocumentPage_Template_input_change_24_listener","ɵɵtemplate","DocumentPage_div_25_Template","DocumentPage_Template_ion_input_ngModelChange_29_listener","DocumentPage_Template_ion_button_click_30_listener","DocumentPage_ion_item_32_Template"],"sources":["C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\document\\document.page.ts","C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\document\\document.page.html"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { AngularFireStorage } from '@angular/fire/compat/storage';\nimport { LoadingController, ModalController, ToastController } from '@ionic/angular';\nimport { finalize } from 'rxjs/operators';\nimport { inscritUid } from '../login/login.page';\nimport { getConsultations, getDocuments, getDocumentsforpatient, getInscritByUid, getPatientByUid, medecinUid, savePatient } from 'src/firebaseConfig';\nimport { patientUidA } from '../patient/patient.page';\nimport { Router } from '@angular/router';\n\ninterface DocumentData {\n  url: string;\n  description: string;\n  useruid: string;\n}\n\ninterface PatientData {\n  uid: string;\n  nom: string;\n  prenom: string;\n  age: number;\n  sexe: string;\n  groupeSanguin: string;\n  situationFamiliale: string;\n  profession: string;\n  email: string;\n  telephone: string;\n  telephone2: string;\n  numeroAssurance: string;\n  adresse: string;\n  note: string;\n  antecedentsMedicaux: string;\n  antecedentsChirurgicaux: string;\n  antecedentsFamiliaux: string;\n  autresAntecedents: string;\n  medicaments: string;\n  useruid: string;\n}\ninterface RendezVousData {\n  date: string;\n  heure: string;\n  nom: string;\n  prenom: string;\n  useruid: string;\n  medecinNom?: string; // Ajout de la propriété medecinNom comme optionnelle\n  medecinPrenom?: string; \n  medecinuid:string;// Ajout de la propriété medecinPrenom comme optionnelle\n  key:string ;\n  excuse?:string;\n  statut?:string;\n}\ninterface consultationData {\n  date: string;\n  details?: string;\n  uid?: string;\n}\ninterface PatientData{\n  uid:string;\n  nom: string;\n  prenom: string;\n  age: number;\n  sexe: string;\n  groupeSanguin: string;\n  situationFamiliale: string;\n  profession: string;\n  email: string;\n  telephone: string;\n  telephone2: string;\n  numeroAssurance: string;\n  adresse: string;\n  note: string;\n  antecedentsMedicaux: string;\n  antecedentsChirurgicaux: string;\n  antecedentsFamiliaux: string;\n  autresAntecedents: string;\n  medicaments: string;\n  useruid:string;\n}\n\n@Component({\n  selector: 'app-document',\n  templateUrl: './document.page.html',\n  styleUrls: ['./document.page.scss'],\n})\nexport class DocumentPage implements OnInit {\n  rendezVousData!: RendezVousData;\n  Vfiche: boolean = true;\n  Vconsultation: boolean = false;\n  Vdocument: boolean = false;\n \n    uid:string='';\n    nom:string='';\n    prenom:string='';\n    age:number=0;\n    adresse:string='';\n    telephone:string='';\n    sexe:string='';\n    groupeSanguin:string='';\n    situationFamiliale:string='';\n    profession:string='';\n    email:string='';\n    telephone2:string='';\n    numeroAssurance:string='';\n    note:string='';\n    antecedentsMedicaux:string='';\n    antecedentsChirurgicaux:string='';\n    antecedentsFamiliaux:string='';\n    autresAntecedents:string='';\n    medicaments:string='';\n    description:string='';\n\n\n  rdv: RendezVousData[] | null | undefined;\n  patient: PatientData | null | undefined;\n  consultations!: consultationData[];\n  selectedFile: File | null = null;\n  selectedFileUrl: string | null = null;\n  documents:DocumentData[]=[];\n  consultationDate: string = ''; // Variable pour stocker la date de consultation\n  consultationdate1:string='';\n  searchDescription:string='';\n\n\n  constructor(private storage : AngularFireStorage ,private firestore: AngularFirestore,private toastController :ToastController, private modalController: ModalController, private cdr: ChangeDetectorRef, private router: Router) {\n    this.rendezVousData = {} as RendezVousData;\n  }\n\n  async ngOnInit() {\n    const doc=await getDocuments(this.firestore,medecinUid.uid,patientUidA)\n    console.log(doc)\n    console.log(patientUidA)\n    this.getdocument()\n  \n    try {\n      this.patient = await getPatientByUid(this.firestore, medecinUid.uid, patientUidA);\n      if(this.patient){\n      this.nom=this.patient.nom;\n      this.prenom=this.patient.prenom;\n      this.sexe=this.patient.sexe;\n      this.groupeSanguin=this.patient.groupeSanguin;\n      this.age=this.patient.age;\n      this.adresse=this.patient.adresse;\n      this.telephone=this.patient.telephone;\n      this.situationFamiliale=this.patient.situationFamiliale;\n      this.profession=this.patient.profession;\n      this.email=this.patient.email;\n      this.telephone2=this.patient.telephone2;\n      this.numeroAssurance=this.patient.numeroAssurance;\n      this.note=this.patient.note;\n      this.antecedentsMedicaux=this.patient.antecedentsMedicaux;\n      this.antecedentsChirurgicaux=this.patient.antecedentsChirurgicaux;\n      this.antecedentsFamiliaux=this.patient.antecedentsFamiliaux;\n      this.autresAntecedents=this.patient.autresAntecedents;\n      this.medicaments=this.patient.medicaments;\n\n      \n      console.log('patient', this.patient);\n      \n     const uuid=this.patient.useruid;\n    }\n      await this.loadConsultations();\n      console.log('rdv', this.rdv);\n    } catch (error) {\n      console.error('Erreur lors de l\\'initialisation de la page :', error);\n    }\n  }\n  async back(){\n    \n    this.router.navigate(['/patient']);\n    console.log('going to patient')\n  }\n  async loadConsultations() {\n    try {\n      const consultations = await getConsultations(this.firestore, medecinUid.uid, patientUidA);\n      console.log('consultations', consultations);\n  \n      if (consultations && consultations.length > 0) {\n        this.consultations = consultations.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n      } else {\n        console.log('Aucune consultation trouvée pour ce patient.');\n      }\n    } catch (error) {\n      console.error('Erreur lors du chargement des consultations du patient :', error);\n    }\n  }\n  \n\n  async saveFichePatient() {\n    try {\n        console.log('Données de la fiche patient à sauvegarder :', this.adresse,this.age,this.antecedentsChirurgicaux,this.antecedentsFamiliaux,this.antecedentsMedicaux,this.autresAntecedents,this.email,this.medicaments,this.groupeSanguin,this.nom,this.note,this.numeroAssurance,this.prenom,this.profession,this.sexe,this.situationFamiliale,this.telephone,this.telephone2,this.uid);\n        await savePatient(this.firestore, this.adresse,this.age,this.antecedentsChirurgicaux,this.antecedentsFamiliaux,this.antecedentsMedicaux,this.autresAntecedents,this.email,this.medicaments,this.groupeSanguin,this.nom,this.note,this.numeroAssurance,this.prenom,this.profession,this.sexe,this.situationFamiliale,this.telephone,this.telephone2,patientUidA, medecinUid.uid);\n      \n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout du patient chez le médecin :', error);\n    }\n  }\n\n  fiche() {\n    this.Vconsultation = false;\n    this.Vdocument = false;\n    this.Vfiche = true;\n  }\n\n  consultation() {\n    this.Vconsultation = true;\n    this.Vdocument = false;\n    this.Vfiche = false;\n  }\n\n  document() {\n    this.Vconsultation = false;\n    this.Vdocument = true;\n    this.Vfiche = false;\n  }\n\n \n \n\n  async onFileSelected(event: any) {\n    const file: File | null = event.target.files[0];\n    this.selectedFile = file;\n  \n    if (file instanceof File) {\n      try {\n        // Générer un ID unique pour le fichier\n        const fileId = Math.random().toString(36).substring(2);\n        const filePath = `documents/${fileId}_${file.name}`;\n  \n        // Uploader le fichier dans Firebase Storage\n        const fileRef = this.storage.ref(filePath);\n        const uploadTask = this.storage.upload(filePath, file);\n  \n        // Récupérer l'URL permanente du fichier une fois qu'il est téléchargé\n        uploadTask.snapshotChanges().pipe(\n          finalize(async () => {\n            const fileUrl = await fileRef.getDownloadURL().toPromise();\n  \n            // Maintenant, vous pouvez utiliser fileUrl comme lien permanent pour le fichier\n            console.log('Lien permanent du fichier :', fileUrl);\n  \n            // Enregistrer la description dans une variable\n            const description = this.description;\n  \n            // Vérifier si la description est fournie\n            if (description) {\n              // Ajouter le document avec le lien permanent dans Firestore\n              const docRef = this.firestore.collection('medecin').doc(medecinUid.uid).collection('documents').doc();\n              await docRef.set({\n                medecinUid: medecinUid.uid,\n                patientUid: patientUidA,\n                url: fileUrl,\n                description: description\n              });\n              this.getdocument();\n              console.log('Document ajouté avec succès.');\n            } else {\n              console.error('La description est obligatoire pour télécharger le fichier.');\n            }\n          })\n        ).subscribe();\n  \n      } catch (error) {\n        console.error('Erreur lors de l\\'ajout du document :', error);\n      }\n    }\n  }\n  \n  async envoyer() {\n    if (!this.selectedFile) {\n      console.error('Aucun fichier sélectionné.');\n      return;\n    }\n  \n    // Vérifier si la description est vide\n    if (!this.description) {\n      \n      const toast = await this.toastController.create({\n        message: 'La description est obligatoire.',\n        duration: 1500, // Durée du toast en millisecondes\n        position: 'top', // Position du toast (peut être 'top', 'bottom', 'middle')\n        color: 'danger', // Couleur du toast\n      });\n      await toast.present();\n      return;\n    }\n  \n    // Générer un ID unique pour le fichier\n    const fileId = this.firestore.createId();\n  \n    // Chemin de stockage dans Firebase Storage\n    const filePath = `documents/${fileId}`;\n  \n    try {\n      // Télécharger le fichier vers Firebase Storage\n      const fileRef = this.storage.ref(filePath);\n      const uploadTask = this.storage.upload(filePath, this.selectedFile);\n  \n      // Attendre la fin du téléchargement\n      await uploadTask.then();\n  \n      // Récupérer l'URL du fichier téléchargé\n      const fileUrl = await fileRef.getDownloadURL().toPromise();\n  \n      // Enregistrer les métadonnées dans Firestore\n      await this.firestore.collection('documents').doc(fileId).set({\n        useruid:this.patient?.useruid,\n        url: fileUrl,\n        description: this.description,\n        // Ajoutez d'autres champs si nécessaire\n      });\n      const documents = await getDocuments(this.firestore, medecinUid.uid, patientUidA);\n      if (documents && documents.length > 0) {\n        this.documents = documents;}\n      console.log('Fichier téléchargé et enregistré avec succès.');\n\n        const docu = {\n          url: fileUrl,\n          description: this.description,\n          med:medecinUid.uid,\n        }\n        const medref =await this.firestore.collection('inscrits').doc(this.patient?.useruid).collection('document').add(docu);\n      \n\n\n\n\n    } catch (error) {\n      console.error('Erreur lors de l\\'envoi du fichier :', error);\n    }\n    }\n  \n\n  async getdocument(){\n    const documents=await  getDocuments(this.firestore,medecinUid.uid,patientUidA);\n    if (documents && documents.length > 0) {\n      this.documents=documents;\n\n  }\n  }\n  \n  closeModal() {\n    this.modalController.dismiss();\n  }\n  async editConsultation(consultationdate: consultationData) {\n    consultationdate1=consultationdate;\n    this.router.navigate(['/consultation-modif']);\n  }\n\n\n\n\n\n  async searchConsultations() {\n    try {\n      if (!this.consultationDate) {\n        console.log('Veuillez sélectionner une date de consultation.');\n        return;\n      }\n  \n      // Filtrer les consultations pour la date spécifiée\n      this.consultations = this.consultations.filter(consultation => consultation.date === this.consultationDate);\n  \n      if (this.consultations.length === 0) {\n        console.log('Aucune consultation trouvée pour la date spécifiée.');\n      } else {\n        console.log('Consultations trouvées pour la date', this.consultationDate, ':', this.consultations);\n      }\n    } catch (error) {\n      console.error('Erreur lors de la recherche des consultations pour la date :', error);\n    }\n  }\n  async searchDocumentsByDescription(description: string) {\n    try {\n      if (!description) {\n        console.log('Veuillez entrer une description.');\n        return;\n      }\n  \n      // Filtrer les documents pour la description spécifiée\n      const filteredDocuments = this.documents.filter(document => document.description === description);\n  \n      if (filteredDocuments.length > 0) {\n        console.log('Documents trouvés avec la description', description, ':', filteredDocuments);\n        this.documents = filteredDocuments;\n      } else {\n        console.log('Aucun document trouvé avec la description', description);\n      }\n    } catch (error) {\n      console.error('Erreur lors de la recherche des documents pour la description :', error);\n    }\n  }\n}\nexport let consultationdate1:consultationData;\n","<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button routerLink=\"/tabs/tab1\" fill=\"clear\">Retour</ion-button>\n    </ion-buttons>\n    <ion-title>Documents</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\">\n  <ion-card>\n    <ion-card-content>\n      <ion-card-header>\n        <br>\n        <ion-searchbar placeholder=\"Rechercher\" ></ion-searchbar>\n        <br>\n      </ion-card-header>\n          <ion-card class=\"upload-document\">\n            <ion-card-content>\n              \n\n              <br><br> \n              <br><br> <br><br> <br><br> \n                <input type=\"file\" id=\"fileInput\" name=\"fileInput\" accept=\"*/*\" (change)=\"onFileSelected($event)\">\n\n          </ion-card-content>\n          </ion-card>\n\n          <div *ngIf=\"selectedFile\">\n            <ion-input type=\"text\" [(ngModel)]=\"description\" placeholder=\"Enter document description\" required></ion-input>\n            <ion-button class=\"ion-text-end\" (click)=\"envoyer()\">\n              <ion-icon name=\"send-outline\"></ion-icon>\n              &nbsp;&nbsp;Envoyer\n            </ion-button>\n            \n            <img [src]=\"selectedFile\" alt=\"Selected Image\">\n          </div>\n         <ion-card>\n          <div>\n            <ion-list>\n              <ion-input type=\"text\" [(ngModel)]=\"searchDescription\"placeholder=\"entrer une description a rechercher\" color=\"primary\" ></ion-input>\n<ion-button (click)=\"searchDocumentsByDescription(searchDescription)\">Rechercher</ion-button>\n              <ion-item *ngFor=\"let document of documents\">\n                <img [src]=\"document.url\" width=\"60\" height=\"60\">\n                <ion-label>{{ document.description }}</ion-label>\n                <a float=\"right\" [href]=\"document.url\"  target=\"_blank\" > Voir détail..</a>\n              </ion-item>\n              <br><br>\n            </ion-list>\n          </div>\n         </ion-card>\n        </ion-card-content>\n  </ion-card>\n\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}