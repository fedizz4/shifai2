{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormulaireComponent } from './formulaire/formulaire.component';\nimport { getSecretaireByUid } from 'src/firebaseConfig';\nimport { medecinUid } from 'src/firebaseConfig';\nimport { Subscription } from 'rxjs';\nimport { firstValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"src/app/event.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nconst _c0 = [\"myModal\"];\nfunction ParametreSecretairePage_ion_card_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-header\")(2, \"ion-card-title\");\n    i0.ɵɵtext(3, \"Informations du secr\\u00E9taire\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-card-content\")(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Nom: \", ctx_r0.secretaire.nom, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Pr\\u00E9nom: \", ctx_r0.secretaire.prenom, \"\");\n  }\n}\nexport let ParametreSecretairePage = /*#__PURE__*/(() => {\n  var _ParametreSecretairePage;\n  class ParametreSecretairePage {\n    constructor(firestore, modalController, eventService) {\n      this.firestore = firestore;\n      this.modalController = modalController;\n      this.eventService = eventService;\n      this.formulaireComponent = FormulaireComponent;\n      this.uid = medecinUid;\n      this.subscription = new Subscription(); // Initialisation ajoutée\n    }\n    ngOnInit() {\n      // Appeler fetchSecretaire lors du chargement initial\n      this.fetchSecretaire();\n      // Souscrire à l'événement de mise à jour du secrétaire\n      this.subscription = this.eventService.secretaireUpdated$.subscribe(() => {\n        this.fetchSecretaire();\n      });\n    }\n    ngOnDestroy() {\n      // Assurez-vous de désabonner la souscription pour éviter les fuites de mémoire\n      this.subscription.unsubscribe();\n    }\n    fetchSecretaire() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const secretaireData = yield firstValueFrom(getSecretaireByUid(_this.firestore, 'b2xIfQRkJABI4OL9JehI'));\n          if (secretaireData) {\n            // Vérifiez si les données sont disponibles\n            _this.secretaire = secretaireData;\n            console.log('Secrétaire de l\\'utilisateur :', _this.secretaire);\n          } else {\n            console.error('Aucune donnée de secrétaire trouvée.');\n          }\n        } catch (error) {\n          console.error('Erreur lors de la récupération du secrétaire :', error);\n        }\n      })();\n    }\n    afficherFormulaireModal() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const modal = yield _this2.modalController.create({\n          component: _this2.formulaireComponent\n        });\n        modal.onDidDismiss().then(data => {\n          // Traitez les données du formulaire ici (data.data)\n          console.log('Données du formulaire modal soumis :', data.data);\n        });\n        return yield modal.present();\n      })();\n    }\n  }\n  _ParametreSecretairePage = ParametreSecretairePage;\n  _ParametreSecretairePage.ɵfac = function ParametreSecretairePage_Factory(t) {\n    return new (t || _ParametreSecretairePage)(i0.ɵɵdirectiveInject(i1.AngularFirestore), i0.ɵɵdirectiveInject(i2.ModalController), i0.ɵɵdirectiveInject(i3.EventService));\n  };\n  _ParametreSecretairePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _ParametreSecretairePage,\n    selectors: [[\"app-parametre-secretaire\"]],\n    viewQuery: function ParametreSecretairePage_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.myModal = _t.first);\n      }\n    },\n    decls: 16,\n    vars: 3,\n    consts: [[3, \"translucent\"], [1, \"center\"], [\"slot\", \"start\", \"routerLink\", \"/parametre-med\"], [3, \"fullscreen\"], [\"collapse\", \"condense\"], [\"size\", \"large\"], [4, \"ngIf\"], [1, \"right\", 3, \"click\"]],\n    template: function ParametreSecretairePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\", 1);\n        i0.ɵɵtext(3, \"parametre-secretaire\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-button\", 2);\n        i0.ɵɵtext(5, \"Retour\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"ion-content\", 3)(7, \"ion-header\", 4)(8, \"ion-toolbar\")(9, \"ion-title\", 5);\n        i0.ɵɵtext(10, \"parametre-secretaire\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(11, ParametreSecretairePage_ion_card_11_Template, 9, 2, \"ion-card\", 6);\n        i0.ɵɵelement(12, \"br\")(13, \"br\");\n        i0.ɵɵelementStart(14, \"ion-button\", 7);\n        i0.ɵɵlistener(\"click\", function ParametreSecretairePage_Template_ion_button_click_14_listener() {\n          return ctx.afficherFormulaireModal();\n        });\n        i0.ɵɵtext(15, \"Ajouter secr\\u00E9taire\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"translucent\", true);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.secretaire);\n      }\n    },\n    dependencies: [i4.NgIf, i2.IonButton, i2.IonCard, i2.IonCardContent, i2.IonCardHeader, i2.IonCardTitle, i2.IonContent, i2.IonHeader, i2.IonTitle, i2.IonToolbar, i2.RouterLinkDelegate, i5.RouterLink],\n    styles: [\".center[_ngcontent-%COMP%]{margin-left:40%;margin-right:40%;align-items:center}.right[_ngcontent-%COMP%]{float:right}\"]\n  });\n  return ParametreSecretairePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}