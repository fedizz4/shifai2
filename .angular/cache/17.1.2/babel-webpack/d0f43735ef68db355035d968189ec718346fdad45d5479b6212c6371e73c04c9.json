{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { IonicModule } from '@ionic/angular';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { selectedHour, selectedDate } from '../work-hours-modal/work-hours-modal.component';\nimport { selectedNom, selectedPrenom } from '../personne-modal/personne-modal.component';\nimport { medecinUid } from 'src/app/recherche-medecin/recherche-medecin.page';\nimport { inscritUid } from 'src/app/login/login.page';\nimport { AddRendezVous, AddRendezVousForUser, getMedecinByUid, generateUniqueKey } from 'src/firebaseConfig';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/fire/compat/firestore\";\nexport let RendezvousmodalComponent = /*#__PURE__*/(() => {\n  var _RendezvousmodalComponent;\n  class RendezvousmodalComponent {\n    constructor(modalController, firestore) {\n      this.modalController = modalController;\n      this.firestore = firestore;\n      this.medecin = {\n        nom: '',\n        prenom: '',\n        uid: ''\n      };\n      this.selectedTime = selectedHour;\n      this.dates = selectedDate;\n      this.patientName = selectedPrenom;\n      this.patientnom = selectedNom;\n      this.uid = inscritUid;\n      this.nommed = this.medecin.nom;\n      this.medecinuid = medecinUid; // Assignation du nom du médecin\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        console.log(\"prenom = \", selectedNom);\n        console.log(\"time = \", selectedHour);\n        console.log(\"medecinuid =\", medecinUid);\n        console.log(\"useruid =\", inscritUid);\n        console.log(\"date selectionne =\", selectedDate);\n        try {\n          const medecinData = yield getMedecinByUid(_this.firestore, medecinUid);\n          if (medecinData && medecinData.length > 0) {\n            // Vérifiez si des données de médecin ont été récupérées et si elles ne sont pas null\n            _this.medecin = medecinData[0];\n            _this.nommed = _this.medecin.nom;\n          }\n        } catch (error) {\n          console.error('Erreur lors de la récupération des informations du médecin:', error);\n        }\n      })();\n    }\n    saveRendezVous() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const rendezVousData = {\n          date: selectedDate,\n          heure: selectedHour,\n          nom: selectedNom,\n          prenom: selectedPrenom,\n          useruid: inscritUid,\n          medecinNom: _this2.medecin.nom,\n          medecinPrenom: _this2.medecin.prenom,\n          medecinuid: medecinUid,\n          key: yield generateUniqueKey() // Générer une clé unique pour le rendez-vous\n        };\n        const k = rendezVousData.key;\n        AddRendezVous(_this2.firestore, medecinUid, rendezVousData).then(() => {\n          console.log('Rendez-vous enregistré avec succès.');\n          console.log('key= ', k);\n          _this2.closeModal();\n        }).catch(error => {\n          console.error('Erreur lors de l\\'enregistrement du rendez-vous :', error);\n        });\n        AddRendezVousForUser(_this2.firestore, inscritUid, rendezVousData).then(() => {\n          console.log('Rendez-vous enregistré avec succès chez le patient.');\n          _this2.closeModal();\n        }).catch(error => {\n          console.error('Erreur lors de l\\'enregistrement du rendez-vous chez le patient:', error);\n        });\n      })();\n    }\n    closeModal() {\n      this.modalController.dismiss();\n    }\n  }\n  _RendezvousmodalComponent = RendezvousmodalComponent;\n  _RendezvousmodalComponent.ɵfac = function RendezvousmodalComponent_Factory(t) {\n    return new (t || _RendezvousmodalComponent)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.AngularFirestore));\n  };\n  _RendezvousmodalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _RendezvousmodalComponent,\n    selectors: [[\"app-rendezvousmodal\"]],\n    inputs: {\n      medecin: \"medecin\"\n    },\n    decls: 20,\n    vars: 4,\n    consts: [[\"slot\", \"end\"], [3, \"click\"], [\"name\", \"close\"], [1, \"modal-buttons\"], [\"expand\", \"block\", \"color\", \"primary\", 3, \"click\"]],\n    template: function RendezvousmodalComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Ajouter un rendez-vous\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-buttons\", 0)(5, \"ion-button\", 1);\n        i0.ɵɵlistener(\"click\", function RendezvousmodalComponent_Template_ion_button_click_5_listener() {\n          return ctx.closeModal();\n        });\n        i0.ɵɵelement(6, \"ion-icon\", 2);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(7, \"ion-content\")(8, \"ion-content\")(9, \"p\");\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"p\");\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"p\");\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\");\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\", 3)(18, \"ion-button\", 4);\n        i0.ɵɵlistener(\"click\", function RendezvousmodalComponent_Template_ion_button_click_18_listener() {\n          return ctx.saveRendezVous();\n        });\n        i0.ɵɵtext(19, \"Enregistrer\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵtextInterpolate1(\"Heure s\\u00E9lectionn\\u00E9e : \", ctx.selectedTime, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"prenom du patient : \", ctx.patientName, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"nom du patient : \", ctx.patientnom, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"date de rdv : \", ctx.dates, \"\");\n      }\n    },\n    dependencies: [i1.IonButton, i1.IonButtons, i1.IonContent, i1.IonHeader, i1.IonIcon, i1.IonTitle, i1.IonToolbar]\n  });\n  return RendezvousmodalComponent;\n})();\nexport let RendezvousmodalModule = /*#__PURE__*/(() => {\n  var _RendezvousmodalModule;\n  class RendezvousmodalModule {}\n  _RendezvousmodalModule = RendezvousmodalModule;\n  _RendezvousmodalModule.ɵfac = function RendezvousmodalModule_Factory(t) {\n    return new (t || _RendezvousmodalModule)();\n  };\n  _RendezvousmodalModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({\n    type: _RendezvousmodalModule\n  });\n  _RendezvousmodalModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({\n    providers: [AngularFirestore],\n    imports: [CommonModule, FormsModule, IonicModule]\n  });\n  return RendezvousmodalModule;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}