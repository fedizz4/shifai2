{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _SallesecPage;\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./sallesec.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./sallesec.page.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { ToastController } from '@ionic/angular';\nimport { getRdvByMedUid, medecinUid, medsec } from 'src/firebaseConfig';\nlet SallesecPage = (_SallesecPage = class SallesecPage {\n  constructor(firestore, toastController) {\n    this.firestore = firestore;\n    this.toastController = toastController;\n    this.rdvs = [];\n    this.p = false;\n    this.present = false;\n    this.med = medsec;\n    this.uid = medecinUid.uid;\n  }\n  ngOnInit() {\n    console.log(this.uid);\n    console.log(this.med);\n    this.loadEvents();\n  }\n  loadEvents() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const rdvs = yield getRdvByMedUid(_this.firestore, _this.med);\n      if (rdvs && rdvs.length > 0) {\n        _this.p = true;\n        const today = new Date();\n        today.setHours(0, 0, 0, 0); // Set the time to 00:00:00 to compare only the date\n        _this.rdvs = rdvs.filter(rdv => new Date(rdv.date).setHours(0, 0, 0, 0) === today.setHours(0, 0, 0, 0)).map(rdv => {\n          rdv.present = false;\n          return rdv;\n        }).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n        console.log(_this.rdvs);\n      } else {\n        _this.p = false;\n        console.log(\"vous n'avez pas de rendezvous aujourd'hui\");\n        const toast = yield _this.toastController.create({\n          message: 'Vous n\\'avez pas de rendez-vous aujourd\\'hui. Veuillez retourner avec le bouton retour.',\n          duration: 1500,\n          position: 'top',\n          color: 'danger'\n        });\n        toast.present(); // Afficher le toast\n      }\n    })();\n  }\n  updatePresent(rdv) {\n    return _asyncToGenerator(function* () {\n      rdv.present = !rdv.present;\n    })();\n  }\n}, _SallesecPage.ctorParameters = () => [{\n  type: AngularFirestore\n}, {\n  type: ToastController\n}], _SallesecPage);\nSallesecPage = __decorate([Component({\n  selector: 'app-sallesec',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], SallesecPage);\nexport { SallesecPage };","map":{"version":3,"names":["Component","AngularFirestore","ToastController","getRdvByMedUid","medecinUid","medsec","SallesecPage","_SallesecPage","constructor","firestore","toastController","rdvs","p","present","med","uid","ngOnInit","console","log","loadEvents","_this","_asyncToGenerator","length","today","Date","setHours","filter","rdv","date","map","sort","a","b","getTime","toast","create","message","duration","position","color","updatePresent","__decorate","selector","template","__NG_CLI_RESOURCE__0"],"sources":["C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\sallesec\\sallesec.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { ToastController } from '@ionic/angular';\nimport { getRdvByMedUid, medecinUid, medsec } from 'src/firebaseConfig';\n\n@Component({\n  selector: 'app-sallesec',\n  templateUrl: './sallesec.page.html',\n  styleUrls: ['./sallesec.page.scss'],\n})\nexport class SallesecPage implements OnInit {\n  rdvs: any[] = [];\n  p: boolean = false;\n  present: boolean = false;\n  med=medsec;\nuid=medecinUid.uid;\n  constructor(\n    private firestore: AngularFirestore,\n    private toastController: ToastController\n  ) {}\n  ngOnInit() {\n    console.log(this.uid)\n    console.log(this.med)\n    this.loadEvents();\n  }\n\n  async loadEvents() {\n    const rdvs = await getRdvByMedUid(this.firestore, this.med);\n    if (rdvs && rdvs.length > 0) {\n      this.p = true;\n      const today = new Date();\n      today.setHours(0, 0, 0, 0); // Set the time to 00:00:00 to compare only the date\n      this.rdvs = rdvs\n        .filter(rdv => new Date(rdv.date).setHours(0, 0, 0, 0) === today.setHours(0, 0, 0, 0))\n        .map(rdv => {\n          rdv.present = false;\n          return rdv;\n        })\n        .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n      console.log(this.rdvs);\n    } else {\n      this.p = false;\n      console.log(\"vous n'avez pas de rendezvous aujourd'hui\");\n      const toast = await this.toastController.create({\n        message: 'Vous n\\'avez pas de rendez-vous aujourd\\'hui. Veuillez retourner avec le bouton retour.',\n        duration: 1500,\n        position: 'top',\n        color: 'danger',\n      });\n      toast.present(); // Afficher le toast\n    }\n  }\n  async updatePresent(rdv: any) {\n    rdv.present = !rdv.present;\n  }\n}\n"],"mappings":";;;;;AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAASC,gBAAgB,QAAQ,gCAAgC;AACjE,SAASC,eAAe,QAAQ,gBAAgB;AAChD,SAASC,cAAc,EAAEC,UAAU,EAAEC,MAAM,QAAQ,oBAAoB;AAOhE,IAAMC,YAAY,IAAAC,aAAA,GAAlB,MAAMD,YAAY;EAMvBE,YACUC,SAA2B,EAC3BC,eAAgC;IADhC,KAAAD,SAAS,GAATA,SAAS;IACT,KAAAC,eAAe,GAAfA,eAAe;IAPzB,KAAAC,IAAI,GAAU,EAAE;IAChB,KAAAC,CAAC,GAAY,KAAK;IAClB,KAAAC,OAAO,GAAY,KAAK;IACxB,KAAAC,GAAG,GAACT,MAAM;IACZ,KAAAU,GAAG,GAACX,UAAU,CAACW,GAAG;EAIb;EACHC,QAAQA,CAAA;IACNC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACH,GAAG,CAAC;IACrBE,OAAO,CAACC,GAAG,CAAC,IAAI,CAACJ,GAAG,CAAC;IACrB,IAAI,CAACK,UAAU,EAAE;EACnB;EAEMA,UAAUA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACd,MAAMV,IAAI,SAASR,cAAc,CAACiB,KAAI,CAACX,SAAS,EAAEW,KAAI,CAACN,GAAG,CAAC;MAC3D,IAAIH,IAAI,IAAIA,IAAI,CAACW,MAAM,GAAG,CAAC,EAAE;QAC3BF,KAAI,CAACR,CAAC,GAAG,IAAI;QACb,MAAMW,KAAK,GAAG,IAAIC,IAAI,EAAE;QACxBD,KAAK,CAACE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5BL,KAAI,CAACT,IAAI,GAAGA,IAAI,CACbe,MAAM,CAACC,GAAG,IAAI,IAAIH,IAAI,CAACG,GAAG,CAACC,IAAI,CAAC,CAACH,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,KAAKF,KAAK,CAACE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CACrFI,GAAG,CAACF,GAAG,IAAG;UACTA,GAAG,CAACd,OAAO,GAAG,KAAK;UACnB,OAAOc,GAAG;QACZ,CAAC,CAAC,CACDG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIR,IAAI,CAACQ,CAAC,CAACJ,IAAI,CAAC,CAACK,OAAO,EAAE,GAAG,IAAIT,IAAI,CAACO,CAAC,CAACH,IAAI,CAAC,CAACK,OAAO,EAAE,CAAC;QAC1EhB,OAAO,CAACC,GAAG,CAACE,KAAI,CAACT,IAAI,CAAC;MACxB,CAAC,MAAM;QACLS,KAAI,CAACR,CAAC,GAAG,KAAK;QACdK,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;QACxD,MAAMgB,KAAK,SAASd,KAAI,CAACV,eAAe,CAACyB,MAAM,CAAC;UAC9CC,OAAO,EAAE,yFAAyF;UAClGC,QAAQ,EAAE,IAAI;UACdC,QAAQ,EAAE,KAAK;UACfC,KAAK,EAAE;SACR,CAAC;QACFL,KAAK,CAACrB,OAAO,EAAE,CAAC,CAAC;MACnB;IAAC;EACH;EACM2B,aAAaA,CAACb,GAAQ;IAAA,OAAAN,iBAAA;MAC1BM,GAAG,CAACd,OAAO,GAAG,CAACc,GAAG,CAACd,OAAO;IAAC;EAC7B;;;;;;AA5CWP,YAAY,GAAAmC,UAAA,EALxBzC,SAAS,CAAC;EACT0C,QAAQ,EAAE,cAAc;EACxBC,QAAA,EAAAC,oBAAmC;;CAEpC,CAAC,C,EACWtC,YAAY,CA6CxB"},"metadata":{},"sourceType":"module","externalDependencies":[]}