{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { isSameDay, isSameMonth } from 'date-fns';\nimport { deleteRendezVous, getRdvByPatientUid } from 'src/firebaseConfig';\nimport { inscritUid } from '../login/login.page';\nimport { ExcuseModalComponent, selectedExcuse } from './excusemodal/excusemodal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"angular-calendar\";\nfunction Tab2Page_ion_item_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-button\", 23);\n    i0.ɵɵlistener(\"click\", function Tab2Page_ion_item_39_Template_ion_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const rendezVousItem_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteRendezVouscalendar(rendezVousItem_r1));\n    });\n    i0.ɵɵtext(4, \"Supprimer\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const rendezVousItem_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate4(\"\", rendezVousItem_r1.date, \" - \", rendezVousItem_r1.heure, \" - \", rendezVousItem_r1.nom, \" \", rendezVousItem_r1.prenom, \" \");\n  }\n}\nexport let Tab2Page = /*#__PURE__*/(() => {\n  var _Tab2Page;\n  class Tab2Page {\n    constructor(firestore, modalController) {\n      this.firestore = firestore;\n      this.modalController = modalController;\n      this.viewDate = new Date();\n      this.events = [];\n      this.activeDayIsOpen = false;\n      this.uid = inscritUid;\n      this.rdvs = [];\n      this.loadEvents();\n    }\n    loadEvents() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const rdvs = yield getRdvByPatientUid(_this.firestore, _this.uid);\n          if (rdvs && rdvs.length > 0) {\n            _this.events = rdvs.map(rdv => ({\n              start: new Date(rdv.date),\n              // Supposons que rdv.date contient la date du rendez-vous\n              title: `\n          Rendez-vous de ${rdv.prenom} ${rdv.nom} à ${rdv.heure} chez ${rdv.medecinPrenom} ${rdv.medecinNom}\n          ${rdv.statut ? `<b><u><u><mark>${rdv.statut}</mark></u></u></b>` : ''} \n          ${rdv.excuse ? `<b><u><u><mark>${rdv.excuse}</mark></u></u></b>` : ''} \n        `\n            }));\n            _this.rdvs = rdvs;\n          }\n        } catch (error) {\n          console.error('Erreur lors du chargement des rendez-vous:', error);\n        }\n      })();\n    }\n    dayClicked({\n      date,\n      events\n    }) {\n      if (isSameMonth(date, this.viewDate)) {\n        if (isSameDay(this.viewDate, date) && this.activeDayIsOpen === true || events.length === 0) {\n          this.activeDayIsOpen = false;\n        } else {\n          this.activeDayIsOpen = true;\n          this.viewDate = date;\n        }\n      }\n    }\n    deleteRendezVouscalendar(rendezVous) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          // Demander une excuse via la modal\n          const excuse = yield _this2.presentExcuseModal();\n          // Vérifier si une excuse a été fournie\n          if (selectedExcuse !== undefined) {\n            // Appeler deleteRendezVous avec l'excuse\n            yield deleteRendezVous(_this2.firestore, inscritUid, rendezVous, selectedExcuse);\n            console.log('Rendez-vous supprimé avec succès.');\n            yield _this2.loadEvents();\n          } else {\n            console.log('Excuse non fournie. Annulation de la suppression du rendez-vous.');\n          }\n        } catch (error) {\n          console.error('Erreur lors de la suppression du rendez-vous:', error);\n        }\n      })();\n    }\n    presentExcuseModal() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const modal = yield _this3.modalController.create({\n          component: ExcuseModalComponent\n        });\n        yield modal.present();\n        return new Promise(resolve => {\n          modal.onDidDismiss().then(result => {\n            const data = result === null || result === void 0 ? void 0 : result.data;\n            resolve(data === null || data === void 0 ? void 0 : data.excuse);\n          });\n        });\n      })();\n    }\n  }\n  _Tab2Page = Tab2Page;\n  _Tab2Page.ɵfac = function Tab2Page_Factory(t) {\n    return new (t || _Tab2Page)(i0.ɵɵdirectiveInject(i1.AngularFirestore), i0.ɵɵdirectiveInject(i2.ModalController));\n  };\n  _Tab2Page.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _Tab2Page,\n    selectors: [[\"app-tab2\"]],\n    decls: 53,\n    vars: 6,\n    consts: [[3, \"translucent\"], [\"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css\", \"rel\", \"stylesheet\"], [\"href\", \"https://unpkg.com/@fortawesome/fontawesome-free@6.2.1/css/all.css\", \"rel\", \"stylesheet\"], [\"href\", \"https://unpkg.com/angular-calendar@0.31.0/css/angular-calendar.css\", \"rel\", \"stylesheet\"], [\"href\", \"https://unpkg.com/flatpickr@4.6.13/dist/flatpickr.css\", \"rel\", \"stylesheet\"], [1, \"left\"], [\"large\", \"\", \"routerLink\", \"/profil\", 1, \"right\"], [\"name\", \"person-circle-outline\"], [1, \"content\", 3, \"fullscreen\"], [\"color\", \"primary\", 1, \"header-rd\"], [1, \"center\"], [\"color\", \"primary\"], [\"color\", \"light\", \"routerLink\", \"/recherche-medecin\", 1, \"center1\"], [\"name\", \"search-circle-outline\", 2, \"color\", \"rgb(110, 110, 248)\"], [2, \"color\", \"rgb(110, 110, 248)\"], [1, \"calendar\"], [3, \"viewDate\", \"events\", \"activeDayIsOpen\", \"dayClicked\"], [4, \"ngFor\", \"ngForOf\"], [\"collapse\", \"fade\"], [\"slot\", \"bottom\"], [\"name\", \"home-outline\", \"routerLink\", \"/tab1\"], [\"name\", \"calendar-outline\", \"routerLink\", \"/tabs/tab2\"], [\"name\", \"pin-outline\", \"routerLink\", \"/tabs/tab3\"], [\"color\", \"danger\", 3, \"click\"]],\n    template: function Tab2Page_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0);\n        i0.ɵɵelement(1, \"link\", 1)(2, \"link\", 2)(3, \"link\", 3)(4, \"link\", 4);\n        i0.ɵɵelementStart(5, \"ion-toolbar\")(6, \"ion-item\", 5)(7, \"p\");\n        i0.ɵɵtext(8, \"Rendez-vous\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"ion-item\", 6);\n        i0.ɵɵelement(10, \"ion-icon\", 7);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(11, \"ion-content\", 8)(12, \"ion-grid\")(13, \"ion-row\")(14, \"ion-col\")(15, \"ion-card\", 9)(16, \"ion-card-header\");\n        i0.ɵɵelement(17, \"br\")(18, \"br\");\n        i0.ɵɵelementStart(19, \"ion-card-title\", 10)(20, \"div\", 10);\n        i0.ɵɵtext(21, \"Trouver\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\")(23, \"span\");\n        i0.ɵɵtext(24, \"Tous les sp\\u00E9cialistes \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(25, \"br\")(26, \"br\")(27, \"ion-card-subtitle\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"ion-content\", 11)(29, \"ion-button\", 12);\n        i0.ɵɵelement(30, \"ion-icon\", 13);\n        i0.ɵɵelementStart(31, \"p\", 14);\n        i0.ɵɵtext(32, \"Rechercher\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(33, \"br\")(34, \"br\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(35, \"ion-row\")(36, \"ion-col\", 15)(37, \"mwl-calendar-month-view\", 16);\n        i0.ɵɵlistener(\"dayClicked\", function Tab2Page_Template_mwl_calendar_month_view_dayClicked_37_listener($event) {\n          return ctx.dayClicked($event.day);\n        });\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(38, \"ion-list\");\n        i0.ɵɵtemplate(39, Tab2Page_ion_item_39_Template, 5, 4, \"ion-item\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"ion-footer\", 18)(41, \"ion-toolbar\")(42, \"ion-tabs\")(43, \"ion-tab-bar\", 19)(44, \"ion-tab-button\");\n        i0.ɵɵelement(45, \"ion-icon\", 20);\n        i0.ɵɵtext(46, \" Home \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"ion-tab-button\");\n        i0.ɵɵelement(48, \"ion-icon\", 21);\n        i0.ɵɵtext(49, \" Rendez-vous \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"ion-tab-button\");\n        i0.ɵɵelement(51, \"ion-icon\", 22);\n        i0.ɵɵtext(52, \" A remplir \");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"translucent\", true);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(26);\n        i0.ɵɵproperty(\"viewDate\", ctx.viewDate)(\"events\", ctx.events)(\"activeDayIsOpen\", ctx.activeDayIsOpen);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.rdvs);\n      }\n    },\n    dependencies: [i2.IonButton, i2.IonCard, i2.IonCardHeader, i2.IonCardSubtitle, i2.IonCardTitle, i2.IonCol, i2.IonContent, i2.IonFooter, i2.IonGrid, i2.IonHeader, i2.IonIcon, i2.IonItem, i2.IonLabel, i2.IonList, i2.IonRow, i2.IonTabBar, i2.IonTabButton, i2.IonToolbar, i2.IonTabs, i2.RouterLinkDelegate, i3.NgForOf, i4.RouterLink, i5.CalendarMonthViewComponent],\n    styles: [\"@charset \\\"UTF-8\\\";.right[_ngcontent-%COMP%]{float:right}.left[_ngcontent-%COMP%]{float:left}.header-rd[_ngcontent-%COMP%]{height:250px}.center[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}.center1[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:5px;margin-left:auto;margin-right:auto;display:block;width:200px;height:5px}body[_ngcontent-%COMP%]{text-align:center;background:linear-gradient(141deg,#ccc 25%,#eee,#ddd 55%);color:#555;font-family:Roboto;font-weight:300;font-size:32px;padding-top:40vh;height:100vh;overflow:hidden}div[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;white-space:nowrap}div[_ngcontent-%COMP%]:first-of-type{animation:_ngcontent-%COMP%_showup 7s infinite}div[_ngcontent-%COMP%]:last-of-type{width:0px;animation:_ngcontent-%COMP%_reveal 7s infinite}div[_ngcontent-%COMP%]:last-of-type   span[_ngcontent-%COMP%]{margin-left:-355px;animation:_ngcontent-%COMP%_slidein 7s infinite}@keyframes _ngcontent-%COMP%_showup{0%{opacity:0}20%{opacity:1}80%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_slidein{0%{margin-left:-800px}20%{margin-left:-800px}35%{margin-left:0}to{margin-left:0}}@keyframes _ngcontent-%COMP%_reveal{0%{opacity:0;width:0px}20%{opacity:1;width:0px}30%{width:355px}80%{opacity:1}to{opacity:0;width:355px}}.calendar[_ngcontent-%COMP%]{width:100%;position:sticky}.footer[_ngcontent-%COMP%]{margin-bottom:0%}.content[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}.text-rouge[_ngcontent-%COMP%]{color:var(--ion-color-new)}\"]\n  });\n  return Tab2Page;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}