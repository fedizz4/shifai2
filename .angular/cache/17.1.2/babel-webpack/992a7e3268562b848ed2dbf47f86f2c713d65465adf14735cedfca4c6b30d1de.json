{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { AddUser } from 'src/firebaseConfig'; // Ne pas importer 'app' ici\nlet SignupPage = class SignupPage {\n  constructor(auth, firestore, toastController, app) {\n    this.auth = auth;\n    this.firestore = firestore;\n    this.toastController = toastController;\n    this.app = app;\n    this.familyName = \"\";\n    this.name = \"\";\n    this.email = \"\";\n    this.password = \"\";\n    this.date = \"\";\n    this.sexe = \"\";\n    this.role = \"patient\";\n  }\n  ngOnInit() {}\n  presentToast(message) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const toast = yield _this.toastController.create({\n        message: message,\n        duration: 3000,\n        position: 'bottom'\n      });\n      toast.present();\n    })();\n  }\n  AddUser() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        var _userCredential$user;\n        // Utilisez createUserWithEmailAndPassword pour créer l'utilisateur avec email et mot de passe\n        const userCredential = yield _this2.auth.createUserWithEmailAndPassword(_this2.email, _this2.password);\n        // Récupérer l'ID utilisateur\n        const userId = (_userCredential$user = userCredential.user) === null || _userCredential$user === void 0 ? void 0 : _userCredential$user.uid; // Ajoutez un point d'interrogation pour gérer le cas où user est null\n        // Utilisez la fonction AddUser du fichier firebaseConfig avec les paramètres du formulaire\n        yield AddUser(_this2.auth, _this2.firestore, _this2.app, _this2.familyName, _this2.name, _this2.email, _this2.password, _this2.date, _this2.sexe, _this2.role);\n        _this2.presentToast('Registration successful!');\n        // Réinitialisez les valeurs du formulaire après l'ajout réussi\n        _this2.familyName = '';\n        _this2.name = '';\n        _this2.email = '';\n        _this2.password = '';\n        _this2.date = '';\n        _this2.sexe = '';\n      } catch (error) {\n        console.log('Error during registration:', error);\n      }\n    })();\n  }\n};\nSignupPage = __decorate([Component({\n  selector: 'app-signup',\n  templateUrl: './signup.page.html',\n  styleUrls: ['./signup.page.scss']\n})], SignupPage);\nexport { SignupPage };","map":{"version":3,"names":["Component","AddUser","SignupPage","constructor","auth","firestore","toastController","app","familyName","name","email","password","date","sexe","role","ngOnInit","presentToast","message","_this","_asyncToGenerator","toast","create","duration","position","present","_this2","_userCredential$user","userCredential","createUserWithEmailAndPassword","userId","user","uid","error","console","log","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\signup\\signup.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { AddUser } from 'src/firebaseConfig'; // Ne pas importer 'app' ici\nimport { ToastController } from '@ionic/angular';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { FirebaseApp } from 'firebase/app';\n\n@Component({\n  selector: 'app-signup',\n  templateUrl: './signup.page.html',\n  styleUrls: ['./signup.page.scss'],\n})\nexport class SignupPage implements OnInit {\n  familyName = \"\";\n  name = \"\";\n  email = \"\";\n  password = \"\";\n  date = \"\";\n  sexe = \"\";\n  role = \"patient\";\n\n  constructor(\n    private auth: AngularFireAuth,\n    private firestore: AngularFirestore,\n    private toastController: ToastController,\n    private app: FirebaseApp ,\n  ) {}\n\n  ngOnInit() {}\n\n  async presentToast(message: string) {\n    const toast = await this.toastController.create({\n      message: message,\n      duration: 3000,\n      position: 'bottom',\n    });\n    toast.present();\n  }\n\n  async AddUser() {\n    try {\n      // Utilisez createUserWithEmailAndPassword pour créer l'utilisateur avec email et mot de passe\n      const userCredential = await this.auth.createUserWithEmailAndPassword(this.email, this.password);\n      \n      // Récupérer l'ID utilisateur\n      const userId = userCredential.user?.uid; // Ajoutez un point d'interrogation pour gérer le cas où user est null\n\n      // Utilisez la fonction AddUser du fichier firebaseConfig avec les paramètres du formulaire\n      await AddUser(this.auth, this.firestore,this.app ,this.familyName, this.name, this.email, this.password, this.date, this.sexe, this.role);\n\n      this.presentToast('Registration successful!');\n      // Réinitialisez les valeurs du formulaire après l'ajout réussi\n      this.familyName = '';\n      this.name = '';\n      this.email = '';\n      this.password = '';\n      this.date = '';\n      this.sexe = '';\n    } catch(error) {\n      console.log('Error during registration:', error);\n    }\n  }\n}\n"],"mappings":";;AAAA,SAASA,SAAS,QAAgB,eAAe;AAEjD,SAASC,OAAO,QAAQ,oBAAoB,CAAC,CAAC;AAUvC,IAAMC,UAAU,GAAhB,MAAMA,UAAU;EASrBC,YACUC,IAAqB,EACrBC,SAA2B,EAC3BC,eAAgC,EAChCC,GAAgB;IAHhB,KAAAH,IAAI,GAAJA,IAAI;IACJ,KAAAC,SAAS,GAATA,SAAS;IACT,KAAAC,eAAe,GAAfA,eAAe;IACf,KAAAC,GAAG,GAAHA,GAAG;IAZb,KAAAC,UAAU,GAAG,EAAE;IACf,KAAAC,IAAI,GAAG,EAAE;IACT,KAAAC,KAAK,GAAG,EAAE;IACV,KAAAC,QAAQ,GAAG,EAAE;IACb,KAAAC,IAAI,GAAG,EAAE;IACT,KAAAC,IAAI,GAAG,EAAE;IACT,KAAAC,IAAI,GAAG,SAAS;EAOb;EAEHC,QAAQA,CAAA,GAAI;EAENC,YAAYA,CAACC,OAAe;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MAChC,MAAMC,KAAK,SAASF,KAAI,CAACZ,eAAe,CAACe,MAAM,CAAC;QAC9CJ,OAAO,EAAEA,OAAO;QAChBK,QAAQ,EAAE,IAAI;QACdC,QAAQ,EAAE;OACX,CAAC;MACFH,KAAK,CAACI,OAAO,EAAE;IAAC;EAClB;EAEMvB,OAAOA,CAAA;IAAA,IAAAwB,MAAA;IAAA,OAAAN,iBAAA;MACX,IAAI;QAAA,IAAAO,oBAAA;QACF;QACA,MAAMC,cAAc,SAASF,MAAI,CAACrB,IAAI,CAACwB,8BAA8B,CAACH,MAAI,CAACf,KAAK,EAAEe,MAAI,CAACd,QAAQ,CAAC;QAEhG;QACA,MAAMkB,MAAM,IAAAH,oBAAA,GAAGC,cAAc,CAACG,IAAI,cAAAJ,oBAAA,uBAAnBA,oBAAA,CAAqBK,GAAG,CAAC,CAAC;QAEzC;QACA,MAAM9B,OAAO,CAACwB,MAAI,CAACrB,IAAI,EAAEqB,MAAI,CAACpB,SAAS,EAACoB,MAAI,CAAClB,GAAG,EAAEkB,MAAI,CAACjB,UAAU,EAAEiB,MAAI,CAAChB,IAAI,EAAEgB,MAAI,CAACf,KAAK,EAAEe,MAAI,CAACd,QAAQ,EAAEc,MAAI,CAACb,IAAI,EAAEa,MAAI,CAACZ,IAAI,EAAEY,MAAI,CAACX,IAAI,CAAC;QAEzIW,MAAI,CAACT,YAAY,CAAC,0BAA0B,CAAC;QAC7C;QACAS,MAAI,CAACjB,UAAU,GAAG,EAAE;QACpBiB,MAAI,CAAChB,IAAI,GAAG,EAAE;QACdgB,MAAI,CAACf,KAAK,GAAG,EAAE;QACfe,MAAI,CAACd,QAAQ,GAAG,EAAE;QAClBc,MAAI,CAACb,IAAI,GAAG,EAAE;QACda,MAAI,CAACZ,IAAI,GAAG,EAAE;MAChB,CAAC,CAAC,OAAMmB,KAAK,EAAE;QACbC,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEF,KAAK,CAAC;MAClD;IAAC;EACH;CACD;AAlDY9B,UAAU,GAAAiC,UAAA,EALtBnC,SAAS,CAAC;EACToC,QAAQ,EAAE,YAAY;EACtBC,WAAW,EAAE,oBAAoB;EACjCC,SAAS,EAAE,CAAC,oBAAoB;CACjC,CAAC,C,EACWpC,UAAU,CAkDtB"},"metadata":{},"sourceType":"module","externalDependencies":[]}