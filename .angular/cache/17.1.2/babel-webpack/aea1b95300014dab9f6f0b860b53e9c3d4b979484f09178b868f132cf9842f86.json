{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _DocumentPage;\nimport { finalize } from 'rxjs/operators';\nimport { inscritUid } from '../login/login.page';\nimport { patientUidA } from '../patient/patient.page';\nimport { getDocumentsforpatient } from 'src/firebaseConfig';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@angular/fire/compat/storage\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/router\";\nfunction DocumentPage_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"img\", 9);\n    i0.ɵɵelementStart(2, \"ion-item\")(3, \"ion-label\", 10);\n    i0.ɵɵtext(4, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-input\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function DocumentPage_div_13_Template_ion_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.documentDescription = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"ion-button\", 12);\n    i0.ɵɵlistener(\"click\", function DocumentPage_div_13_Template_ion_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.envoyer());\n    });\n    i0.ɵɵtext(7, \"Enregistrer\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", ctx_r0.selectedFileUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.documentDescription);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.selectedFile || !ctx_r0.documentDescription);\n  }\n}\nfunction DocumentPage_ion_item_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-thumbnail\", 1);\n    i0.ɵɵelement(2, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-label\")(4, \"h2\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"ion-button\", 14);\n    i0.ɵɵtext(9, \"Voir d\\u00E9tail..\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const document_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", document_r5.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(document_r5.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(document_r5.useruid);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"href\", document_r5.url);\n  }\n}\nexport class DocumentPage {\n  constructor(firestore, storage, toastController, loadingController) {\n    this.firestore = firestore;\n    this.storage = storage;\n    this.toastController = toastController;\n    this.loadingController = loadingController;\n    this.documents = [];\n    this.documentDescription = '';\n    this.selectedFile = null;\n    this.selectedFileUrl = null;\n  }\n  ngOnInit() {\n    this.getDocuments();\n  }\n  getDocuments() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const documents = yield getDocumentsforpatient(_this.firestore, inscritUid);\n      if (documents) {\n        _this.documents = documents;\n      }\n    })();\n  }\n  onFileSelected(event) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.selectedFile = event.target.files[0];\n      // Mettre à jour selectedFileUrl lors de la sélection du fichier\n      if (_this2.selectedFile) {\n        const reader = new FileReader();\n        reader.readAsDataURL(_this2.selectedFile);\n        reader.onload = () => {\n          _this2.selectedFileUrl = reader.result;\n        };\n      }\n    })();\n  }\n  envoyer() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this3.selectedFile || !_this3.documentDescription) {\n        console.error('Veuillez sélectionner un fichier et ajouter une description.');\n        return;\n      }\n      const loading = yield _this3.loadingController.create({\n        message: 'Envoi du document en cours...'\n      });\n      yield loading.present();\n      try {\n        // Générer un ID unique pour le document\n        const fileId = _this3.firestore.createId();\n        const filePath = `documents/${fileId}`;\n        // Uploader le fichier vers Firebase Storage\n        let uploadTask;\n        if (_this3.storage.upload) {\n          uploadTask = _this3.storage.upload(filePath, _this3.selectedFile);\n        } else {\n          uploadTask = _this3.storage.ref(filePath).put(_this3.selectedFile);\n        }\n        // Attendre la fin du téléchargement\n        yield uploadTask.snapshotChanges().pipe(finalize( /*#__PURE__*/_asyncToGenerator(function* () {\n          // Récupérer l'URL du fichier téléchargé\n          const fileUrl = yield _this3.storage.ref(filePath).getDownloadURL();\n          // Enregistrer les métadonnées dans Firestore\n          yield _this3.firestore.collection('documents').doc(fileId).set({\n            uid: fileId,\n            useruid: patientUidA,\n            url: fileUrl,\n            description: _this3.documentDescription\n            // Ajoutez d'autres champs si nécessaire\n          });\n          // Réinitialiser les valeurs\n          _this3.selectedFile = null;\n          _this3.documentDescription = '';\n          // Masquer le loader\n          yield loading.dismiss();\n          // Afficher un message de succès\n          const toast = yield _this3.toastController.create({\n            message: 'Le document a été enregistré avec succès.',\n            duration: 1500,\n            position: 'top',\n            color: 'success'\n          });\n          yield toast.present();\n          // Actualiser la liste des documents\n          _this3.getDocuments();\n        }))).subscribe();\n      } catch (error) {\n        console.error('Erreur lors de l\\'envoi du fichier :', error);\n        // Masquer le loader en cas d'erreur\n        yield loading.dismiss();\n        // Afficher un message d'erreur\n        const toast = yield _this3.toastController.create({\n          message: 'Une erreur est survenue lors de l\\'envoi du fichier.',\n          duration: 1500,\n          position: 'top',\n          color: 'danger'\n        });\n        yield toast.present();\n      }\n    })();\n  }\n  searchDocumentsByDescription(event) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      if (!event || !event.target || !event.target.value) {\n        console.log('Veuillez entrer une description.');\n        return;\n      }\n      const description = event.target.value;\n      try {\n        // Filtrer les documents pour la description spécifiée\n        const filteredDocuments = _this4.documents.filter(document => document.description === description);\n        if (filteredDocuments.length > 0) {\n          console.log('Documents trouvés avec la description', description, ':', filteredDocuments);\n          _this4.documents = filteredDocuments;\n        } else {\n          console.log('Aucun document trouvé avec la description', description);\n        }\n      } catch (error) {\n        console.error('Erreur lors de la recherche des documents pour la description :', error);\n      }\n    })();\n  }\n  search(event) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      const searchTerm = event.target.value.toLowerCase().trim();\n      if (!searchTerm) {\n        // Si la barre de recherche est vide, réinitialiser la liste des documents\n        _this5.getDocuments();\n        return;\n      }\n      // Filtrer les documents dont la description commence par le terme de recherche\n      _this5.documents = _this5.documents.filter(documents => documents.description.toLowerCase().startsWith(searchTerm));\n    })();\n  }\n}\n_DocumentPage = DocumentPage;\n_DocumentPage.ɵfac = function DocumentPage_Factory(t) {\n  return new (t || _DocumentPage)(i0.ɵɵdirectiveInject(i1.AngularFirestore), i0.ɵɵdirectiveInject(i2.AngularFireStorage), i0.ɵɵdirectiveInject(i3.ToastController), i0.ɵɵdirectiveInject(i3.LoadingController));\n};\n_DocumentPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _DocumentPage,\n  selectors: [[\"app-document\"]],\n  decls: 21,\n  vars: 4,\n  consts: [[3, \"translucent\"], [\"slot\", \"start\"], [\"routerLink\", \"/tabs/tab1\", \"fill\", \"clear\"], [3, \"fullscreen\"], [1, \"upload-document\"], [\"type\", \"file\", \"id\", \"fileInput\", \"name\", \"fileInput\", \"accept\", \"*/*\", 3, \"change\"], [4, \"ngIf\"], [\"placeholder\", \"Rechercher\", 3, \"ionInput\"], [4, \"ngFor\", \"ngForOf\"], [\"alt\", \"Selected Image\", 3, \"src\"], [\"position\", \"floating\"], [\"type\", \"text\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"expand\", \"full\", 3, \"disabled\", \"click\"], [\"alt\", \"Document Image\", 3, \"src\"], [\"fill\", \"clear\", \"slot\", \"end\", \"target\", \"_blank\", 3, \"href\"]],\n  template: function DocumentPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-buttons\", 1)(3, \"ion-button\", 2);\n      i0.ɵɵtext(4, \"Retour\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"ion-title\");\n      i0.ɵɵtext(6, \"Documents\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"ion-content\", 3)(8, \"ion-grid\")(9, \"ion-row\")(10, \"ion-col\")(11, \"ion-card\", 4)(12, \"input\", 5);\n      i0.ɵɵlistener(\"change\", function DocumentPage_Template_input_change_12_listener($event) {\n        return ctx.onFileSelected($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(13, DocumentPage_div_13_Template, 8, 3, \"div\", 6);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(14, \"ion-row\")(15, \"ion-col\");\n      i0.ɵɵelement(16, \"br\");\n      i0.ɵɵelementStart(17, \"ion-searchbar\", 7);\n      i0.ɵɵlistener(\"ionInput\", function DocumentPage_Template_ion_searchbar_ionInput_17_listener($event) {\n        return ctx.searchDocumentsByDescription($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"br\");\n      i0.ɵɵelementStart(19, \"ion-list\");\n      i0.ɵɵtemplate(20, DocumentPage_ion_item_20_Template, 10, 4, \"ion-item\", 8);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"translucent\", true);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"fullscreen\", true);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.selectedFile);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.documents);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.NgControlStatus, i5.RequiredValidator, i5.NgModel, i3.IonButton, i3.IonButtons, i3.IonCard, i3.IonCol, i3.IonContent, i3.IonGrid, i3.IonHeader, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonList, i3.IonRow, i3.IonSearchbar, i3.IonThumbnail, i3.IonTitle, i3.IonToolbar, i3.TextValueAccessor, i3.RouterLinkDelegate, i6.RouterLink],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["finalize","inscritUid","patientUidA","getDocumentsforpatient","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","DocumentPage_div_13_Template_ion_input_ngModelChange_5_listener","$event","ɵɵrestoreView","_r3","ctx_r2","ɵɵnextContext","ɵɵresetView","documentDescription","DocumentPage_div_13_Template_ion_button_click_6_listener","ctx_r4","envoyer","ɵɵadvance","ɵɵproperty","ctx_r0","selectedFileUrl","ɵɵsanitizeUrl","selectedFile","document_r5","url","ɵɵtextInterpolate","description","useruid","DocumentPage","constructor","firestore","storage","toastController","loadingController","documents","ngOnInit","getDocuments","_this","_asyncToGenerator","onFileSelected","event","_this2","target","files","reader","FileReader","readAsDataURL","onload","result","_this3","console","error","loading","create","message","present","fileId","createId","filePath","uploadTask","upload","ref","put","snapshotChanges","pipe","fileUrl","getDownloadURL","collection","doc","set","uid","dismiss","toast","duration","position","color","subscribe","searchDocumentsByDescription","_this4","value","log","filteredDocuments","filter","document","length","search","_this5","searchTerm","toLowerCase","trim","startsWith","ɵɵdirectiveInject","i1","AngularFirestore","i2","AngularFireStorage","i3","ToastController","LoadingController","selectors","decls","vars","consts","template","DocumentPage_Template","rf","ctx","DocumentPage_Template_input_change_12_listener","ɵɵtemplate","DocumentPage_div_13_Template","DocumentPage_Template_ion_searchbar_ionInput_17_listener","DocumentPage_ion_item_20_Template"],"sources":["C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\document\\document.page.ts","C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\document\\document.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { AngularFireStorage } from '@angular/fire/compat/storage';\nimport { LoadingController, ToastController } from '@ionic/angular';\nimport { finalize } from 'rxjs/operators';\nimport { inscritUid } from '../login/login.page';\nimport { patientUidA } from '../patient/patient.page';\nimport { getDocumentsforpatient } from 'src/firebaseConfig';\n\ninterface DocumentData {\n  uid: string;\n  url: string;\n  description: string;\n  useruid: string;\n}\n\n@Component({\n  selector: 'app-document',\n  templateUrl: './document.page.html',\n  styleUrls: ['./document.page.scss'],\n})\nexport class DocumentPage implements OnInit {\n  documents: DocumentData[] = [];\n  documentDescription: string = '';\n  selectedFile: File | null = null;\n  selectedFileUrl: string | null = null;\n\n  constructor(\n    private firestore: AngularFirestore,\n    private storage: AngularFireStorage,\n    private toastController: ToastController,\n    private loadingController: LoadingController\n  ) {}\n\n  ngOnInit() {\n    this.getDocuments();\n  }\n\n  async getDocuments() {\n    const documents = await getDocumentsforpatient(this.firestore, inscritUid);\n    if (documents) {\n      this.documents = documents;\n    }\n  }\n\n  async onFileSelected(event: any) {\n    this.selectedFile = event.target.files[0] as File;\n\n    // Mettre à jour selectedFileUrl lors de la sélection du fichier\n    if (this.selectedFile) {\n      const reader = new FileReader();\n      reader.readAsDataURL(this.selectedFile);\n      reader.onload = () => {\n        this.selectedFileUrl = reader.result as string;\n      };\n    }\n  }\n\n  async envoyer() {\n    if (!this.selectedFile || !this.documentDescription) {\n      console.error('Veuillez sélectionner un fichier et ajouter une description.');\n      return;\n    }\n\n    const loading = await this.loadingController.create({\n      message: 'Envoi du document en cours...',\n    });\n    await loading.present();\n\n    try {\n      // Générer un ID unique pour le document\n      const fileId = this.firestore.createId();\n      const filePath = `documents/${fileId}`;\n\n      // Uploader le fichier vers Firebase Storage\n      let uploadTask: firebase.storage.UploadTask;\n      if (this.storage.upload) {\n        uploadTask = this.storage.upload(filePath, this.selectedFile);\n      } else {\n        uploadTask = this.storage.ref(filePath).put(this.selectedFile);\n      }\n\n      // Attendre la fin du téléchargement\n      await uploadTask.snapshotChanges().pipe(\n        finalize(async () => {\n          // Récupérer l'URL du fichier téléchargé\n          const fileUrl = await this.storage.ref(filePath).getDownloadURL();\n\n          // Enregistrer les métadonnées dans Firestore\n          await this.firestore.collection('documents').doc(fileId).set({\n            uid: fileId,\n            useruid: patientUidA,\n            url: fileUrl,\n            description: this.documentDescription,\n            // Ajoutez d'autres champs si nécessaire\n          });\n\n          // Réinitialiser les valeurs\n          this.selectedFile = null;\n          this.documentDescription = '';\n\n          // Masquer le loader\n          await loading.dismiss();\n\n          // Afficher un message de succès\n          const toast = await this.toastController.create({\n            message: 'Le document a été enregistré avec succès.',\n            duration: 1500,\n            position: 'top',\n            color: 'success',\n          });\n          await toast.present();\n\n          // Actualiser la liste des documents\n          this.getDocuments();\n        })\n      ).subscribe();\n\n    } catch (error) {\n      console.error('Erreur lors de l\\'envoi du fichier :', error);\n\n      // Masquer le loader en cas d'erreur\n      await loading.dismiss();\n\n      // Afficher un message d'erreur\n      const toast = await this.toastController.create({\n        message: 'Une erreur est survenue lors de l\\'envoi du fichier.',\n        duration: 1500,\n        position: 'top',\n        color: 'danger',\n      });\n      await toast.present();\n    }\n  }\n  async searchDocumentsByDescription(event: any) {\n    if (!event || !event.target || !event.target.value) {\n      console.log('Veuillez entrer une description.');\n      return;\n    }\n  \n    const description = event.target.value;\n  \n    try {\n      // Filtrer les documents pour la description spécifiée\n      const filteredDocuments = this.documents.filter(document => document.description === description);\n  \n      if (filteredDocuments.length > 0) {\n        console.log('Documents trouvés avec la description', description, ':', filteredDocuments);\n        this.documents = filteredDocuments;\n      } else {\n        console.log('Aucun document trouvé avec la description', description);\n      }\n    } catch (error) {\n      console.error('Erreur lors de la recherche des documents pour la description :', error);\n    }\n  }\n  \n  async search(event: CustomEvent) {\n    const searchTerm = (event.target as HTMLInputElement).value.toLowerCase().trim();\n    if (!searchTerm) {\n      // Si la barre de recherche est vide, réinitialiser la liste des documents\n      this.getDocuments();\n      return;\n    }\n  \n    // Filtrer les documents dont la description commence par le terme de recherche\n    this.documents = this.documents.filter(documents =>\n      documents.description.toLowerCase().startsWith(searchTerm)\n    );\n  }\n  \n  \n}\n","<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button routerLink=\"/tabs/tab1\" fill=\"clear\">Retour</ion-button>\n    </ion-buttons>\n    <ion-title>Documents</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\">\n  <ion-grid>\n    <ion-row>\n      <ion-col>\n        <ion-card class=\"upload-document\">\n          <input type=\"file\" id=\"fileInput\" name=\"fileInput\" accept=\"*/*\" (change)=\"onFileSelected($event)\">\n          <div *ngIf=\"selectedFile\">\n            <img [src]=\"selectedFileUrl\" alt=\"Selected Image\">\n            <ion-item>\n              <ion-label position=\"floating\">Description</ion-label>\n              <ion-input type=\"text\" [(ngModel)]=\"documentDescription\" required></ion-input>\n            </ion-item>\n            <ion-button expand=\"full\" (click)=\"envoyer()\" [disabled]=\"!selectedFile || !documentDescription\">Enregistrer</ion-button>\n          </div>\n        </ion-card>\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col>\n        <br>\n        <ion-searchbar placeholder=\"Rechercher\" (ionInput)=\"searchDocumentsByDescription($event)\"></ion-searchbar>\n        <br>\n        <ion-list>\n          <ion-item *ngFor=\"let document of documents\">\n            <ion-thumbnail slot=\"start\">\n              <img [src]=\"document.url\" alt=\"Document Image\">\n            </ion-thumbnail>\n            <ion-label>\n              <h2>{{ document.description }}</h2>\n              <p>{{ document.useruid }}</p>\n            </ion-label>\n            <ion-button fill=\"clear\" slot=\"end\" [href]=\"document.url\" target=\"_blank\">Voir détail..</ion-button>\n          </ion-item>\n        </ion-list>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}