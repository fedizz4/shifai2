{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { getConsultations, medecinUid, savePatient, getPatientByUid, getDocuments } from 'src/firebaseConfig';\nimport { patientUidA } from '../patient/patient.page';\nimport { finalize } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/storage\";\nimport * as i2 from \"@angular/fire/compat/firestore\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction PatientpagePage_ion_card_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-header\")(2, \"ion-card-title\")(3, \"b\");\n    i0.ɵɵtext(4, \"Fiche Patient\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(5, \"ion-card-content\")(6, \"ion-card\")(7, \"ion-card-header\")(8, \"ion-card-title\")(9, \"b\");\n    i0.ɵɵtext(10, \"Info patient\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"ion-card-content\")(12, \"ion-item\")(13, \"ion-label\");\n    i0.ɵɵtext(14, \"Nom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"ion-input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.nom = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"ion-item\")(17, \"ion-label\");\n    i0.ɵɵtext(18, \"Pr\\u00E9nom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"ion-input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_input_ngModelChange_19_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.prenom = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"ion-item\")(21, \"ion-label\");\n    i0.ɵɵtext(22, \"\\u00C2ge\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"ion-input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_input_ngModelChange_23_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.age = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"ion-item\")(25, \"ion-label\");\n    i0.ɵɵtext(26, \"Sexe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"ion-select\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_select_ngModelChange_27_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.sexe = $event);\n    });\n    i0.ɵɵelementStart(28, \"ion-select-option\", 8);\n    i0.ɵɵtext(29, \"Femme\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"ion-select-option\", 9);\n    i0.ɵɵtext(31, \"Homme\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(32, \"ion-item\")(33, \"ion-label\");\n    i0.ɵɵtext(34, \"Groupe Sanguin\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"ion-select\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_select_ngModelChange_35_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.groupeSanguin = $event);\n    });\n    i0.ɵɵelementStart(36, \"ion-select-option\", 11);\n    i0.ɵɵtext(37, \"A+\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"ion-select-option\", 12);\n    i0.ɵɵtext(39, \"A-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"ion-select-option\", 13);\n    i0.ɵɵtext(41, \"B+\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"ion-select-option\", 14);\n    i0.ɵɵtext(43, \"B-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"ion-select-option\", 15);\n    i0.ɵɵtext(45, \"AB+\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(46, \"ion-select-option\", 16);\n    i0.ɵɵtext(47, \"AB-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(48, \"ion-select-option\", 17);\n    i0.ɵɵtext(49, \"O+\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"ion-select-option\", 18);\n    i0.ɵɵtext(51, \"O-\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(52, \"ion-item\")(53, \"ion-label\");\n    i0.ɵɵtext(54, \"Situation familiale\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(55, \"ion-select\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_select_ngModelChange_55_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.situationFamiliale = $event);\n    });\n    i0.ɵɵelementStart(56, \"ion-select-option\", 20);\n    i0.ɵɵtext(57, \"C\\u00E9libataire\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(58, \"ion-select-option\", 21);\n    i0.ɵɵtext(59, \"Mari\\u00E9(e)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(60, \"ion-select-option\", 22);\n    i0.ɵɵtext(61, \"Divorc\\u00E9(e)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(62, \"ion-select-option\", 23);\n    i0.ɵɵtext(63, \"Veuf/Veuve\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(64, \"ion-item\")(65, \"ion-label\");\n    i0.ɵɵtext(66, \"Profession\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(67, \"ion-input\", 24);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_input_ngModelChange_67_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.profession = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(68, \"ion-card\")(69, \"ion-card-header\")(70, \"ion-card-title\")(71, \"b\");\n    i0.ɵɵtext(72, \"Coordonn\\u00E9es Patient\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(73, \"ion-card-content\")(74, \"ion-item\")(75, \"ion-label\");\n    i0.ɵɵtext(76, \"Adresse Mail\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(77, \"ion-input\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_input_ngModelChange_77_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.email = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(78, \"ion-item\")(79, \"ion-label\");\n    i0.ɵɵtext(80, \"T\\u00E9l\\u00E9phone 1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(81, \"ion-input\", 26);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_input_ngModelChange_81_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.telephone = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(82, \"ion-item\")(83, \"ion-label\");\n    i0.ɵɵtext(84, \"T\\u00E9l\\u00E9phone 2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(85, \"ion-input\", 26);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_input_ngModelChange_85_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.telephone2 = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(86, \"ion-item\")(87, \"ion-label\");\n    i0.ɵɵtext(88, \"Num\\u00E9ro Assurance\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(89, \"ion-input\", 26);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_input_ngModelChange_89_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.numeroAssurance = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(90, \"ion-item\")(91, \"ion-label\");\n    i0.ɵɵtext(92, \"Adresse\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(93, \"ion-input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_input_ngModelChange_93_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.adresse = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(94, \"ion-item\")(95, \"ion-label\", 27);\n    i0.ɵɵtext(96, \"Note\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(97, \"ion-textarea\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_textarea_ngModelChange_97_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.note = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(98, \"ion-card\")(99, \"ion-card-header\")(100, \"ion-card-title\")(101, \"b\");\n    i0.ɵɵtext(102, \"Ant\\u00E9c\\u00E9dents\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(103, \"ion-card-content\")(104, \"ion-item\")(105, \"ion-label\", 27);\n    i0.ɵɵtext(106, \"Ant\\u00E9c\\u00E9dents M\\u00E9dicaux\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(107, \"ion-textarea\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_textarea_ngModelChange_107_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.antecedentsMedicaux = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(108, \"ion-item\")(109, \"ion-label\", 27);\n    i0.ɵɵtext(110, \"Ant\\u00E9c\\u00E9dents Chirurgicaux\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(111, \"ion-textarea\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_textarea_ngModelChange_111_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.antecedentsChirurgicaux = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(112, \"ion-item\")(113, \"ion-label\", 27);\n    i0.ɵɵtext(114, \"Ant\\u00E9c\\u00E9dents Familiaux\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(115, \"ion-textarea\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_textarea_ngModelChange_115_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.antecedentsFamiliaux = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(116, \"ion-item\")(117, \"ion-label\", 27);\n    i0.ɵɵtext(118, \"Autres Ant\\u00E9c\\u00E9dents\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(119, \"ion-textarea\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_textarea_ngModelChange_119_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.autresAntecedents = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(120, \"ion-item\")(121, \"ion-label\", 27);\n    i0.ɵɵtext(122, \"M\\u00E9dicaments du patient\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(123, \"ion-textarea\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_15_Template_ion_textarea_ngModelChange_123_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.medicaments = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(124, \"ion-button\", 29);\n    i0.ɵɵlistener(\"click\", function PatientpagePage_ion_card_15_Template_ion_button_click_124_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.saveFichePatient());\n    });\n    i0.ɵɵtext(125, \"Enregistrer\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.nom);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.prenom);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.age);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.sexe);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.groupeSanguin);\n    i0.ɵɵadvance(20);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.situationFamiliale);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.profession);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.telephone);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.telephone2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.numeroAssurance);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.adresse);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.note);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.antecedentsMedicaux);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.antecedentsChirurgicaux);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.antecedentsFamiliaux);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.autresAntecedents);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.medicaments);\n  }\n}\nfunction PatientpagePage_ion_card_16_ion_item_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-button\", 36);\n    i0.ɵɵlistener(\"click\", function PatientpagePage_ion_card_16_ion_item_13_Template_ion_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const consultation_r25 = restoredCtx.$implicit;\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r26.editConsultation(consultation_r25));\n    });\n    i0.ɵɵtext(4, \"Modifier\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const consultation_r25 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(consultation_r25.date);\n  }\n}\nfunction PatientpagePage_ion_card_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-content\")(2, \"ion-card\")(3, \"form\", 30, 31);\n    i0.ɵɵlistener(\"ngSubmit\", function PatientpagePage_ion_card_16_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.searchConsultations());\n    });\n    i0.ɵɵelementStart(5, \"ion-item\")(6, \"ion-label\");\n    i0.ɵɵtext(7, \"Date de consultation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-input\", 32);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_16_Template_ion_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r30.consultationDate = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 33)(10, \"ion-button\", 34);\n    i0.ɵɵtext(11, \"Rechercher\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"ion-list\");\n    i0.ɵɵtemplate(13, PatientpagePage_ion_card_16_ion_item_13_Template, 5, 1, \"ion-item\", 35);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const _r23 = i0.ɵɵreference(4);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.consultationDate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !_r23.valid);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.consultations);\n  }\n}\nfunction PatientpagePage_ion_card_17_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-input\", 41);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_17_div_17_Template_ion_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r33.description = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"ion-button\", 42);\n    i0.ɵɵlistener(\"click\", function PatientpagePage_ion_card_17_div_17_Template_ion_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r35 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r35.envoyer());\n    });\n    i0.ɵɵelement(3, \"ion-icon\", 43);\n    i0.ɵɵtext(4, \" \\u00A0\\u00A0Envoyer \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"img\", 44);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r31 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngModel\", ctx_r31.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r31.selectedFile, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction PatientpagePage_ion_card_17_ion_item_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\");\n    i0.ɵɵelement(1, \"img\", 45);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 46);\n    i0.ɵɵtext(5, \" Voir d\\u00E9tail..\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const document_r36 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", document_r36.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(document_r36.description);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"href\", document_r36.url, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction PatientpagePage_ion_card_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-content\")(2, \"ion-card-header\");\n    i0.ɵɵelement(3, \"br\")(4, \"ion-searchbar\", 37)(5, \"br\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ion-card\", 38)(7, \"ion-card-content\");\n    i0.ɵɵelement(8, \"br\")(9, \"br\")(10, \"br\")(11, \"br\")(12, \"br\")(13, \"br\")(14, \"br\")(15, \"br\");\n    i0.ɵɵelementStart(16, \"input\", 39);\n    i0.ɵɵlistener(\"change\", function PatientpagePage_ion_card_17_Template_input_change_16_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r37.onFileSelected($event));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(17, PatientpagePage_ion_card_17_div_17_Template, 6, 2, \"div\", 4);\n    i0.ɵɵelementStart(18, \"ion-card\")(19, \"div\")(20, \"ion-list\")(21, \"ion-input\", 40);\n    i0.ɵɵlistener(\"ngModelChange\", function PatientpagePage_ion_card_17_Template_ion_input_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r39.searchDescription = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"ion-button\", 2);\n    i0.ɵɵlistener(\"click\", function PatientpagePage_ion_card_17_Template_ion_button_click_22_listener() {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r40 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r40.searchDocumentsByDescription(ctx_r40.searchDescription));\n    });\n    i0.ɵɵtext(23, \"Rechercher\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, PatientpagePage_ion_card_17_ion_item_24_Template, 6, 3, \"ion-item\", 35);\n    i0.ɵɵelement(25, \"br\")(26, \"br\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedFile);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.searchDescription);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.documents);\n  }\n}\nexport let PatientpagePage = /*#__PURE__*/(() => {\n  var _PatientpagePage;\n  class PatientpagePage {\n    constructor(storage, firestore, toastController, modalController, cdr, router) {\n      this.storage = storage;\n      this.firestore = firestore;\n      this.toastController = toastController;\n      this.modalController = modalController;\n      this.cdr = cdr;\n      this.router = router;\n      this.Vfiche = true;\n      this.Vconsultation = false;\n      this.Vdocument = false;\n      this.uid = '';\n      this.nom = '';\n      this.prenom = '';\n      this.age = 0;\n      this.adresse = '';\n      this.telephone = '';\n      this.sexe = '';\n      this.groupeSanguin = '';\n      this.situationFamiliale = '';\n      this.profession = '';\n      this.email = '';\n      this.telephone2 = '';\n      this.numeroAssurance = '';\n      this.note = '';\n      this.antecedentsMedicaux = '';\n      this.antecedentsChirurgicaux = '';\n      this.antecedentsFamiliaux = '';\n      this.autresAntecedents = '';\n      this.medicaments = '';\n      this.description = '';\n      this.selectedFile = null;\n      this.selectedFileUrl = null;\n      this.documents = [];\n      this.consultationDate = ''; // Variable pour stocker la date de consultation\n      this.searchDescription = '';\n      this.rendezVousData = {};\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const doc = yield getDocuments(_this.firestore, medecinUid.uid, patientUidA);\n        console.log(doc);\n        console.log(patientUidA);\n        _this.getdocument();\n        try {\n          _this.patient = yield getPatientByUid(_this.firestore, medecinUid.uid, patientUidA);\n          if (_this.patient) {\n            _this.nom = _this.patient.nom;\n            _this.prenom = _this.patient.prenom;\n            _this.sexe = _this.patient.sexe;\n            _this.groupeSanguin = _this.patient.groupeSanguin;\n            _this.age = _this.patient.age;\n            _this.adresse = _this.patient.adresse;\n            _this.telephone = _this.patient.telephone;\n            _this.situationFamiliale = _this.patient.situationFamiliale;\n            _this.profession = _this.patient.profession;\n            _this.email = _this.patient.email;\n            _this.telephone2 = _this.patient.telephone2;\n            _this.numeroAssurance = _this.patient.numeroAssurance;\n            _this.note = _this.patient.note;\n            _this.antecedentsMedicaux = _this.patient.antecedentsMedicaux;\n            _this.antecedentsChirurgicaux = _this.patient.antecedentsChirurgicaux;\n            _this.antecedentsFamiliaux = _this.patient.antecedentsFamiliaux;\n            _this.autresAntecedents = _this.patient.autresAntecedents;\n            _this.medicaments = _this.patient.medicaments;\n            console.log('patient', _this.patient);\n            const uuid = _this.patient.useruid;\n          }\n          yield _this.loadConsultations();\n          console.log('rdv', _this.rdv);\n        } catch (error) {\n          console.error('Erreur lors de l\\'initialisation de la page :', error);\n        }\n      })();\n    }\n    back() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        _this2.router.navigate(['/patient']);\n        console.log('going to patient');\n      })();\n    }\n    loadConsultations() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const consultations = yield getConsultations(_this3.firestore, medecinUid.uid, patientUidA);\n          console.log('consultations', consultations);\n          if (consultations && consultations.length > 0) {\n            _this3.consultations = consultations.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n          } else {\n            console.log('Aucune consultation trouvée pour ce patient.');\n          }\n        } catch (error) {\n          console.error('Erreur lors du chargement des consultations du patient :', error);\n        }\n      })();\n    }\n    saveFichePatient() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          console.log('Données de la fiche patient à sauvegarder :', _this4.adresse, _this4.age, _this4.antecedentsChirurgicaux, _this4.antecedentsFamiliaux, _this4.antecedentsMedicaux, _this4.autresAntecedents, _this4.email, _this4.medicaments, _this4.groupeSanguin, _this4.nom, _this4.note, _this4.numeroAssurance, _this4.prenom, _this4.profession, _this4.sexe, _this4.situationFamiliale, _this4.telephone, _this4.telephone2, _this4.uid);\n          yield savePatient(_this4.firestore, _this4.adresse, _this4.age, _this4.antecedentsChirurgicaux, _this4.antecedentsFamiliaux, _this4.antecedentsMedicaux, _this4.autresAntecedents, _this4.email, _this4.medicaments, _this4.groupeSanguin, _this4.nom, _this4.note, _this4.numeroAssurance, _this4.prenom, _this4.profession, _this4.sexe, _this4.situationFamiliale, _this4.telephone, _this4.telephone2, patientUidA, medecinUid.uid);\n        } catch (error) {\n          console.error('Erreur lors de l\\'ajout du patient chez le médecin :', error);\n        }\n      })();\n    }\n    fiche() {\n      this.Vconsultation = false;\n      this.Vdocument = false;\n      this.Vfiche = true;\n    }\n    consultation() {\n      this.Vconsultation = true;\n      this.Vdocument = false;\n      this.Vfiche = false;\n    }\n    document() {\n      this.Vconsultation = false;\n      this.Vdocument = true;\n      this.Vfiche = false;\n    }\n    onFileSelected(event) {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        const file = event.target.files[0];\n        _this5.selectedFile = file;\n        if (file instanceof File) {\n          try {\n            // Générer un ID unique pour le fichier\n            const fileId = Math.random().toString(36).substring(2);\n            const filePath = `documents/${fileId}_${file.name}`;\n            // Uploader le fichier dans Firebase Storage\n            const fileRef = _this5.storage.ref(filePath);\n            const uploadTask = _this5.storage.upload(filePath, file);\n            // Récupérer l'URL permanente du fichier une fois qu'il est téléchargé\n            uploadTask.snapshotChanges().pipe(finalize( /*#__PURE__*/_asyncToGenerator(function* () {\n              const fileUrl = yield fileRef.getDownloadURL().toPromise();\n              // Maintenant, vous pouvez utiliser fileUrl comme lien permanent pour le fichier\n              console.log('Lien permanent du fichier :', fileUrl);\n              // Enregistrer la description dans une variable\n              const description = _this5.description;\n              // Vérifier si la description est fournie\n              if (description) {\n                // Ajouter le document avec le lien permanent dans Firestore\n                const docRef = _this5.firestore.collection('medecin').doc(medecinUid.uid).collection('documents').doc();\n                yield docRef.set({\n                  medecinUid: medecinUid.uid,\n                  patientUid: patientUidA,\n                  url: fileUrl,\n                  description: description\n                });\n                _this5.getdocument();\n                console.log('Document ajouté avec succès.');\n              } else {\n                console.error('La description est obligatoire pour télécharger le fichier.');\n              }\n            }))).subscribe();\n          } catch (error) {\n            console.error('Erreur lors de l\\'ajout du document :', error);\n          }\n        }\n      })();\n    }\n    envoyer() {\n      var _this6 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this6.selectedFile) {\n          console.error('Aucun fichier sélectionné.');\n          return;\n        }\n        // Vérifier si la description est vide\n        if (!_this6.description) {\n          const toast = yield _this6.toastController.create({\n            message: 'La description est obligatoire.',\n            duration: 1500,\n            // Durée du toast en millisecondes\n            position: 'top',\n            // Position du toast (peut être 'top', 'bottom', 'middle')\n            color: 'danger' // Couleur du toast\n          });\n          yield toast.present();\n          return;\n        }\n        // Générer un ID unique pour le fichier\n        const fileId = _this6.firestore.createId();\n        // Chemin de stockage dans Firebase Storage\n        const filePath = `documents/${fileId}`;\n        try {\n          var _this6$patient, _this6$patient2;\n          // Télécharger le fichier vers Firebase Storage\n          const fileRef = _this6.storage.ref(filePath);\n          const uploadTask = _this6.storage.upload(filePath, _this6.selectedFile);\n          // Attendre la fin du téléchargement\n          yield uploadTask.then();\n          // Récupérer l'URL du fichier téléchargé\n          const fileUrl = yield fileRef.getDownloadURL().toPromise();\n          // Enregistrer les métadonnées dans Firestore\n          yield _this6.firestore.collection('documents').doc(fileId).set({\n            useruid: (_this6$patient = _this6.patient) === null || _this6$patient === void 0 ? void 0 : _this6$patient.useruid,\n            url: fileUrl,\n            description: _this6.description\n            // Ajoutez d'autres champs si nécessaire\n          });\n          const documents = yield getDocuments(_this6.firestore, medecinUid.uid, patientUidA);\n          if (documents && documents.length > 0) {\n            _this6.documents = documents;\n          }\n          console.log('Fichier téléchargé et enregistré avec succès.');\n          const docu = {\n            url: fileUrl,\n            description: _this6.description,\n            med: medecinUid.uid\n          };\n          const medref = yield _this6.firestore.collection('inscrits').doc((_this6$patient2 = _this6.patient) === null || _this6$patient2 === void 0 ? void 0 : _this6$patient2.useruid).collection('document').add(docu);\n        } catch (error) {\n          console.error('Erreur lors de l\\'envoi du fichier :', error);\n        }\n      })();\n    }\n    getdocument() {\n      var _this7 = this;\n      return _asyncToGenerator(function* () {\n        const documents = yield getDocuments(_this7.firestore, medecinUid.uid, patientUidA);\n        if (documents && documents.length > 0) {\n          _this7.documents = documents;\n        }\n      })();\n    }\n    closeModal() {\n      this.modalController.dismiss();\n    }\n    editConsultation(consultationdate) {\n      var _this8 = this;\n      return _asyncToGenerator(function* () {\n        consultationdate1 = consultationdate.date;\n        _this8.router.navigate(['/consultation-modif']);\n      })();\n    }\n    searchConsultations() {\n      var _this9 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          if (!_this9.consultationDate) {\n            console.log('Veuillez sélectionner une date de consultation.');\n            return;\n          }\n          // Filtrer les consultations pour la date spécifiée\n          _this9.consultations = _this9.consultations.filter(consultation => consultation.date === _this9.consultationDate);\n          if (_this9.consultations.length === 0) {\n            console.log('Aucune consultation trouvée pour la date spécifiée.');\n          } else {\n            console.log('Consultations trouvées pour la date', _this9.consultationDate, ':', _this9.consultations);\n          }\n        } catch (error) {\n          console.error('Erreur lors de la recherche des consultations pour la date :', error);\n        }\n      })();\n    }\n    searchDocumentsByDescription(description) {\n      var _this10 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          if (!description) {\n            console.log('Veuillez entrer une description.');\n            return;\n          }\n          // Filtrer les documents pour la description spécifiée\n          const filteredDocuments = _this10.documents.filter(document => document.description === description);\n          if (filteredDocuments.length > 0) {\n            console.log('Documents trouvés avec la description', description, ':', filteredDocuments);\n            _this10.documents = filteredDocuments;\n          } else {\n            console.log('Aucun document trouvé avec la description', description);\n          }\n        } catch (error) {\n          console.error('Erreur lors de la recherche des documents pour la description :', error);\n        }\n      })();\n    }\n  }\n  _PatientpagePage = PatientpagePage;\n  _PatientpagePage.ɵfac = function PatientpagePage_Factory(t) {\n    return new (t || _PatientpagePage)(i0.ɵɵdirectiveInject(i1.AngularFireStorage), i0.ɵɵdirectiveInject(i2.AngularFirestore), i0.ɵɵdirectiveInject(i3.ToastController), i0.ɵɵdirectiveInject(i3.ModalController), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.Router));\n  };\n  _PatientpagePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _PatientpagePage,\n    selectors: [[\"app-patientpage\"]],\n    decls: 18,\n    vars: 5,\n    consts: [[\"routerLink\", \"/patient\", \"slot\", \"start\", \"fill\", \"clear\"], [2, \"text-align\", \"center\"], [3, \"click\"], [1, \"complet\"], [4, \"ngIf\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"Choisissez le sexe\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"femme\"], [\"value\", \"homme\"], [\"placeholder\", \"Choisissez le groupe sanguin\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"A+\"], [\"value\", \"A-\"], [\"value\", \"B+\"], [\"value\", \"B-\"], [\"value\", \"AB+\"], [\"value\", \"AB-\"], [\"value\", \"O+\"], [\"value\", \"O-\"], [\"placeholder\", \"Choisissez la situation familiale\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"C\\u00E9libataire\"], [\"value\", \"Mari\\u00E9(e)\"], [\"value\", \"Divorc\\u00E9(e)\"], [\"value\", \"Veuf/Veuve\"], [3, \"ngModel\", \"ngModelChange\"], [\"type\", \"email\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"tel\", 3, \"ngModel\", \"ngModelChange\"], [\"position\", \"floating\"], [\"rows\", \"6\", 3, \"ngModel\", \"ngModelChange\"], [\"expand\", \"block\", 3, \"click\"], [3, \"ngSubmit\"], [\"searchForm\", \"ngForm\"], [\"type\", \"date\", \"name\", \"consultationDate\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"middle\"], [\"type\", \"submit\", 3, \"disabled\"], [4, \"ngFor\", \"ngForOf\"], [\"color\", \"primary\", 3, \"click\"], [\"placeholder\", \"Rechercher\"], [1, \"upload-document\"], [\"type\", \"file\", \"id\", \"fileInput\", \"name\", \"fileInput\", \"accept\", \"*/*\", 3, \"change\"], [\"type\", \"text\", \"placeholder\", \"entrer une description a rechercher\", \"color\", \"primary\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"placeholder\", \"Enter document description\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"ion-text-end\", 3, \"click\"], [\"name\", \"send-outline\"], [\"alt\", \"Selected Image\", 3, \"src\"], [\"width\", \"60\", \"height\", \"60\", 3, \"src\"], [\"float\", \"right\", \"target\", \"_blank\", 3, \"href\"]],\n    template: function PatientpagePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-button\", 0);\n        i0.ɵɵtext(2, \"retour\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"ion-toolbar\")(4, \"ion-title\", 1);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"ion-toolbar\")(7, \"ion-segment\")(8, \"ion-segment-button\", 2);\n        i0.ɵɵlistener(\"click\", function PatientpagePage_Template_ion_segment_button_click_8_listener() {\n          return ctx.fiche();\n        });\n        i0.ɵɵtext(9, \"Fiche Patient\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"ion-segment-button\", 2);\n        i0.ɵɵlistener(\"click\", function PatientpagePage_Template_ion_segment_button_click_10_listener() {\n          return ctx.consultation();\n        });\n        i0.ɵɵtext(11, \"Consultations\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"ion-segment-button\", 2);\n        i0.ɵɵlistener(\"click\", function PatientpagePage_Template_ion_segment_button_click_12_listener() {\n          return ctx.document();\n        });\n        i0.ɵɵtext(13, \"Documents\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(14, \"ion-content\", 3);\n        i0.ɵɵtemplate(15, PatientpagePage_ion_card_15_Template, 126, 18, \"ion-card\", 4)(16, PatientpagePage_ion_card_16_Template, 14, 3, \"ion-card\", 4)(17, PatientpagePage_ion_card_17_Template, 27, 3, \"ion-card\", 4);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate2(\"info patients : \", ctx.patient == null ? null : ctx.patient.nom, \" \", ctx.patient == null ? null : ctx.patient.prenom, \"\");\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.Vfiche);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.Vconsultation);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.Vdocument);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.NgModel, i6.NgForm, i3.IonButton, i3.IonCard, i3.IonCardContent, i3.IonCardHeader, i3.IonCardTitle, i3.IonContent, i3.IonHeader, i3.IonIcon, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonList, i3.IonSearchbar, i3.IonSegment, i3.IonSegmentButton, i3.IonSelect, i3.IonSelectOption, i3.IonTextarea, i3.IonTitle, i3.IonToolbar, i3.NumericValueAccessor, i3.SelectValueAccessor, i3.TextValueAccessor, i3.RouterLinkDelegate, i4.RouterLink],\n    styles: [\".complet[_ngcontent-%COMP%]{width:100%;height:100%}.upload[_ngcontent-%COMP%]{position:sticky;width:90%;height:90%;background-size:cover;display:flex;align-items:center;justify-content:center}.upload-document[_ngcontent-%COMP%]{border:2px dashed #ccc;padding:10px;cursor:pointer;display:inline-block;width:100%;text-align:center;color:#333;background-image:url(upload.258493b034e3e7d7.png);background-size:contain;background-position:center;background-repeat:no-repeat}.upload-document[_ngcontent-%COMP%]:hover{border-color:#aaa}.right[_ngcontent-%COMP%]{float:right}.ion-text-end[_ngcontent-%COMP%]{text-align:end!important;float:right}.image[_ngcontent-%COMP%]{width:40%;height:40%}\"]\n  });\n  return PatientpagePage;\n})();\nexport let consultationdate1;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}