{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/MacBook Air/Desktop/shifai1VV/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _ConsultationModifPage;\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./consultation-modif.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./consultation-modif.page.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { ToastController } from '@ionic/angular';\nimport { medecinUid } from 'src/firebaseConfig';\nimport { patientUidA } from '../patient/patient.page';\nimport { consultationdate1 } from '../patientpage/patientpage.page';\nlet ConsultationModifPage = (_ConsultationModifPage = class ConsultationModifPage {\n  constructor(route, firestore, router, toastController) {\n    this.route = route;\n    this.firestore = firestore;\n    this.router = router;\n    this.toastController = toastController;\n    this.consultation = consultationdate1;\n  }\n  ngOnInit() {\n    console.log(consultationdate1);\n  }\n  updateConsultation(consultation0) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        // Récupérer la référence du document de consultation en fonction de la date\n        const querySnapshot = yield _this.firestore.collection('medecin').doc(medecinUid.uid).collection('patients').doc(patientUidA).collection('consultations').ref.where('date', '==', consultation0.date).get();\n        // Vérifier s'il y a des résultats\n        if (!querySnapshot.empty) {\n          // Mettre à jour les détails de la première consultation correspondant à la date\n          const consultationDoc = querySnapshot.docs[0]; // Prendre le premier document trouvé\n          const consultationData = {\n            date: consultation0.date,\n            details: consultation0.details,\n            poids: consultation0.poids,\n            tailles: consultation0.tailles,\n            temperature: consultation0.temperature,\n            frequenceCardiaque: consultation0.frequenceCardiaque,\n            glycemie: consultation0.glycemie,\n            pressionArterielle: consultation0.pressionArterielle,\n            observation: consultation0.observation,\n            diagnosticMedical: consultation0.diagnosticMedical\n          };\n        } else {\n          console.error('Aucune consultation trouvée pour cette date.');\n          // Afficher un message d'erreur\n          const toast = yield _this.toastController.create({\n            message: 'Aucune consultation trouvée pour cette date.',\n            duration: 1500,\n            position: 'top',\n            color: 'danger'\n          });\n          yield toast.present();\n        }\n      } catch (error) {\n        console.error('Erreur lors de la modification de la consultation :', error);\n        // Afficher un message d'erreur\n        const toast = yield _this.toastController.create({\n          message: 'Erreur lors de la modification de la consultation.',\n          duration: 1500,\n          position: 'top',\n          color: 'danger'\n        });\n        yield toast.present();\n      }\n    })();\n  }\n  loadConsultation() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const consultationSnapshot = yield _this2.firestore.collection('medecin').doc(medecinUid.uid).collection('patients').doc(patientUidA).collection('consultations').ref.where('date', '==', consultationdate1.date).get();\n        if (consultationSnapshot) {} else {\n          console.log('La consultation n\\'existe pas.');\n        }\n      } catch (error) {\n        console.error('Erreur lors du chargement de la consultation :', error);\n      }\n    })();\n  }\n}, _ConsultationModifPage.ctorParameters = () => [{\n  type: ActivatedRoute\n}, {\n  type: AngularFirestore\n}, {\n  type: Router\n}, {\n  type: ToastController\n}], _ConsultationModifPage);\nConsultationModifPage = __decorate([Component({\n  selector: 'app-consultationmodif',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], ConsultationModifPage);\nexport { ConsultationModifPage };","map":{"version":3,"names":["Component","ActivatedRoute","Router","AngularFirestore","ToastController","medecinUid","patientUidA","consultationdate1","ConsultationModifPage","_ConsultationModifPage","constructor","route","firestore","router","toastController","consultation","ngOnInit","console","log","updateConsultation","consultation0","_this","_asyncToGenerator","querySnapshot","collection","doc","uid","ref","where","date","get","empty","consultationDoc","docs","consultationData","details","poids","tailles","temperature","frequenceCardiaque","glycemie","pressionArterielle","observation","diagnosticMedical","error","toast","create","message","duration","position","color","present","loadConsultation","_this2","consultationSnapshot","__decorate","selector","template","__NG_CLI_RESOURCE__0"],"sources":["C:\\Users\\MacBook Air\\Desktop\\shifai1VV\\src\\app\\consultation-modif\\consultation-modif.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { ToastController } from '@ionic/angular';\nimport { getConsultationByDateAndUidPat, medecinUid } from 'src/firebaseConfig';\nimport { patientUidA } from '../patient/patient.page';\nimport { consultationdate1 } from '../patientpage/patientpage.page';\n\ninterface consultationData {\n  date:string;\n  details?: string;\n  poids?: string;\n  tailles?: string;\n  temperature?: string;\n  frequenceCardiaque?: string;\n  glycemie?: string;\n  pressionArterielle?: string;\n  observation?: string;\n  diagnosticMedical?: string;\n}\n\n@Component({\n  selector: 'app-consultationmodif',\n  templateUrl: './consultation-modif.page.html',\n  styleUrls: ['./consultation-modif.page.scss'],\n})\nexport class ConsultationModifPage implements OnInit {\nconsultation:consultationData=consultationdate1;\n\n  constructor(\n    private route: ActivatedRoute,\n    private firestore: AngularFirestore,\n    private router: Router,\n    private toastController: ToastController\n  ) {}\n\n  ngOnInit() {\n    console.log(consultationdate1)\n   \n  }\n\n  async updateConsultation(consultation0: consultationData) {\n    try {\n      // Récupérer la référence du document de consultation en fonction de la date\n      const querySnapshot = await this.firestore.collection('medecin').doc(medecinUid.uid)\n        .collection('patients').doc(patientUidA).collection('consultations')\n        .ref.where('date', '==', consultation0.date).get();\n      \n      // Vérifier s'il y a des résultats\n      if (!querySnapshot.empty) {\n        // Mettre à jour les détails de la première consultation correspondant à la date\n        const consultationDoc = querySnapshot.docs[0]; // Prendre le premier document trouvé\n        const consultationData: consultationData = {\n          date: consultation0.date,\n          details: consultation0.details,\n          poids: consultation0.poids,\n          tailles: consultation0.tailles,\n          temperature: consultation0.temperature,\n          frequenceCardiaque: consultation0.frequenceCardiaque,\n          glycemie: consultation0.glycemie,\n          pressionArterielle: consultation0.pressionArterielle,\n          observation: consultation0.observation,\n          diagnosticMedical: consultation0.diagnosticMedical,\n        };\n\n      } else {\n        console.error('Aucune consultation trouvée pour cette date.');\n\n        // Afficher un message d'erreur\n        const toast = await this.toastController.create({\n          message: 'Aucune consultation trouvée pour cette date.',\n          duration: 1500,\n          position: 'top',\n          color: 'danger',\n        });\n        await toast.present();\n      }\n    } catch (error) {\n      console.error('Erreur lors de la modification de la consultation :', error);\n\n      // Afficher un message d'erreur\n      const toast = await this.toastController.create({\n        message: 'Erreur lors de la modification de la consultation.',\n        duration: 1500,\n        position: 'top',\n        color: 'danger',\n      });\n      await toast.present();\n    }\n}\n\n\n  async loadConsultation() {\n    try {\n      const consultationSnapshot = await this.firestore.collection('medecin').doc(medecinUid.uid).collection('patients').doc(patientUidA)\n      .collection('consultations')\n      .ref.where('date', '==', consultationdate1.date).get();\n      if (consultationSnapshot) {\n \n      } else {\n        console.log('La consultation n\\'existe pas.');\n      }\n    } catch (error) {\n      console.error('Erreur lors du chargement de la consultation :', error);\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}