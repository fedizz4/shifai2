"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6206],{6206:(v,f,l)=>{l.r(f),l.d(f,{ConsultationMedPageModule:()=>T});var m=l(6814),u=l(95),a=l(878),p=l(2344),d=l(5861),g=l(1497),t=l(9212),h=l(6369);function M(o,s){if(1&o&&(t.TgZ(0,"ion-item"),t._uU(1),t.qZA()),2&o){const r=s.$implicit;t.xp6(),t.hij(" ",r.date," ")}}function C(o,s){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-card",12)(2,"ion-card-header")(3,"ion-card-title")(4,"b"),t._uU(5),t.qZA()()(),t.TgZ(6,"ion-card-content")(7,"ion-list"),t.YNc(8,M,2,1,"ion-item",11),t.qZA()()()()),2&o){const r=s.$implicit;t.xp6(5),t.AsE("Info patient ",r.prenom," ",r.nom," "),t.xp6(3),t.Q6J("ngForOf",r.consultations)}}const Z=[{path:"",component:(()=>{var o;class s{constructor(n){this.firestore=n,this.consultationDate="",this.consultations=[],this.uid=g.Ru.uid,this.patients=[],this.consultationsCollection=this.firestore.collection("consultations")}ngOnInit(){var n=this;return(0,d.Z)(function*(){console.log("Med UID:",n.uid),yield n.getPatients()})()}searchConsultations(){var n=this;return(0,d.Z)(function*(){try{if(!n.consultationDate)return void console.log("Veuillez s\xe9lectionner une date de consultation.");n.patients.forEach(e=>{e.consultations=e.consultations.filter(i=>i.date===n.consultationDate)})}catch(e){console.error("Error loading consultations for date:",e)}})()}getConsultationsForDate(n){var e=this;return(0,d.Z)(function*(){try{const i=yield e.consultationsCollection.ref.where("date","==",n).get();return i.empty?[]:i.docs.map(c=>c.data())}catch(i){throw console.error("Error fetching consultations for date:",i),i}})()}getPatients(){var n=this;return(0,d.Z)(function*(){try{const e=yield(0,g.m3)(n.firestore,n.uid);if(console.log(e),e.length>0){n.patients=e.map(i=>({...i,consultations:[]})),console.log("patients",n.patients);for(const i of n.patients){const c=yield(0,g.Kc)(n.firestore,g.Ru.uid,i.uid);c&&c.length>0&&(i.consultations=c)}}console.log("Patients trouv\xe9s :",n.patients)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des patients :",e)}})()}}return(o=s).\u0275fac=function(n){return new(n||o)(t.Y36(h.ST))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-consultation-med"]],decls:27,vars:5,consts:[[3,"translucent"],["routerLink","/app-medecin","slot","start","fill","clear"],[3,"fullscreen"],[3,"ngSubmit"],["searchForm","ngForm"],["type","date","name","consultationDate","required","",3,"ngModel","ngModelChange"],[1,"middle"],["type","submit",3,"disabled"],[3,"click"],["collapse","condense"],["size","large"],[4,"ngFor","ngForOf"],[1,"rempli"]],template:function(n,e){if(1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-button",1),t._uU(3,"retour"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Consultations"),t.qZA()()(),t.TgZ(6,"ion-content",2)(7,"ion-header"),t._UZ(8,"br"),t.TgZ(9,"form",3,4),t.NdJ("ngSubmit",function(){return e.searchConsultations()}),t.TgZ(11,"ion-item")(12,"ion-label"),t._uU(13,"Date de consultation"),t.qZA(),t.TgZ(14,"ion-input",5),t.NdJ("ngModelChange",function(c){return e.consultationDate=c}),t.qZA()(),t.TgZ(15,"div",6)(16,"ion-button",7),t._uU(17,"Rechercher"),t.qZA(),t.TgZ(18,"ion-button",8),t.NdJ("click",function(){return e.getPatients()}),t._uU(19,"reinitialiser"),t.qZA()()(),t._UZ(20,"br"),t.qZA(),t.TgZ(21,"ion-header",9)(22,"ion-toolbar")(23,"ion-title",10),t._uU(24,"Consultations"),t.qZA()()(),t.TgZ(25,"ion-list"),t.YNc(26,C,9,3,"ion-item",11),t.qZA()()),2&n){const i=t.MAs(10);t.Q6J("translucent",!0),t.xp6(6),t.Q6J("fullscreen",!0),t.xp6(8),t.Q6J("ngModel",e.consultationDate),t.xp6(2),t.Q6J("disabled",!i.valid),t.xp6(10),t.Q6J("ngForOf",e.patients)}},dependencies:[m.sg,u._Y,u.JJ,u.JL,u.Q7,u.On,u.F,a.YG,a.PM,a.FN,a.Zi,a.Dq,a.W2,a.Gu,a.pK,a.Ie,a.Q$,a.q_,a.wd,a.sr,a.j9,a.YI,p.rH],styles:[".rempli[_ngcontent-%COMP%]{width:100%;height:auto}.middle[_ngcontent-%COMP%]{text-align:center}"]}),s})()}];let P=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(Z),p.Bz]}),s})(),T=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.ez,u.u5,a.Pc,P]}),s})()}}]);