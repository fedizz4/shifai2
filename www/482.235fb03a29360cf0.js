"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[482],{482:(S,y,a)=>{a.r(y),a.d(y,{AfficheMedecinPageModule:()=>J});var h=a(6814),p=a(95),i=a(878),Z=a(2344),c=a(5861),m=a(1497),u=a(8199),e=a(9212),_=a(6369);function w(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"ion-button",4),e.NdJ("click",function(){const l=e.CHM(r).index,d=e.oxw();return e.KtG(d.toggleSelection(l))}),e._uU(1),e.qZA()}if(2&t){const r=s.$implicit,o=s.index,n=e.oxw();e.Q6J("disabled",n.isHourTaken(o)),e.xp6(),e.Oqu(r)}}let f,U=(()=>{var t;class s{constructor(o,n){this.modalController=o,this.firestore=n,this.selectedHour="",this.workHours=["8H00 - 8H30","8H30 - 9H00","9H00 - 9H30","9H30 - 10H00","10H00 - 10H30","10H30 - 11H00","11H00 - 11H30","11H30 - 12H00","14H00 - 14H30","14H30 - 15H00","15H00 - 15H30","15H30 - 16H00","16H00 - 16H30"],this.hourAvailability=Array(this.workHours.length).fill(!0)}ngOnInit(){console.log("Selected date:",g),this.getTakenHoursByDate(u.R,g)}getTakenHoursByDate(o,n){var l=this;return(0,c.Z)(function*(){const M=yield l.firestore.collection("medecin").doc(o).collection("rdv",H=>H.where("date","==",n)).get().toPromise();M?(l.hourAvailability=Array.from({length:l.workHours.length},()=>!0),M.docs.forEach(H=>{const k=H.data();if(k&&k.heure){const x=l.workHours.indexOf(k.heure);-1!==x&&(l.hourAvailability[x]=!1)}}),console.log("Hour availability:",l.hourAvailability)):console.error("No snapshot available.")})()}isHourTaken(o){return!this.hourAvailability[o]}toggleSelection(o){f=this.workHours[o],console.log("Selected date:",g),console.log("Selected hour:",f),console.log("Med:",u.R)}openrdvModal(){var o=this;return(0,c.Z)(function*(){const n=yield o.modalController.create({component:T,cssClass:"work-hours-modal"});return o.close(),yield n.present()})()}close(){this.modalController.dismiss()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(i.IN),e.Y36(_.ST))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-heure"]],decls:11,vars:1,consts:[["slot","end"],[3,"click"],["slot","start"],[3,"disabled","click",4,"ngFor","ngForOf"],[3,"disabled","click"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Personne"),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return n.openrdvModal()}),e._uU(6,"Suivant"),e.qZA()(),e.TgZ(7,"ion-buttons",2)(8,"ion-button",1),e.NdJ("click",function(){return n.close()}),e._uU(9,"Fermer"),e.qZA()()()(),e.YNc(10,w,2,2,"ion-button",3)),2&o&&(e.xp6(10),e.Q6J("ngForOf",n.workHours))},dependencies:[h.sg,i.YG,i.Sm,i.Gu,i.wd,i.sr]}),s})();var v=a(1086);let T=(()=>{var t;class s{constructor(o,n){this.modalController=o,this.firestore=n,this.medecin={nom:"",prenom:"",uid:""},this.selectedTime=f,this.dates=g,this.patientName=P,this.patientnom=C,this.uid=v.z,this.nommed=this.medecin.nom,this.medecinuid=u.R}ngOnInit(){var o=this;return(0,c.Z)(function*(){console.log("prenom = ",C),console.log("time = ",f),console.log("medecinuid =",u.R),console.log("useruid =",v.z),console.log("date selectionne =",g);try{const n=yield(0,m.Fm)(o.firestore,u.R);n&&n.length>0&&(o.medecin=n[0],o.nommed=o.medecin.nom)}catch(n){console.error("Erreur lors de la r\xe9cup\xe9ration des informations du m\xe9decin:",n)}})()}saveRendezVous(){var o=this;return(0,c.Z)(function*(){const n={date:g,heure:f,nom:C,prenom:P,useruid:v.z,medecinNom:o.medecin.nom,medecinPrenom:o.medecin.prenom,medecinuid:u.R,key:yield(0,m.Cf)()},l=n.key;(0,m.DX)(o.firestore,u.R,n).then(()=>{console.log("Rendez-vous enregistr\xe9 avec succ\xe8s."),console.log("key= ",l),o.closeModal()}).catch(d=>{console.error("Erreur lors de l'enregistrement du rendez-vous :",d)}),(0,m.Gs)(o.firestore,v.z,n).then(()=>{console.log("Rendez-vous enregistr\xe9 avec succ\xe8s chez le patient."),o.closeModal()}).catch(d=>{console.error("Erreur lors de l'enregistrement du rendez-vous chez le patient:",d)});try{const d=yield(0,m.sD)(o.firestore,u.R,n.nom,n.prenom),M={date:n.date,details:""};d?yield(0,m.Vw)(o.firestore,u.R,d,M):yield(0,m.Hi)(o.firestore,u.R,n),console.log("Rendez-vous ajout\xe9 avec succ\xe8s.")}catch(d){console.error("Erreur lors de l'ajout du rendez-vous :",d)}})()}closeModal(){this.modalController.dismiss()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(i.IN),e.Y36(_.ST))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-rendezvousmodal"]],inputs:{medecin:"medecin"},decls:20,vars:4,consts:[["slot","end"],[3,"click"],["name","close"],[1,"modal-buttons"],["expand","block","color","primary",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Ajouter un rendez-vous"),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return n.closeModal()}),e._UZ(6,"ion-icon",2),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"ion-content")(9,"p"),e._uU(10),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA(),e.TgZ(15,"p"),e._uU(16),e.qZA()(),e.TgZ(17,"div",3)(18,"ion-button",4),e.NdJ("click",function(){return n.saveRendezVous()}),e._uU(19,"Enregistrer"),e.qZA()()()),2&o&&(e.xp6(10),e.hij("Heure s\xe9lectionn\xe9e : ",n.selectedTime,""),e.xp6(2),e.hij("prenom du patient : ",n.patientName,""),e.xp6(2),e.hij("nom du patient : ",n.patientnom,""),e.xp6(2),e.hij("date de rdv : ",n.dates,""))},dependencies:[i.YG,i.Sm,i.W2,i.Gu,i.gu,i.wd,i.sr]}),s})();function j(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"ion-select-option",7)(1,"ion-button",1),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.toggleSelection(n.selectedDate))}),e._uU(2),e.qZA()()}if(2&t){const r=s.$implicit;e.Q6J("value",r),e.xp6(2),e.Oqu(r)}}let g,F=(()=>{var t;class s{constructor(o,n){this.modalController=o,this.firestore=n,this.rdvs=[],this.takenHours=[],this.hoursAvailable=new Array(24).fill(!0),this.selectedDate="",this.selectedDate=g}ngOnInit(){var o=this;return(0,c.Z)(function*(){const n=yield(0,m.dB)(o.firestore,u.R);console.log("rdvs",n)})()}close(){this.modalController.dismiss()}toggleSelection(o){g=o,console.log("Date s\xe9lectionn\xe9e :",g),console.log("med   ",u.R),this.openHeureModal()}generateDateList(){const o=[],n=new Date;for(let l=0;l<8;l++){const d=new Date(n);if(d.setDate(n.getDate()+l),0!==d.getDay()&&6!==d.getDay()){const M=this.convertDateToString(d);o.push(M)}}return o}convertDateToString(o){return`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")}`}openWorkHoursModal(){var o=this;return(0,c.Z)(function*(){return yield(yield o.modalController.create({component:b,cssClass:"personne-modal"})).present()})()}openHeureModal(){var o=this;return(0,c.Z)(function*(){return yield(yield o.modalController.create({component:U,cssClass:"personne-modal"})).present()})()}openrdvModal(){var o=this;return(0,c.Z)(function*(){const n=yield o.modalController.create({component:T,cssClass:"work-hours-modal"});return yield n.present()})()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(i.IN),e.Y36(_.ST))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-work-hours-modal"]],decls:16,vars:2,consts:[["slot","end"],[3,"click"],["slot","start"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-buttons"],["expand","block","color","primary",3,"click"],[3,"value"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Personne"),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return n.openrdvModal()}),e._uU(6,"Suivant"),e.qZA()(),e.TgZ(7,"ion-buttons",2)(8,"ion-button",1),e.NdJ("click",function(){return n.close()}),e._uU(9,"Fermer"),e.qZA()()()(),e.TgZ(10,"ion-content")(11,"ion-select",3),e.NdJ("ngModelChange",function(d){return n.selectedDate=d}),e.YNc(12,j,3,2,"ion-select-option",4),e.qZA(),e.TgZ(13,"div",5)(14,"ion-button",6),e.NdJ("click",function(){return n.toggleSelection(n.selectedDate)}),e._uU(15,"S\xe9lectionner une heure"),e.qZA()()()),2&o&&(e.xp6(11),e.Q6J("ngModel",n.selectedDate),e.xp6(),e.Q6J("ngForOf",n.generateDateList()))},dependencies:[h.sg,p.JJ,p.On,i.YG,i.Sm,i.W2,i.Gu,i.t9,i.n0,i.wd,i.sr,i.QI],styles:['@charset "UTF-8";.work-hours-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-left:10%}.work-hour-button[_ngcontent-%COMP%]{width:70%}']}),s})(),O=(()=>{var t;class s{constructor(o,n){this.firestore=o,this.modalController=n,this.nom="",this.prenom="",this.uidPersonne=v.z}ngOnInit(){console.log("uid = ",this.uidPersonne)}savePerson(){var o=this;return(0,c.Z)(function*(){try{yield(0,m.v5)(o.firestore,o.nom,o.prenom,o.uidPersonne),console.log("personne ajouter ",o.nom," et ",o.prenom)}catch(n){console.error("Erreur lors de l'enregistrement des donn\xe9es de la personne :",n)}yield o.modalController.dismiss()})()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(_.ST),e.Y36(i.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-ajout-personne-modal"]],decls:11,vars:2,consts:[["position","stacked"],["type","text","name","nom","required","",3,"ngModel","ngModelChange"],["type","text","name","prenom","required","",3,"ngModel","ngModelChange"],["expand","block","type","submit",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"form")(1,"ion-item")(2,"ion-label",0),e._uU(3,"Nom"),e.qZA(),e.TgZ(4,"ion-input",1),e.NdJ("ngModelChange",function(d){return n.nom=d}),e.qZA()(),e.TgZ(5,"ion-item")(6,"ion-label",0),e._uU(7,"Pr\xe9nom"),e.qZA(),e.TgZ(8,"ion-input",2),e.NdJ("ngModelChange",function(d){return n.prenom=d}),e.qZA()(),e.TgZ(9,"ion-button",3),e.NdJ("click",function(){return n.savePerson()}),e._uU(10,"Enregistrer"),e.qZA()()),2&o&&(e.xp6(4),e.Q6J("ngModel",n.nom),e.xp6(4),e.Q6J("ngModel",n.prenom))},dependencies:[p._Y,p.JJ,p.JL,p.Q7,p.On,p.F,i.YG,i.pK,i.Ie,i.Q$,i.j9]}),s})();function z(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"div")(1,"label")(2,"input",4),e.NdJ("change",function(){const l=e.CHM(r).$implicit,d=e.oxw();return e.KtG(d.toggleSelection(l))}),e.qZA(),e._uU(3),e.qZA()()}if(2&t){const r=s.$implicit;e.xp6(2),e.Q6J("checked",r.selected),e.xp6(),e.AsE(" ",r.nom," ",r.prenom," ")}}let C,P,R,b=(()=>{var t;class s{constructor(o,n){this.firestore=o,this.modalController=n,this.people=[],this.person=[],this.selectedPersonne=null}ngOnInit(){this.fetchPersonne()}fetchPersonne(){var o=this;return(0,c.Z)(function*(){try{const l=yield(0,m.x3)(o.firestore,"D1UoD4reN0QvhgGDFnarodjbE782");null!==l&&(o.people=o.people.map(d=>({...d,selected:!1})),l.forEach(d=>{o.people.push(d)}),console.log("Personne trouv\xe9e :",o.people))}catch(n){console.error("Erreur lors de la r\xe9cup\xe9ration de la personne par UID :",n)}})()}toggleSelection(o){this.selectedPersonne=o,C=o.nom,P=o.prenom,R=o.uid,console.log("Nom de la personne s\xe9lectionn\xe9e :",C),console.log("Pr\xe9nom de la personne s\xe9lectionn\xe9e :",P)}close(){this.modalController.dismiss()}openWorkHoursModal(){var o=this;return(0,c.Z)(function*(){const n=yield o.modalController.create({component:F,cssClass:"work-hours-modal"});return yield n.present()})()}ajoutPersonneModal(){var o=this;return(0,c.Z)(function*(){return yield(yield o.modalController.create({component:O,cssClass:"work-hours-modal"})).present()})()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(_.ST),e.Y36(i.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-personne-modal"]],decls:13,vars:1,consts:[["slot","end"],[3,"click"],["slot","start"],[4,"ngFor","ngForOf"],["type","radio","name","selectedPersonne",3,"checked","change"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Personne"),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return n.openWorkHoursModal()}),e._uU(6,"Suivant"),e.qZA()(),e.TgZ(7,"ion-buttons",2)(8,"ion-button",1),e.NdJ("click",function(){return n.close()}),e._uU(9,"Fermer"),e.qZA()()()(),e.YNc(10,z,4,3,"div",3),e.TgZ(11,"ion-button",1),e.NdJ("click",function(){return n.ajoutPersonneModal()}),e._uU(12,"Ajouter une personne"),e.qZA()),2&o&&(e.xp6(10),e.Q6J("ngForOf",n.people))},dependencies:[h.sg,i.YG,i.Sm,i.Gu,i.wd,i.sr]}),s})();var A=a(6166);function q(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"div")(1,"div",5)(2,"div",6)(3,"div",7),e._uU(4,"Coordonn\xe9es"),e.qZA(),e.TgZ(5,"ion-list")(6,"ion-item")(7,"ion-label",8),e._uU(8,"Nom:"),e.qZA(),e.TgZ(9,"ion-text"),e._uU(10),e.qZA()(),e.TgZ(11,"ion-item")(12,"ion-label",8),e._uU(13,"Email:"),e.qZA(),e.TgZ(14,"ion-text"),e._uU(15),e.qZA()(),e.TgZ(16,"ion-item")(17,"ion-label",8),e._uU(18,"T\xe9l\xe9phone:"),e.qZA(),e.TgZ(19,"ion-text"),e._uU(20),e.qZA()()()(),e.TgZ(21,"div",9)(22,"div",7),e._uU(23,"Description"),e.qZA(),e.TgZ(24,"ion-list")(25,"ion-item")(26,"ion-label",8),e._uU(27,"Age:"),e.qZA(),e.TgZ(28,"ion-text"),e._uU(29,"45"),e.qZA()(),e.TgZ(30,"ion-item")(31,"ion-label",8),e._uU(32,"Adresse:"),e.qZA(),e.TgZ(33,"ion-text"),e._uU(34,"Zarzis"),e.qZA()(),e.TgZ(35,"ion-item")(36,"ion-label",8),e._uU(37,"Description:"),e.qZA(),e.TgZ(38,"ion-text"),e._uU(39,"medecin generaliste"),e.qZA()()()()(),e.TgZ(40,"ion-button",10),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.openWorkHoursModal())}),e._UZ(41,"ion-icon",11),e._uU(42,"\xa0Prendre Rendez-vous"),e.qZA()()}if(2&t){const r=e.oxw();e.xp6(10),e.AsE("",r.medecin[0].nom," ",r.medecin[0].prenom,""),e.xp6(5),e.Oqu(r.medecin[0].email),e.xp6(5),e.hij("",r.medecin[0].telephone," ")}}const N=[{path:"",component:(()=>{var t;class s{constructor(o,n){this.firestore=o,this.modalController=n,this.medecinid="",this.m="",this.workHours=[{start:"08:00",end:"08:30"},{start:"08:30",end:"09:00"},{start:"09:00",end:"09:30"},{start:"09:30",end:"10:00"},{start:"10:00",end:"10:30"},{start:"10:30",end:"11:00"},{start:"11:00",end:"11:30"},{start:"11:30",end:"12:00"},{start:"14:00",end:"14:30"},{start:"14:30",end:"15:00"},{start:"15:00",end:"15:30"},{start:"15:30",end:"16:00"},{start:"16:00",end:"16:30"},{start:"16:30",end:"17:00"}]}ngOnInit(){this.medecinid=A.l,this.m=A.l,console.log("dfsdfdsfds",this.m),this.m?(this.medecinid=A.l,console.log("M\xe9decin UID r\xe9cup\xe9r\xe9 non :",this.medecinid),this.fetchMedecin(this.medecinid),console.log(this.medecin[0].nom)):(this.medecinid=u.R,this.medecinid?(console.log("M\xe9decin UID r\xe9cup\xe9r\xe9 non :",this.medecinid),this.fetchMedecin(this.medecinid),console.log(this.medecin[0].nom)):console.error("Erreur: medecinUid est undefined."))}fetchMedecin(o){var n=this;return(0,c.Z)(function*(){try{n.medecin=yield(0,m.Fm)(n.firestore,o),console.log("M\xe9decin r\xe9cup\xe9r\xe9 :",n.medecin)}catch(l){console.error("Erreur lors de la r\xe9cup\xe9ration du m\xe9decin :",l)}})()}openWorkHoursModal(){var o=this;return(0,c.Z)(function*(){return yield(yield o.modalController.create({component:b,cssClass:"personne-modal"})).present()})()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(_.ST),e.Y36(i.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-affiche-medecin"]],decls:12,vars:3,consts:[[3,"fullscreen"],[3,"translucent"],["color","primary"],["slot","start","routerLink","/recherche-medecin","fill","clear","color","light"],[4,"ngIf"],[1,"profile-details"],[1,"contact-details"],[1,"title"],["position","stacked"],[1,"description-details"],[3,"click"],["name","calendar-outline"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-content",0)(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-button",3),e._uU(4,"Retour"),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Header Demi-Cercle"),e.qZA()()(),e.YNc(7,q,43,4,"div",4),e._UZ(8,"br")(9,"br")(10,"br")(11,"br"),e.qZA()),2&o&&(e.Q6J("fullscreen",!0),e.xp6(),e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",n.medecin))},dependencies:[h.O5,i.YG,i.W2,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.yW,i.wd,i.sr,i.YI,Z.rH],styles:['@charset "UTF-8";.header[_ngcontent-%COMP%]{height:100px;width:100%;background-color:#3575fe;border-radius:0% 0% 50% 50%}.footer[_ngcontent-%COMP%]{padding-bottom:10%;padding-left:50%;padding-right:50%}.header[_ngcontent-%COMP%]{height:180px;background-color:#3575fe;width:100%;padding-top:1px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;text-align:center;font-weight:700}.space-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0% 0% 50% 50%}.profile-details[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:20px}.contact-details[_ngcontent-%COMP%]{width:auto}.title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:10px}ion-list[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0}ion-label[_ngcontent-%COMP%]{font-weight:700}ion-text[_ngcontent-%COMP%]{font-style:italic}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--border-radius: 0% 0% 50% 50%;--overflow: hidden}ion-header[_ngcontent-%COMP%]   .toolbar-background[_ngcontent-%COMP%]{height:120px}ion-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;top:50%;transform:translateY(-50%);text-align:center;width:100%}.work-hours-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.work-hour-button[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.work-hour-button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.work-hours-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-left:10%}.work-hour-button[_ngcontent-%COMP%]{width:70%}']}),s})()}];let D=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[Z.Bz.forChild(N),Z.Bz]}),s})(),J=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.ez,p.u5,i.Pc,D]}),s})()}}]);