"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[797],{797:(E,A,m)=>{m.r(A),m.d(A,{ParametreSecretairePageModule:()=>D});var h=m(6814),a=m(95),o=m(878),v=m(2344),c=m(5861),f=m(1497),e=m(9212),_=m(6369);let P=(()=>{var i;class s{constructor(r,t,n){this.modalController=r,this.firestore=t,this.fb=n,this.myForm=this.fb.group({prenom:["",a.kI.required],nom:["",a.kI.required],numero:["",a.kI.required],gmail:["",[a.kI.required,a.kI.email]],password:["",a.kI.required]})}ngOnInit(){console.log("uid   ",g)}onSubmit(){var r=this;return(0,c.Z)(function*(){r.myForm.valid&&(yield r.enregistrerSecretaire(),yield r.modalController.dismiss())})()}enregistrerSecretaire(){var r=this;return(0,c.Z)(function*(){var t,n,u,d,p;const F=null===(t=r.myForm.get("nom"))||void 0===t?void 0:t.value,Z=null===(n=r.myForm.get("prenom"))||void 0===n?void 0:n.value,M=null===(u=r.myForm.get("gmail"))||void 0===u?void 0:u.value,y=null===(d=r.myForm.get("numero"))||void 0===d?void 0:d.value,S=null===(p=r.myForm.get("password"))||void 0===p?void 0:p.value;try{yield(0,f.MJ)(r.firestore,F,Z,M,y,S,g),yield r.modalController.dismiss(),window.dispatchEvent(new Event("refreshPage")),console.log("Secr\xe9taire enregistr\xe9e avec succ\xe8s.")}catch(C){console.error("Erreur lors de l'enregistrement du secr\xe9taire :",C)}})()}fermer(){var r=this;return(0,c.Z)(function*(){yield r.modalController.dismiss()})()}}return(i=s).\u0275fac=function(r){return new(r||i)(e.Y36(o.IN),e.Y36(_.ST),e.Y36(a.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-formulaire"]],decls:21,vars:2,consts:[[3,"translucent"],["slot","end"],[3,"click"],["name","close"],[3,"formGroup"],["formControlName","prenom","label","Pr\xe9nom"],["formControlName","nom","label","Nom"],["formControlName","numero","label","Num\xe9ro"],["formControlName","gmail","label","Gmail"],["formControlName","password","type","password","label","Password"],["expand","full","type","submit",3,"click"]],template:function(r,t){1&r&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Formulaire"),e.qZA(),e.TgZ(4,"ion-buttons",1)(5,"ion-button",2),e.NdJ("click",function(){return t.fermer()}),e._UZ(6,"ion-icon",3),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"form",4)(9,"ion-item"),e._UZ(10,"ion-input",5),e.qZA(),e.TgZ(11,"ion-item"),e._UZ(12,"ion-input",6),e.qZA(),e.TgZ(13,"ion-item"),e._UZ(14,"ion-input",7),e.qZA(),e.TgZ(15,"ion-item"),e._UZ(16,"ion-input",8),e.qZA(),e.TgZ(17,"ion-item"),e._UZ(18,"ion-input",9),e.qZA(),e.TgZ(19,"ion-button",10),e.NdJ("click",function(){return t.enregistrerSecretaire()}),e._uU(20,"Soumettre"),e.qZA()()()),2&r&&(e.Q6J("translucent",!0),e.xp6(8),e.Q6J("formGroup",t.myForm))},dependencies:[a._Y,a.JJ,a.JL,a.sg,a.u,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.pK,o.Ie,o.wd,o.sr,o.j9]}),s})();var T=m(7394);let b=(()=>{var i;class s{constructor(r,t){this.firestore=r,this.modalController=t,this.secid=this.secretaireID}ngOnInit(){console.log("secretaireid",this.secretaireID)}confirmerSuppression(){(0,f.Bk)(this.firestore,this.secretaireID),this.modalController.dismiss({confirmed:!0}),window.dispatchEvent(new Event("refreshPage"))}fermerModal(){this.modalController.dismiss()}}return(i=s).\u0275fac=function(r){return new(r||i)(e.Y36(_.ST),e.Y36(o.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-supprimer-alert"]],inputs:{secretaireID:"secretaireID"},decls:19,vars:0,consts:[["slot","end"],[3,"click"],[1,"my-modal-class"]],template:function(r,t){1&r&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Confirmation de suppression"),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return t.fermerModal()}),e._uU(6,"Annuler"),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"ion-card",2)(9,"ion-card-header")(10,"ion-card-title"),e._uU(11,"supprimer secretaire"),e.qZA()(),e.TgZ(12,"ion-card-content"),e._uU(13," \xcates-vous s\xfbr de vouloir supprimer ce secr\xe9taire ? "),e.qZA()()(),e.TgZ(14,"ion-footer")(15,"ion-toolbar")(16,"ion-buttons",0)(17,"ion-button",1),e.NdJ("click",function(){return t.confirmerSuppression()}),e._uU(18,"Confirmer"),e.qZA()()()())},dependencies:[o.YG,o.Sm,o.PM,o.FN,o.Zi,o.Dq,o.W2,o.fr,o.Gu,o.wd,o.sr]}),s})(),I=(()=>{var i;class s{constructor(r,t,n){this.modalController=r,this.firestore=t,this.fb=n,this.myForm=this.fb.group({prenom:["",a.kI.required],nom:["",a.kI.required],numero:["",a.kI.required],gmail:["",[a.kI.required,a.kI.email]],password:["",a.kI.required]})}ngOnInit(){this.initializeForm(),console.log("uid   ",g)}initializeForm(){var r=this;return(0,c.Z)(function*(){var t,n,u,d,p;r.secretaire=yield(0,f.NU)(r.firestore,r.secretaireID),r.myForm.patchValue({prenom:(null===(t=r.secretaire)||void 0===t?void 0:t.prenom)||"",nom:(null===(n=r.secretaire)||void 0===n?void 0:n.nom)||"",numero:(null===(u=r.secretaire)||void 0===u?void 0:u.numero)||"",gmail:(null===(d=r.secretaire)||void 0===d?void 0:d.gmail)||"",password:(null===(p=r.secretaire)||void 0===p?void 0:p.password)||""})})()}onSubmit(){var r=this;return(0,c.Z)(function*(){r.myForm.valid&&(yield r.modifierSecretaire(),yield r.modalController.dismiss())})()}modifierSecretaire(){var r=this;return(0,c.Z)(function*(){var t,n,u,d,p;const F=null===(t=r.myForm.get("nom"))||void 0===t?void 0:t.value,Z=null===(n=r.myForm.get("prenom"))||void 0===n?void 0:n.value,M=null===(u=r.myForm.get("gmail"))||void 0===u?void 0:u.value,y=null===(d=r.myForm.get("numero"))||void 0===d?void 0:d.value,S=null===(p=r.myForm.get("password"))||void 0===p?void 0:p.value;try{yield(0,f.sZ)(r.firestore,r.secretaireID,F,Z,M,y,S,g),yield r.modalController.dismiss(),window.dispatchEvent(new Event("refreshPage")),console.log("Secr\xe9taire enregistr\xe9e avec succ\xe8s.")}catch(C){console.error("Erreur lors de l'enregistrement du secr\xe9taire :",C)}})()}fermer(){var r=this;return(0,c.Z)(function*(){yield r.modalController.dismiss()})()}}return(i=s).\u0275fac=function(r){return new(r||i)(e.Y36(o.IN),e.Y36(_.ST),e.Y36(a.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-form"]],inputs:{secretaireID:"secretaireID"},decls:21,vars:2,consts:[[3,"translucent"],["slot","end"],[3,"click"],["name","close"],[3,"formGroup"],["formControlName","prenom","label","Pr\xe9nom"],["formControlName","nom","label","Nom"],["formControlName","numero","label","Num\xe9ro"],["formControlName","gmail","label","Gmail"],["formControlName","password","type","password","label","Password"],["expand","full","type","submit",3,"click"]],template:function(r,t){1&r&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Formulaire"),e.qZA(),e.TgZ(4,"ion-buttons",1)(5,"ion-button",2),e.NdJ("click",function(){return t.fermer()}),e._UZ(6,"ion-icon",3),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"form",4)(9,"ion-item"),e._UZ(10,"ion-input",5),e.qZA(),e.TgZ(11,"ion-item"),e._UZ(12,"ion-input",6),e.qZA(),e.TgZ(13,"ion-item"),e._UZ(14,"ion-input",7),e.qZA(),e.TgZ(15,"ion-item"),e._UZ(16,"ion-input",8),e.qZA(),e.TgZ(17,"ion-item"),e._UZ(18,"ion-input",9),e.qZA(),e.TgZ(19,"ion-button",10),e.NdJ("click",function(){return t.modifierSecretaire()}),e._uU(20,"Soumettre"),e.qZA()()()),2&r&&(e.Q6J("translucent",!0),e.xp6(8),e.Q6J("formGroup",t.myForm))},dependencies:[a._Y,a.JJ,a.JL,a.sg,a.u,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.pK,o.Ie,o.wd,o.sr,o.j9]}),s})();var w=m(2224);const q=["myModal"];function N(i,s){if(1&i){const l=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col"),e._uU(2),e.qZA(),e.TgZ(3,"ion-col"),e._uU(4),e.qZA(),e.TgZ(5,"ion-col")(6,"ion-button",9),e.NdJ("click",function(){const n=e.CHM(l).$implicit,u=e.oxw(2);return e.KtG(u.afficherFormModal(n.uid))}),e._UZ(7,"ion-icon",10),e.qZA()(),e.TgZ(8,"ion-col")(9,"ion-button",11),e.NdJ("click",function(){const n=e.CHM(l).$implicit,u=e.oxw(2);return e.KtG(u.affichersuprresionModal(n.uid))}),e.TgZ(10,"ion-icon",12),e._uU(11,"supprimer"),e.qZA()()()()}if(2&i){const l=s.$implicit;e.xp6(2),e.Oqu(l.nom),e.xp6(2),e.Oqu(l.prenom)}}function U(i,s){if(1&i&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"Informations du secr\xe9taire"),e.qZA()(),e.TgZ(4,"ion-card-content"),e.YNc(5,N,12,2,"ion-row",8),e.qZA()()),2&i){const l=e.oxw();e.xp6(5),e.Q6J("ngForOf",l.secretaires)}}let g;const $=[{path:"",component:(()=>{var i;class s{constructor(r,t,n){this.firestore=r,this.modalController=t,this.eventService=n,this.formulaireComponent=P,this.subscription=new T.w0,this.uid=f.Ru.uid,this.secretaires=[]}ngOnInit(){console.log("med uid    ",this.uid),g=this.uid,console.log("uida     ",g),window.addEventListener("refreshPage",()=>{this.fetchSecretaire()}),this.fetchSecretaire(),this.subscription=this.eventService.secretaireUpdated$.subscribe(()=>{this.fetchSecretaire()})}ngOnDestroy(){this.subscription.unsubscribe(),window.removeEventListener("refreshPage",()=>{})}fetchSecretaire(){var r=this;return(0,c.Z)(function*(){try{r.secretaires=yield(0,f.MH)(r.firestore,r.uid),r.secretaires&&r.secretaires.length>0?(r.secretaires=r.secretaires,console.log("Secr\xe9taire de l'utilisateur :",r.secretaires)):console.error("Aucune donn\xe9e de secr\xe9taire trouv\xe9e.")}catch(t){console.error("Erreur lors de la r\xe9cup\xe9ration du secr\xe9taire :",t)}})()}afficherFormulaireModal(){var r=this;return(0,c.Z)(function*(){const t=yield r.modalController.create({component:r.formulaireComponent});return t.onDidDismiss().then(n=>{console.log("Donn\xe9es du formulaire modal soumis :",n.data)}),yield t.present()})()}afficherFormModal(r){var t=this;return(0,c.Z)(function*(){const n=yield t.modalController.create({component:I,componentProps:{secretaireID:r}});return n.onDidDismiss().then(u=>{console.log("Donn\xe9es du formulaire modal soumis :",u.data)}),yield n.present()})()}affichersuprresionModal(r){var t=this;return(0,c.Z)(function*(){const n=yield t.modalController.create({component:b,componentProps:{secretaireID:r}});return n.onDidDismiss().then(u=>{console.log("Donn\xe9es du formulaire modal soumis :",u.data)}),yield n.present()})()}}return(i=s).\u0275fac=function(r){return new(r||i)(e.Y36(_.ST),e.Y36(o.IN),e.Y36(w.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-parametre-secretaire"]],viewQuery:function(r,t){if(1&r&&e.Gf(q,5),2&r){let n;e.iGM(n=e.CRH())&&(t.myModal=n.first)}},decls:14,vars:3,consts:[[3,"translucent"],[1,"center"],["slot","start","routerLink","/parametre-med"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngIf"],[1,"right",3,"click"],[4,"ngFor","ngForOf"],["color","warning",3,"click"],["name","hammer-outline"],["color","danger",3,"click"],["name","trash-outline"]],template:function(r,t){1&r&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e._uU(3,"parametre-secretaire"),e.qZA(),e.TgZ(4,"ion-button",2),e._uU(5,"Retour"),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e._uU(10,"parametre-secretaire"),e.qZA()()(),e.YNc(11,U,6,1,"ion-card",6),e.TgZ(12,"ion-button",7),e.NdJ("click",function(){return t.afficherFormulaireModal()}),e._uU(13,"Ajouter secr\xe9taire"),e.qZA()()),2&r&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(5),e.Q6J("ngIf",t.secretaires))},dependencies:[h.sg,h.O5,o.YG,o.PM,o.FN,o.Zi,o.Dq,o.wI,o.W2,o.Gu,o.gu,o.Nd,o.wd,o.sr,o.YI,v.rH],styles:[".center[_ngcontent-%COMP%]{margin-left:40%;margin-right:40%;align-items:center}.right[_ngcontent-%COMP%]{float:right}"]}),s})()}];let J=(()=>{var i;class s{}return(i=s).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[v.Bz.forChild($),v.Bz]}),s})(),D=(()=>{var i;class s{}return(i=s).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,a.u5,o.Pc,J]}),s})()}}]);