"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1454],{1454:(C,D,l)=>{l.r(D),l.d(D,{DocumentPageModule:()=>J});var m=l(6814),d=l(95),i=l(878),g=l(2344),u=l(5861),P=l(4716),p=l(1086),v=l(1497),e=l(9212),M=l(778),T=l(6369);function y(o,a){if(1&o){const c=e.EpF();e.TgZ(0,"div")(1,"ion-input",11),e.NdJ("ngModelChange",function(t){e.CHM(c);const r=e.oxw();return e.KtG(r.description=t)}),e.qZA(),e.TgZ(2,"ion-button",12),e._UZ(3,"ion-icon",13),e._uU(4," \xa0\xa0Envoyer "),e.qZA(),e._UZ(5,"img",14),e.qZA()}if(2&o){const c=e.oxw();e.xp6(),e.Q6J("ngModel",c.description),e.xp6(4),e.Q6J("src",c.selectedFile,e.LSH)}}function A(o,a){if(1&o&&(e.TgZ(0,"ion-item"),e._UZ(1,"img",15),e.TgZ(2,"ion-label"),e._uU(3),e.qZA(),e.TgZ(4,"a",16),e._uU(5," Voir d\xe9tail.."),e.qZA()()),2&o){const c=a.$implicit;e.xp6(),e.Q6J("src",c.url,e.LSH),e.xp6(2),e.Oqu(c.description),e.xp6(),e.Q6J("href",c.url,e.LSH)}}const F=[{path:"",component:(()=>{var o;class a{constructor(n,t,r,s,h,f){this.storage=n,this.firestore=t,this.toastController=r,this.modalController=s,this.cdr=h,this.router=f,this.Vfiche=!0,this.Vconsultation=!1,this.Vdocument=!1,this.uid="",this.nom="",this.prenom="",this.age=0,this.adresse="",this.telephone="",this.sexe="",this.groupeSanguin="",this.situationFamiliale="",this.profession="",this.email="",this.telephone2="",this.numeroAssurance="",this.note="",this.antecedentsMedicaux="",this.antecedentsChirurgicaux="",this.antecedentsFamiliaux="",this.autresAntecedents="",this.medicaments="",this.description="",this.selectedFile=null,this.selectedFileUrl=null,this.documents=[],this.consultationDate="",this.consultationdate1="",this.searchDescription=""}ngOnInit(){var n=this;return(0,u.Z)(function*(){n.getdoc()})()}back(){var n=this;return(0,u.Z)(function*(){n.router.navigate(["/patient"]),console.log("going to patient")})()}onFileSelected(n){var t=this;return(0,u.Z)(function*(){const r=n.target.files[0];if(r){t.selectedFile=r;try{const s=t.firestore.createId(),h=`documents/${s}_${r.name}`,f=t.storage.ref(h);t.storage.upload(h,r).snapshotChanges().pipe((0,P.x)((0,u.Z)(function*(){try{const Z=yield f.getDownloadURL().toPromise();if(!t.description)return void console.error("La description est obligatoire pour t\xe9l\xe9charger le fichier.");console.log(t.description),console.log(s);const U={uid:s,medecinUid:v.Ru.uid,patientUid:p.z,url:Z,description:t.description};yield t.firestore.collection("documents").doc(s).set(U),console.log("Document ajout\xe9 avec succ\xe8s."),t.getdoc()}catch(Z){console.error("Erreur lors de l'ajout du document :",Z)}}))).subscribe()}catch(s){console.error("Erreur lors de l'ajout du document :",s)}}else console.error("Aucun fichier s\xe9lectionn\xe9.")})()}closeModal(){this.modalController.dismiss()}searchDocumentsByDescription(n){var t=this;return(0,u.Z)(function*(){try{if(!n)return void console.log("Veuillez entrer une description.");const r=t.documents.filter(s=>s.description===n);r.length>0?(console.log("Documents trouv\xe9s avec la description",n,":",r),t.documents=r):console.log("Aucun document trouv\xe9 avec la description",n)}catch(r){console.error("Erreur lors de la recherche des documents pour la description :",r)}})()}getdoc(){var n=this;return(0,u.Z)(function*(){const t=yield(0,v.EB)(n.firestore,p.z);console.log(t),t&&(n.documents=t),console.log(p.z)})()}}return(o=a).\u0275fac=function(n){return new(n||o)(e.Y36(M.Q1),e.Y36(T.ST),e.Y36(i.yF),e.Y36(i.IN),e.Y36(e.sBO),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-document"]],decls:35,vars:5,consts:[[3,"translucent"],["slot","start"],["routerLink","/tabs/tab1","fill","clear"],[3,"fullscreen"],["placeholder","Rechercher"],[1,"upload-document"],["type","file","id","fileInput","name","fileInput","accept","*/*",3,"change"],[4,"ngIf"],["type","text","placeholder","entrer une description a rechercher","color","primary",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"],["type","text","placeholder","Enter document description","required","",3,"ngModel","ngModelChange"],[1,"ion-text-end"],["name","send-outline"],["alt","Selected Image",3,"src"],["width","60","height","60",3,"src"],["float","right","target","_blank",3,"href"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e._uU(4,"Retour"),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Documents"),e.qZA()()(),e.TgZ(7,"ion-content",3)(8,"ion-card")(9,"ion-card-content")(10,"ion-card-header"),e._UZ(11,"br")(12,"ion-searchbar",4)(13,"br"),e.qZA(),e.TgZ(14,"ion-card",5)(15,"ion-card-content"),e._UZ(16,"br")(17,"br")(18,"br")(19,"br")(20,"br")(21,"br")(22,"br")(23,"br"),e.TgZ(24,"input",6),e.NdJ("change",function(s){return t.onFileSelected(s)}),e.qZA()()(),e.YNc(25,y,6,2,"div",7),e.TgZ(26,"ion-card")(27,"div")(28,"ion-list")(29,"ion-input",8),e.NdJ("ngModelChange",function(s){return t.searchDescription=s}),e.qZA(),e.TgZ(30,"ion-button",9),e.NdJ("click",function(){return t.searchDocumentsByDescription(t.searchDescription)}),e._uU(31,"Rechercher"),e.qZA(),e.YNc(32,A,6,3,"ion-item",10),e._UZ(33,"br")(34,"br"),e.qZA()()()()()()),2&n&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(18),e.Q6J("ngIf",t.selectedFile),e.xp6(4),e.Q6J("ngModel",t.searchDescription),e.xp6(3),e.Q6J("ngForOf",t.documents))},dependencies:[m.sg,m.O5,d.JJ,d.Q7,d.On,i.YG,i.Sm,i.PM,i.FN,i.Zi,i.W2,i.Gu,i.gu,i.pK,i.Ie,i.Q$,i.q_,i.VI,i.wd,i.sr,i.j9,i.YI,g.rH]}),a})()}];let b=(()=>{var o;class a{}return(o=a).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(F),g.Bz]}),a})(),J=(()=>{var o;class a{}return(o=a).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,d.u5,i.Pc,b]}),a})()}}]);