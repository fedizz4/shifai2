"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3900],{3900:(T,h,i)=>{i.r(h),i.d(h,{SallePageModule:()=>M});var g=i(6814),d=i(95),r=i(878),p=i(2344),m=i(5861),f=i(1497),e=i(9212),v=i(6369);function P(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",1)(2,"h3"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-col",1)(5,"ion-item")(6,"ion-label"),e._uU(7,"Pr\xe9sent"),e.qZA(),e.TgZ(8,"ion-checkbox",5),e.NdJ("ngModelChange",function(l){const s=e.CHM(o).$implicit;return e.KtG(s.present=l)})("ionChange",function(){const c=e.CHM(o).$implicit,s=e.oxw(2);return e.KtG(s.updatePresent(c))}),e.qZA()()()()}if(2&t){const o=a.$implicit,n=e.oxw(2);e.ekj("barre",n.present),e.xp6(3),e.lnq("",o.nom," ",o.prenom," ",o.heure,""),e.xp6(5),e.Q6J("ngModel",o.present)}}function S(t,a){if(1&t&&(e.ynx(0),e.YNc(1,P,9,6,"ion-row",4),e.BQk()),2&t){const o=e.oxw();e.xp6(),e.Q6J("ngForOf",o.rdvs)}}function _(t,a){1&t&&(e.TgZ(0,"ion-row")(1,"ion-col"),e._uU(2,"Vous n'avez pas de rendez-vous aujourd'hui"),e.qZA()())}const x=[{path:"",component:(()=>{var t;class a{constructor(n,l){this.firestore=n,this.toastController=l,this.rdvs=[],this.p=!1,this.present=!1,this.uid=f.Ru.uid}ngOnInit(){this.loadEvents()}loadEvents(){var n=this;return(0,m.Z)(function*(){const l=yield(0,f.dB)(n.firestore,n.uid);if(l&&l.length>0){n.p=!0;const c=new Date;c.setHours(0,0,0,0),n.rdvs=l.filter(s=>new Date(s.date).setHours(0,0,0,0)===c.setHours(0,0,0,0)).map(s=>(s.present=!1,s)).sort((s,u)=>new Date(u.date).getTime()-new Date(s.date).getTime()),console.log(n.rdvs)}else n.p=!1,console.log("vous n'avez pas de rendezvous aujourd'hui"),(yield n.toastController.create({message:"Vous n'avez pas de rendez-vous aujourd'hui. Veuillez retourner avec le bouton retour.",duration:1500,position:"top",color:"danger"})).present()})()}updatePresent(n){var l=this;return(0,m.Z)(function*(){n.present=!n.present,l.firestore.collection("medecin").doc(f.Kl).collection("rdv").ref.where("key","==",n.key).get().then(u=>{u.forEach(y=>{y.ref.update({present:n.present})})}).catch(u=>{console.log("Error updating present status:",u)})})()}}return(t=a).\u0275fac=function(n){return new(n||t)(e.Y36(v.ST),e.Y36(r.yF))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-salle"]],decls:15,vars:2,consts:[["routerLink","/app-medecin","slot","start","fill","clear"],["size","6"],[4,"ngIf","ngIfElse"],["noAppointments",""],[3,"barre",4,"ngFor","ngForOf"],["slot","start",3,"ngModel","ngModelChange","ionChange"]],template:function(n,l){if(1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Salle d'attente"),e.qZA(),e.TgZ(4,"ion-button",0),e._uU(5,"retour"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-grid")(8,"ion-row")(9,"ion-col",1)(10,"h2"),e._uU(11,"Rendrez-vous du jour"),e.qZA()()(),e.YNc(12,S,2,1,"ng-container",2)(13,_,3,0,"ng-template",null,3,e.W1O),e.qZA()()),2&n){const c=e.MAs(14);e.xp6(12),e.Q6J("ngIf",l.p)("ngIfElse",c)}},dependencies:[g.sg,g.O5,d.JJ,d.On,r.YG,r.nz,r.wI,r.W2,r.jY,r.Gu,r.Ie,r.Q$,r.Nd,r.wd,r.sr,r.w,r.YI,p.rH],styles:[".barre[_ngcontent-%COMP%]{text-decoration:line-through}"]}),a})()}];let C=(()=>{var t;class a{}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(x),p.Bz]}),a})(),M=(()=>{var t;class a{}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,d.u5,r.Pc,C]}),a})()}}]);