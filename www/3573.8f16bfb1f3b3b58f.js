"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3573],{3573:(N,Z,s)=>{s.r(Z),s.d(Z,{MedicamentPageModule:()=>P});var g=s(6814),l=s(95),i=s(878),_=s(2344),m=s(5861),p=s(1497),C=s(1086),e=s(9212),f=s(6369),h=s(2224);const u=()=>({standalone:!0});let b=(()=>{var t;class c{constructor(n,o,d,a){this.firestore=n,this.toastController=o,this.modalController=d,this.eventService=a,this.uid=C.z,this.nom="",this.dosage=0,this.prises=[{label:"Matin",checked:!1},{label:"Midi",checked:!1},{label:"Soir",checked:!1}]}presentToast(n){var o=this;return(0,m.Z)(function*(){(yield o.toastController.create({message:n,duration:3e3,position:"bottom"})).present()})()}addMedicament(){var n=this;return(0,m.Z)(function*(){try{"string"==typeof n.uid?(yield(0,p.Ye)(n.firestore,p.l2,n.nom,n.dosage,n.prises,n.uid),n.eventService.triggerMedicamentUpdated(),n.presentToast("M\xe9dicament ajout\xe9 avec succ\xe8s!"),n.nom="",n.dosage=0,n.prises=[{label:"Matin",checked:!1},{label:"Midi",checked:!1},{label:"Soir",checked:!1}],n.modalController.dismiss()):console.log("uid non string")}catch(o){console.log("Erreur lors de l'ajout du m\xe9dicament:",o)}})()}}return(t=c).\u0275fac=function(n){return new(n||t)(e.Y36(f.ST),e.Y36(i.yF),e.Y36(i.IN),e.Y36(h.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-medicament-form"]],decls:28,vars:16,consts:[[3,"fullscreen"],["position","floating"],["name","nom","type","text","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","dosage","type","number","required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],["type","submit","expand","full",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Ajouter un M\xe9dicament"),e.qZA()()(),e.TgZ(4,"ion-content",0)(5,"form")(6,"ion-item")(7,"ion-label",1),e._uU(8,"Nom du M\xe9dicament"),e.qZA(),e.TgZ(9,"ion-input",2),e.NdJ("ngModelChange",function(a){return o.nom=a}),e.qZA()(),e.TgZ(10,"ion-item")(11,"ion-label",1),e._uU(12,"Dosage"),e.qZA(),e.TgZ(13,"ion-input",3),e.NdJ("ngModelChange",function(a){return o.dosage=a}),e.qZA()(),e.TgZ(14,"ion-item")(15,"ion-label"),e._uU(16,"Fr\xe9quence"),e.qZA(),e.TgZ(17,"ion-checkbox",4),e.NdJ("ngModelChange",function(a){return o.prises[0].checked=a}),e.qZA(),e.TgZ(18,"ion-label"),e._uU(19,"Matin"),e.qZA(),e.TgZ(20,"ion-checkbox",4),e.NdJ("ngModelChange",function(a){return o.prises[1].checked=a}),e.qZA(),e.TgZ(21,"ion-label"),e._uU(22,"Midi"),e.qZA(),e.TgZ(23,"ion-checkbox",4),e.NdJ("ngModelChange",function(a){return o.prises[2].checked=a}),e.qZA(),e.TgZ(24,"ion-label"),e._uU(25,"Soir"),e.qZA()(),e.TgZ(26,"ion-button",5),e.NdJ("click",function(){return o.addMedicament()}),e._uU(27,"Ajouter"),e.qZA()()()),2&n&&(e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(5),e.Q6J("ngModel",o.nom)("ngModelOptions",e.DdM(11,u)),e.xp6(4),e.Q6J("ngModel",o.dosage)("ngModelOptions",e.DdM(12,u)),e.xp6(4),e.Q6J("ngModel",o.prises[0].checked)("ngModelOptions",e.DdM(13,u)),e.xp6(3),e.Q6J("ngModel",o.prises[1].checked)("ngModelOptions",e.DdM(14,u)),e.xp6(3),e.Q6J("ngModel",o.prises[2].checked)("ngModelOptions",e.DdM(15,u)))},dependencies:[l._Y,l.JJ,l.JL,l.Q7,l.On,l.F,i.YG,i.nz,i.W2,i.Gu,i.pK,i.Ie,i.Q$,i.wd,i.sr,i.w,i.as,i.j9]}),c})();const M=()=>({standalone:!0});let k=(()=>{var t;class c{constructor(n,o,d,a){this.firestore=n,this.toastController=o,this.modalController=d,this.eventService=a,this.medicament={idd:"",nom:"",dosage:0,prises:[]},this.nom="",this.dosage=0,this.prises=[{label:"Matin",checked:!1},{label:"Midi",checked:!1},{label:"Soir",checked:!1}]}ngOnInit(){this.med&&(this.medicament.idd=this.med.idd,this.medicament.nom=this.med.nom,this.medicament.dosage=this.med.dosage,this.medicament.prises=this.med.prises.map(n=>({label:n.label,checked:n.checked})))}modifierMedicament(){var n=this;return(0,m.Z)(function*(){try{yield(0,p.kj)(n.firestore,n.medicament.idd,n.medicament.nom,n.medicament.dosage,n.medicament.prises),n.eventService.triggerMedicamentUpdated(),yield n.presentToast("M\xe9dicament modifi\xe9 avec succ\xe8s!"),n.modalController.dismiss()}catch(o){console.error("Erreur lors de la modification du m\xe9dicament:",o)}})()}supprimerMedicament(){(0,p.sA)(this.firestore,this.medicament.idd)}presentToast(n){var o=this;return(0,m.Z)(function*(){(yield o.toastController.create({message:n,duration:3e3,position:"bottom"})).present()})()}close(){this.modalController.dismiss()}}return(t=c).\u0275fac=function(n){return new(n||t)(e.Y36(f.ST),e.Y36(i.yF),e.Y36(i.IN),e.Y36(h.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-modif"]],inputs:{med:"med"},decls:32,vars:16,consts:[[3,"click"],[3,"fullscreen"],["position","floating"],["name","nom","type","text","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","dosage","type","number","required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],["type","submit","expand","full",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"modifier un M\xe9dicament"),e.qZA()(),e.TgZ(4,"ion-button",0),e.NdJ("click",function(){return o.close()}),e._uU(5,"fermer"),e.qZA()(),e.TgZ(6,"ion-content",1)(7,"form")(8,"ion-item")(9,"ion-label",2),e._uU(10,"Nom du M\xe9dicament"),e.qZA(),e.TgZ(11,"ion-input",3),e.NdJ("ngModelChange",function(a){return o.medicament.nom=a}),e.qZA()(),e.TgZ(12,"ion-item")(13,"ion-label",2),e._uU(14,"Dosage"),e.qZA(),e.TgZ(15,"ion-input",4),e.NdJ("ngModelChange",function(a){return o.medicament.dosage=a}),e.qZA()(),e.TgZ(16,"ion-item")(17,"ion-label"),e._uU(18,"Fr\xe9quence"),e.qZA(),e.TgZ(19,"ion-checkbox",5),e.NdJ("ngModelChange",function(a){return o.medicament.prises[0].checked=a}),e.qZA(),e.TgZ(20,"ion-label"),e._uU(21,"Matin"),e.qZA(),e.TgZ(22,"ion-checkbox",5),e.NdJ("ngModelChange",function(a){return o.medicament.prises[1].checked=a}),e.qZA(),e.TgZ(23,"ion-label"),e._uU(24,"Midi"),e.qZA(),e.TgZ(25,"ion-checkbox",5),e.NdJ("ngModelChange",function(a){return o.medicament.prises[2].checked=a}),e.qZA(),e.TgZ(26,"ion-label"),e._uU(27,"Soir"),e.qZA()(),e.TgZ(28,"ion-button",6),e.NdJ("click",function(){return o.modifierMedicament()}),e._uU(29,"modifier"),e.qZA(),e.TgZ(30,"ion-button",6),e.NdJ("click",function(){return o.supprimerMedicament()}),e._uU(31,"supprimer"),e.qZA()()()),2&n&&(e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(5),e.Q6J("ngModel",o.medicament.nom)("ngModelOptions",e.DdM(11,M)),e.xp6(4),e.Q6J("ngModel",o.medicament.dosage)("ngModelOptions",e.DdM(12,M)),e.xp6(4),e.Q6J("ngModel",o.medicament.prises[0].checked)("ngModelOptions",e.DdM(13,M)),e.xp6(3),e.Q6J("ngModel",o.medicament.prises[1].checked)("ngModelOptions",e.DdM(14,M)),e.xp6(3),e.Q6J("ngModel",o.medicament.prises[2].checked)("ngModelOptions",e.DdM(15,M)))},dependencies:[l._Y,l.JJ,l.JL,l.Q7,l.On,l.F,i.YG,i.nz,i.W2,i.Gu,i.pK,i.Ie,i.Q$,i.wd,i.sr,i.w,i.as,i.j9]}),c})();const A=["myModal"];function F(t,c){1&t&&e.GkF(0)}function v(t,c){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw().$implicit;e.xp6(),e.hij(" ",r.label," ")}}function y(t,c){if(1&t&&(e.ynx(0),e.YNc(1,v,2,1,"ng-container",12),e.BQk()),2&t){const r=c.$implicit;e.xp6(),e.Q6J("ngIf",r.checked)}}function q(t,c){if(1&t){const r=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.YNc(6,y,2,1,"ng-container",11),e.qZA(),e.TgZ(7,"td")(8,"button",8),e.NdJ("click",function(){const d=e.CHM(r).$implicit,a=e.oxw();return e.KtG(a.openModifModal(d))}),e._uU(9,"Modifier/supprimer"),e.qZA()()()}if(2&t){const r=c.$implicit;e.xp6(2),e.Oqu(r.nom),e.xp6(2),e.Oqu(r.dosage),e.xp6(2),e.Q6J("ngForOf",r.prises)}}const J=[{path:"",component:(()=>{var t;class c{constructor(n,o,d){this.firestore=n,this.modalController=o,this.eventService=d,this.medicamentFormComponent=b,this.uid=C.z,this.medicaments=[],this.subscription=this.eventService.medicamentUpdated.subscribe(()=>{this.fetchMedicaments()})}openMedicamentFormModal(){this.modalController.create({component:this.medicamentFormComponent}).then(n=>{n.present()})}openModifModal(n){this.modalController.create({component:k,componentProps:{med:n}}).then(o=>{o.present()})}dismissModal(){this.modalController.dismiss()}ionViewDidEnter(){this.fetchMedicaments()}fetchMedicaments(){var n=this;return(0,m.Z)(function*(){try{const o=yield n.firestore.firestore.collection("medicaments").where("uid","==",n.uid).get();n.medicaments=[],o.forEach(d=>{const a=d.id,T=d.data();T.idd=a,console.log(a),n.medicaments.push(T)}),console.log("M\xe9dicaments de l'utilisateur :",n.medicaments)}catch(o){console.error("Erreur lors de la r\xe9cup\xe9ration des m\xe9dicaments :",o)}})()}ngOnDestroy(){this.subscription.unsubscribe()}getIconName(n,o){const d=n.find(a=>a.label===o);return d?d.checked?"checkmark":"close":""}}return(t=c).\u0275fac=function(n){return new(n||t)(e.Y36(f.ST),e.Y36(i.IN),e.Y36(h.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-medicament"]],viewQuery:function(n,o){if(1&n&&e.Gf(A,5),2&n){let d;e.iGM(d=e.CRH())&&(o.myModal=d.first)}},decls:40,vars:4,consts:[[3,"translucent"],["slot","start"],["routerLink","/tabs/tab1"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"right",3,"click"],["myModal",""],[3,"click"],[4,"ngComponentOutlet"],[1,"table","table-lg"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e._uU(4,"Retour"),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Mes M\xe9dicaments"),e.qZA()()(),e.TgZ(7,"ion-content",3)(8,"ion-header",4)(9,"ion-toolbar")(10,"ion-title",5),e._uU(11,"medicament"),e.qZA()()(),e.TgZ(12,"h1"),e._uU(13,"Liste de M\xe9dicaments"),e.qZA(),e.TgZ(14,"ion-button",6),e.NdJ("click",function(){return o.openMedicamentFormModal()}),e._uU(15,"Ajouter un m\xe9dicament"),e.qZA(),e.TgZ(16,"ion-modal",null,7)(18,"ion-header")(19,"ion-toolbar")(20,"ion-buttons",1)(21,"ion-button",8),e.NdJ("click",function(){return o.dismissModal()}),e._uU(22,"Cancel"),e.qZA()(),e.TgZ(23,"ion-title"),e._uU(24,"Ajouter un M\xe9dicament"),e.qZA()()(),e.TgZ(25,"ion-content"),e.YNc(26,F,1,0,"ng-container",9),e.qZA()(),e.TgZ(27,"table",10)(28,"thead")(29,"tr")(30,"th"),e._uU(31,"Nom"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Dosage"),e.qZA(),e.TgZ(34,"th"),e._uU(35,"Prises"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"Actions"),e.qZA()()(),e.TgZ(38,"tbody"),e.YNc(39,q,10,3,"tr",11),e.qZA()()()),2&n&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(19),e.Q6J("ngComponentOutlet",o.medicamentFormComponent),e.xp6(13),e.Q6J("ngForOf",o.medicaments))},dependencies:[g.$G,g.sg,g.O5,i.YG,i.Sm,i.W2,i.Gu,i.wd,i.sr,i.ki,i.YI,_.rH],styles:['@charset "UTF-8";.table-lg[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:18px;padding:20px}']}),c})()}];let U=(()=>{var t;class c{}return(t=c).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.Bz.forChild(J),_.Bz]}),c})(),P=(()=>{var t;class c{}return(t=c).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,l.u5,i.Pc,U]}),c})()}}]);