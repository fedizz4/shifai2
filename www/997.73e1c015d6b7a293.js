"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[997],{997:(M,h,s)=>{s.r(h),s.d(h,{AppSecretairePageModule:()=>J});var u=s(6814),D=s(95),c=s(878),w=s(2344),m=s(5861),g=s(8814),v=s(1497),d=s(6132),f=s(7374),_=s(5587),e=s(9212),y=s(6369);function A(a,l){if(1&a&&(e.TgZ(0,"ion-title"),e._uU(1),e.qZA()),2&a){const r=e.oxw();e.xp6(),e.AsE("Calendrier du medecin ",r.m.prenom," ",r.m.nom," ")}}function C(a,l){if(1&a){const r=e.EpF();e.TgZ(0,"mwl-calendar-week-view",24),e.NdJ("dayHeaderClicked",function(t){e.CHM(r);const i=e.oxw();return e.KtG(i.changeDay(t.day.date))}),e.qZA()}if(2&a){const r=e.oxw();e.Q6J("viewDate",r.viewDate)("events",r.events)}}function T(a,l){if(1&a&&e._UZ(0,"mwl-calendar-day-view",25),2&a){const r=e.oxw();e.Q6J("viewDate",r.viewDate)("events",r.events)}}function Z(a,l){if(1&a){const r=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-button",26),e.NdJ("click",function(){const i=e.CHM(r).$implicit,o=e.oxw();return e.KtG(o.deleteRendezVouscalendar(i))}),e._uU(4,"Supprimer"),e.qZA()()}if(2&a){const r=l.$implicit,n=e.oxw();e.xp6(2),e.HOy("",r.date," - ",r.heure," - ",r.nom," ",r.prenom," "),e.xp6(),e.Q6J("disabled",n.isRendezVousDatePassed(r))}}const P=[{path:"",component:(()=>{var a;class l{constructor(n,t){this.firestore=n,this.modalController=t,this.ms=v.Kl,this.viewDate=new Date,this.view=d.wr.Month,this.CalendarView=d.wr,this.uid=v.Ru.uid,this.events=[{start:new Date,title:"An event"}],this.activeDayIsOpen=!1,this.rdvs=[],this.medecinuid=this.uid,this.medecin=null,this.loadEvents(),console.log("meduid",this.ms)}ngOnInit(){var n=this;return(0,m.Z)(function*(){const i=(yield n.firestore.collection("medecin").ref.where("uid","==",n.ms).get()).docs.map(o=>{const p=o.data();return{uid:o.id,nom:p.nom,prenom:p.prenom}});n.m=i[0],console.log("medecin",n.m),console.log("med",i),n.loadEvents()})()}loadEvents(){var n=this;return(0,m.Z)(function*(){try{const t=yield(0,v.dB)(n.firestore,n.ms);t&&t.length>0&&(n.rdvs=t,n.events=t.map(i=>({start:n.convertDateTimeToDate(i.date,i.heure.split(" - ")[0]),end:n.convertDateTimeToDate(i.date,i.heure.split(" - ")[1]),title:`Rendez-vous de ${i.prenom} ${i.nom} \xe0 ${i.heure} chez ${i.medecinPrenom} ${i.medecinNom}`})))}catch(t){console.error("Erreur lors du chargement des rendez-vous:",t)}})()}dayClicked({date:n,events:t}){(0,f.x)(n,this.viewDate)&&((0,_.K)(this.viewDate,n)&&!0===this.activeDayIsOpen||0===t.length?this.activeDayIsOpen=!1:(this.activeDayIsOpen=!0,this.viewDate=n))}isRendezVousDatePassed(n){const t=n.date,i=new Date;return new Date(t)<i}deleteRendezVouscalendar(n){var t=this;return(0,m.Z)(function*(){try{yield t.presentExcuseModal(),void 0!==g.uV?(yield(0,v.i7)(t.firestore,v.Ru.uid,n,g.uV),console.log("Rendez-vous supprim\xe9 avec succ\xe8s."),yield t.loadEvents()):console.log("Excuse non fournie. Annulation de la suppression du rendez-vous.")}catch(i){console.error("Erreur lors de la suppression du rendez-vous:",i)}})()}presentExcuseModal(){var n=this;return(0,m.Z)(function*(){const t=yield n.modalController.create({component:g.ED});return yield t.present(),new Promise(i=>{t.onDidDismiss().then(({data:o})=>{i(null==o?void 0:o.excuse)})})})()}changeDay(n){this.viewDate=n,this.view=d.wr.Day}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}setView(n){this.view=n}convertDateTimeToDate(n,t){const i=n.split("-").map(p=>parseInt(p,10)),o=t.split("H").map(p=>parseInt(p,10));return new Date(i[0],i[1]-1,i[2],o[0],o[1])}}return(a=l).\u0275fac=function(n){return new(n||a)(e.Y36(y.ST),e.Y36(c.IN))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-app-secretaire"]],decls:48,vars:26,consts:[[3,"translucent"],["href","https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css","rel","stylesheet"],["href","https://unpkg.com/@fortawesome/fontawesome-free@6.2.1/css/all.css","rel","stylesheet"],["href","https://unpkg.com/angular-calendar@0.31.0/css/angular-calendar.css","rel","stylesheet"],["href","https://unpkg.com/flatpickr@4.6.13/dist/flatpickr.css","rel","stylesheet"],[4,"ngIf"],["routerLink","/sallesec"],["routerLink","/home-principal"],["name","log-out-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],[1,"btn","btn-primary",3,"click"],[3,"ngSwitch"],[3,"viewDate","events","activeDayIsOpen","dayClicked"],[3,"viewDate","events","dayHeaderClicked",4,"ngSwitchCase"],[3,"viewDate","events",4,"ngSwitchCase"],[4,"ngFor","ngForOf"],[3,"viewDate","events","dayHeaderClicked"],[3,"viewDate","events"],["color","danger",3,"disabled","click"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header",0),e._UZ(1,"link",1)(2,"link",2)(3,"link",3)(4,"link",4),e.TgZ(5,"ion-toolbar"),e.YNc(6,A,2,2,"ion-title",5),e.qZA(),e.TgZ(7,"ion-button",6),e._uU(8,"salle d'attente"),e.qZA(),e.TgZ(9,"ion-button",7),e._UZ(10,"ion-icon",8),e._uU(11,"se deconnecter"),e.qZA()(),e.TgZ(12,"ion-content",9)(13,"ion-header",10)(14,"ion-toolbar")(15,"ion-title",11),e._uU(16,"Calendrier m\xe9dical"),e.qZA()()(),e._UZ(17,"br")(18,"br")(19,"br"),e.TgZ(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15),e.NdJ("viewDateChange",function(o){return t.viewDate=o})("viewDateChange",function(){return t.closeOpenMonthViewDay()}),e._uU(24," Pr\xe9c\xe9dent "),e.qZA(),e.TgZ(25,"div",16),e.NdJ("viewDateChange",function(o){return t.viewDate=o}),e._uU(26," Aujourd'hui "),e.qZA(),e.TgZ(27,"div",17),e.NdJ("viewDateChange",function(o){return t.viewDate=o})("viewDateChange",function(){return t.closeOpenMonthViewDay()}),e._uU(28," Suivant "),e.qZA()()(),e.TgZ(29,"div",13)(30,"h3"),e._uU(31),e.ALo(32,"calendarDate"),e.qZA()(),e.TgZ(33,"div",13)(34,"div",14)(35,"div",18),e.NdJ("click",function(){return t.setView(t.CalendarView.Month)}),e._uU(36," Mois "),e.qZA(),e.TgZ(37,"div",18),e.NdJ("click",function(){return t.setView(t.CalendarView.Week)}),e._uU(38," Semaine "),e.qZA(),e.TgZ(39,"div",18),e.NdJ("click",function(){return t.setView(t.CalendarView.Day)}),e._uU(40," Jour "),e.qZA()()()(),e._UZ(41,"br"),e.TgZ(42,"div",19)(43,"mwl-calendar-month-view",20),e.NdJ("dayClicked",function(o){return t.dayClicked(o.day)}),e.qZA(),e.YNc(44,C,1,2,"mwl-calendar-week-view",21)(45,T,1,2,"mwl-calendar-day-view",22),e.qZA(),e.TgZ(46,"ion-list"),e.YNc(47,Z,5,5,"ion-item",23),e.qZA()()),2&n&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",void 0!==t.m),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(11),e.Q6J("view",t.view)("viewDate",t.viewDate),e.xp6(2),e.Q6J("viewDate",t.viewDate),e.xp6(2),e.Q6J("view",t.view)("viewDate",t.viewDate),e.xp6(4),e.Oqu(e.Dn7(32,22,t.viewDate,t.view+"ViewTitle","en")),e.xp6(4),e.ekj("active",t.view===t.CalendarView.Month),e.xp6(2),e.ekj("active",t.view===t.CalendarView.Week),e.xp6(2),e.ekj("active",t.view===t.CalendarView.Day),e.xp6(3),e.Q6J("ngSwitch",t.view),e.xp6(),e.Q6J("viewDate",t.viewDate)("events",t.events)("activeDayIsOpen",t.activeDayIsOpen),e.xp6(),e.Q6J("ngSwitchCase","week"),e.xp6(),e.Q6J("ngSwitchCase","day"),e.xp6(2),e.Q6J("ngForOf",t.rdvs))},dependencies:[u.sg,u.O5,u.RF,u.n9,c.YG,c.W2,c.Gu,c.gu,c.Ie,c.Q$,c.q_,c.wd,c.sr,c.YI,w.rH,d.YX,d.MG,d.nA,d.GH,d.TK,d.Se,d.vk]}),l})()}];let k=(()=>{var a;class l{}return(a=l).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[w.Bz.forChild(P),w.Bz]}),l})();var V=s(4572);let J=(()=>{var a;class l{}return(a=l).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.ez,D.u5,c.Pc,k,d._8.forRoot({provide:d._A,useFactory:V.x})]}),l})()}}]);