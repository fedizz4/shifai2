"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3162],{3162:(J,h,d)=>{d.r(h),d.d(h,{CalenderMedecinPageModule:()=>P});var u=d(6814),p=d(95),c=d(6132),C=d(4572),l=d(878),g=d(2344),w=d(5861),f=d(7374),D=d(5587),m=d(1497),e=d(9212);function M(a,s){if(1&a&&(e.TgZ(0,"ion-select-option",4),e._uU(1),e.qZA()),2&a){const o=s.$implicit;e.Q6J("value",o),e.xp6(),e.Oqu(o)}}let _,y=(()=>{var a;class s{constructor(t){this.modalController=t,this.predefinedExcuses=["Urgence personnelle","Conflit d'horaire","Maladie inattendue","Autre"],this.selectedExcuse1=""}ngOnInit(){}dismiss(){this.modalController.dismiss()}confirm(){_=this.selectedExcuse1,this.selectedExcuse1?(console.log("Excuse s\xe9lectionn\xe9e :",this.selectedExcuse1),this.modalController.dismiss(this.selectedExcuse1)):console.log("Aucune excuse s\xe9lectionn\xe9e.")}}return(a=s).\u0275fac=function(t){return new(t||a)(e.Y36(l.IN))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-excuse-modal"]],decls:17,vars:2,consts:[[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["expand","full","color","light",3,"click"],["expand","full","color","primary",3,"click"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"S\xe9lectionnez votre excuse"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"ion-list")(6,"ion-item")(7,"ion-label"),e._uU(8,"Excuse"),e.qZA(),e.TgZ(9,"ion-select",0),e.NdJ("ngModelChange",function(r){return n.selectedExcuse1=r}),e.YNc(10,M,2,2,"ion-select-option",1),e.qZA()()()(),e.TgZ(11,"ion-footer")(12,"ion-toolbar")(13,"ion-button",2),e.NdJ("click",function(){return n.dismiss()}),e._uU(14,"Annuler"),e.qZA(),e.TgZ(15,"ion-button",3),e.NdJ("click",function(){return n.confirm()}),e._uU(16,"Confirmer"),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("ngModel",n.selectedExcuse1),e.xp6(),e.Q6J("ngForOf",n.predefinedExcuses))},dependencies:[u.sg,p.JJ,p.On,l.YG,l.W2,l.fr,l.Gu,l.Ie,l.Q$,l.q_,l.t9,l.n0,l.wd,l.sr,l.QI]}),s})();var T=d(6369);function Z(a,s){if(1&a){const o=e.EpF();e.TgZ(0,"mwl-calendar-week-view",28),e.NdJ("dayHeaderClicked",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.changeDay(n.day.date))}),e.qZA()}if(2&a){const o=e.oxw();e.Q6J("viewDate",o.viewDate)("events",o.events)}}function x(a,s){if(1&a&&e._UZ(0,"mwl-calendar-day-view",29),2&a){const o=e.oxw();e.Q6J("viewDate",o.viewDate)("events",o.events)}}function k(a,s){if(1&a){const o=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-button",30),e.NdJ("click",function(){const i=e.CHM(o).$implicit,r=e.oxw();return e.KtG(r.deleteRendezVouscalendar(i))}),e._uU(4,"Annuler"),e.qZA()()}if(2&a){const o=s.$implicit,t=e.oxw();e.xp6(2),e.HOy("",o.date," - ",o.heure," - ",o.nom," ",o.prenom," "),e.xp6(),e.Q6J("disabled",t.isRendezVousDatePassed(o))}}const A=[{path:"",component:(()=>{var a;class s{constructor(t,n){this.firestore=t,this.modalController=n,this.viewDate=new Date,this.view=c.wr.Month,this.CalendarView=c.wr,this.uid=m.Ru.uid,this.events=[{start:new Date,title:"An event"}],this.activeDayIsOpen=!1,this.rdvs=[],this.medecinuid=this.uid,this.dayStartTime="8:00",this.dayEndTime="17:00",this.loadEvents(),console.log("meduid",m.Ru.uid)}ngOnInit(){}loadEvents(){var t=this;return(0,w.Z)(function*(){try{const n=yield(0,m.dB)(t.firestore,t.uid);n&&n.length>0&&(t.rdvs=n.sort((i,r)=>new Date(r.date).getTime()-new Date(i.date).getTime()),t.events=n.map(i=>({start:t.convertDateTimeToDate(i.date,i.heure.split(" - ")[0]),end:t.convertDateTimeToDate(i.date,i.heure.split(" - ")[1]),title:`Rendez-vous de ${i.prenom} ${i.nom} \xe0 ${i.heure} chez ${i.medecinPrenom} ${i.medecinNom}`})))}catch(n){console.error("Erreur lors du chargement des rendez-vous:",n)}})()}dayClicked({date:t,events:n}){(0,f.x)(t,this.viewDate)&&((0,D.K)(this.viewDate,t)&&!0===this.activeDayIsOpen||0===n.length?this.activeDayIsOpen=!1:(this.activeDayIsOpen=!0,this.viewDate=t))}deleteRendezVouscalendar(t){var n=this;return(0,w.Z)(function*(){try{yield n.presentExcuseModal(),void 0!==_?(yield(0,m.i7)(n.firestore,m.Ru.uid,t,_),console.log("Rendez-vous supprim\xe9 avec succ\xe8s."),yield n.loadEvents()):console.log("Excuse non fournie. Annulation de la suppression du rendez-vous.")}catch(i){console.error("Erreur lors de la suppression du rendez-vous:",i)}})()}isRendezVousDatePassed(t){const n=t.date,i=new Date,r=new Date(i);return r.setDate(i.getDate()-1),new Date(n)<r}presentExcuseModal(){var t=this;return(0,w.Z)(function*(){const n=yield t.modalController.create({component:y});return yield n.present(),new Promise(i=>{n.onDidDismiss().then(({data:r})=>{i(null==r?void 0:r.excuse)})})})()}changeDay(t){this.viewDate=t,this.view=c.wr.Day}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}setView(t){this.view=t}convertDateTimeToDate(t,n){const i=t.split("-").map(v=>parseInt(v,10)),r=n.split("H").map(v=>parseInt(v,10));return new Date(i[0],i[1]-1,i[2],r[0],r[1])}}return(a=s).\u0275fac=function(t){return new(t||a)(e.Y36(T.ST),e.Y36(l.IN))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-calender-medecin"]],decls:57,vars:27,consts:[[3,"translucent"],["href","https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css","rel","stylesheet"],["href","https://unpkg.com/@fortawesome/fontawesome-free@6.2.1/css/all.css","rel","stylesheet"],["href","https://unpkg.com/angular-calendar@0.31.0/css/angular-calendar.css","rel","stylesheet"],["href","https://unpkg.com/flatpickr@4.6.13/dist/flatpickr.css","rel","stylesheet"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],[1,"btn","btn-primary",3,"click"],[3,"ngSwitch"],[3,"viewDate","events","activeDayIsOpen","dayClicked"],[3,"viewDate","events","dayHeaderClicked",4,"ngSwitchCase"],[3,"viewDate","events",4,"ngSwitchCase"],[4,"ngFor","ngForOf"],["collapse","fade"],["slot","bottom"],["routerLink","/app-medecin"],["name","home-outline"],["routerLink","/calender-medecin",3,"routerDirection"],["name","calendar-outline"],["routerLink","/parametre-med",3,"routerDirection"],["name","settings-outline"],[3,"viewDate","events","dayHeaderClicked"],[3,"viewDate","events"],["color","danger",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0),e._UZ(1,"link",1)(2,"link",2)(3,"link",3)(4,"link",4),e.TgZ(5,"ion-toolbar")(6,"ion-title"),e._uU(7,"Calendrier m\xe9dical"),e.qZA()()(),e.TgZ(8,"ion-content",5)(9,"ion-header",6)(10,"ion-toolbar")(11,"ion-title",7),e._uU(12,"Calendrier m\xe9dical"),e.qZA()()(),e._UZ(13,"br")(14,"br")(15,"br"),e.TgZ(16,"div",8)(17,"div",9)(18,"div",10)(19,"div",11),e.NdJ("viewDateChange",function(r){return n.viewDate=r})("viewDateChange",function(){return n.closeOpenMonthViewDay()}),e._uU(20," Pr\xe9c\xe9dent "),e.qZA(),e.TgZ(21,"div",12),e.NdJ("viewDateChange",function(r){return n.viewDate=r}),e._uU(22," Aujourd'hui "),e.qZA(),e.TgZ(23,"div",13),e.NdJ("viewDateChange",function(r){return n.viewDate=r})("viewDateChange",function(){return n.closeOpenMonthViewDay()}),e._uU(24," Suivant "),e.qZA()()(),e.TgZ(25,"div",9)(26,"h3"),e._uU(27),e.ALo(28,"calendarDate"),e.qZA()(),e.TgZ(29,"div",9)(30,"div",10)(31,"div",14),e.NdJ("click",function(){return n.setView(n.CalendarView.Month)}),e._uU(32," Mois "),e.qZA(),e.TgZ(33,"div",14),e.NdJ("click",function(){return n.setView(n.CalendarView.Week)}),e._uU(34," Semaine "),e.qZA(),e.TgZ(35,"div",14),e.NdJ("click",function(){return n.setView(n.CalendarView.Day)}),e._uU(36," Jour "),e.qZA()()()(),e._UZ(37,"br"),e.TgZ(38,"div",15)(39,"mwl-calendar-month-view",16),e.NdJ("dayClicked",function(r){return n.dayClicked(r.day)}),e.qZA(),e.YNc(40,Z,1,2,"mwl-calendar-week-view",17)(41,x,1,2,"mwl-calendar-day-view",18),e.qZA(),e.TgZ(42,"ion-list"),e.YNc(43,k,5,5,"ion-item",19),e.qZA()(),e.TgZ(44,"ion-footer",20)(45,"ion-toolbar")(46,"ion-tabs")(47,"ion-tab-bar",21)(48,"ion-tab-button",22),e._UZ(49,"ion-icon",23),e._uU(50," Accueil "),e.qZA(),e.TgZ(51,"ion-tab-button",24),e._UZ(52,"ion-icon",25),e._uU(53," Calendrier "),e.qZA(),e.TgZ(54,"ion-tab-button",26),e._UZ(55,"ion-icon",27),e._uU(56," R\xe9glages "),e.qZA()()()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(8),e.Q6J("fullscreen",!0),e.xp6(11),e.Q6J("view",n.view)("viewDate",n.viewDate),e.xp6(2),e.Q6J("viewDate",n.viewDate),e.xp6(2),e.Q6J("view",n.view)("viewDate",n.viewDate),e.xp6(4),e.Oqu(e.Dn7(28,23,n.viewDate,n.view+"ViewTitle","en")),e.xp6(4),e.ekj("active",n.view===n.CalendarView.Month),e.xp6(2),e.ekj("active",n.view===n.CalendarView.Week),e.xp6(2),e.ekj("active",n.view===n.CalendarView.Day),e.xp6(3),e.Q6J("ngSwitch",n.view),e.xp6(),e.Q6J("viewDate",n.viewDate)("events",n.events)("activeDayIsOpen",n.activeDayIsOpen),e.xp6(),e.Q6J("ngSwitchCase","week"),e.xp6(),e.Q6J("ngSwitchCase","day"),e.xp6(2),e.Q6J("ngForOf",n.rdvs),e.xp6(8),e.Q6J("routerDirection","root"),e.xp6(3),e.Q6J("routerDirection","root"))},dependencies:[u.sg,u.RF,u.n9,l.YG,l.W2,l.fr,l.Gu,l.gu,l.Ie,l.Q$,l.q_,l.yq,l.ZU,l.wd,l.sr,l.UN,l.YI,g.rH,c.YX,c.MG,c.nA,c.GH,c.TK,c.Se,c.vk]}),s})()}];let E=(()=>{var a;class s{}return(a=s).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[g.Bz.forChild(A),g.Bz]}),s})(),P=(()=>{var a;class s{}return(a=s).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.ez,p.u5,l.Pc,E,c._8.forRoot({provide:c._A,useFactory:C.x})]}),s})()}}]);